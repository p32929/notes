var Uc=Object.defineProperty;var Xc=(e,t,r)=>t in e?Uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var oo=(e,t,r)=>Xc(e,typeof t!="symbol"?t+"":t,r);import{j as d,P as Gc,C as Qc,u as Jc,i as Zc,E as el}from"./tiptap-eMtY1BVf.js";import{b as Vn,d as Ei,e as tl,f as nl,h as Di,g as rl,r as k,R as Ye,u as Co,P as ol}from"./vendor-BZ1_Dklq.js";import{P as sl,C as pa,a as il,R as al,T as cl,O as ma,b as ga,c as ll,d as va,D as ya,e as ul,f as dl,B as ba,I as wa,S as xa,g as Sa,L as ja,h as Na,Q as fl,F as hl,M as pl,U as ml,i as gl,j as lo,k as vl,K as yl,l as _a,m as bl,n as $n,o as wl,p as xl,X as Ca,q as Sl,H as jl,r as Nl,s as _l,t as Cl,u as kl,v as El,w as Dl,x as Ol,y as Ml,z as Oi,A as Pl,E as Al,G as Rl,J as Tl,N as ka,V as Il,W as Ll,Y as Fl}from"./ui-Cu_iL5nl.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var fs={},Mi=Vn;fs.createRoot=Mi.createRoot,fs.hydrateRoot=Mi.hydrateRoot;const Fe={Remove:"remove",Replace:"replace",Add:"add"},Ea=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),zl=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),uo=Symbol.iterator,_t={mutable:"mutable",immutable:"immutable"},Rs={};function Nt(e){var t;return(t=e.copy)!==null&&t!==void 0?t:e.original}function An(e){return!!de(e)}function de(e){return typeof e!="object"?null:e==null?void 0:e[Ea]}function Ts(e){var t;const r=de(e);return r?(t=r.copy)!==null&&t!==void 0?t:r.original:e}function It(e,t){if(!e||typeof e!="object")return!1;let r;return Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!(t!=null&&t.mark)&&((r=t.mark(e,_t))===_t.immutable||typeof r=="function")}function Da(e,t=[]){if(Object.hasOwnProperty.call(e,"key")){const r=de(yn(e.parent.copy,e.key));if(r!==null&&(r==null?void 0:r.original)!==e.original)return null;t.push(e.parent.type===3?Array.from(e.parent.setMap.keys()).indexOf(e.key):e.key)}return e.parent?Da(e.parent,t):t.reverse()}function Qn(e){return Array.isArray(e)?1:e instanceof Map?2:e instanceof Set?3:0}function yn(e,t){return Qn(e)===2?e.get(t):e[t]}function Pr(e,t,r){Qn(e)===2?e.set(t,r):e[t]=r}function ss(e,t){const r=de(e);return(r?Nt(r):e)[t]}function tn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function hs(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function On(e,t){return t?e:[""].concat(e).map(r=>{const o=`${r}`;return o.indexOf("/")===-1&&o.indexOf("~")===-1?o:o.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function Bl(e){const t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(r=>{let o=Reflect.getOwnPropertyDescriptor(e,r);if(o.enumerable&&o.configurable&&o.writable){t[r]=e[r];return}o.writable||(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(o={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[r]}),Reflect.defineProperty(t,r,o)}),t}const Kl=Object.prototype.propertyIsEnumerable;function Oa(e,t){let r;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set)return new Set(e.values());if(e instanceof Map)return new Map(e);if(t!=null&&t.mark&&(r=t.mark(e,_t),r!==void 0)&&r!==_t.mutable){if(r===_t.immutable)return Bl(e);if(typeof r=="function"){if(t.enablePatches||t.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return r()}throw new Error(`Unsupported mark result: ${r}`)}else if(typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype){const o={};return Object.keys(e).forEach(a=>{o[a]=e[a]}),Object.getOwnPropertySymbols(e).forEach(a=>{Kl.call(e,a)&&(o[a]=e[a])}),o}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function lt(e){e.copy||(e.copy=Oa(e.original,e.options))}function wr(e){if(!It(e))return Ts(e);if(Array.isArray(e))return e.map(wr);if(e instanceof Map)return new Map(Array.from(e.entries()).map(([r,o])=>[r,wr(o)]));if(e instanceof Set)return new Set(Array.from(e).map(wr));const t=Object.create(Object.getPrototypeOf(e));for(const r in e)t[r]=wr(e[r]);return t}function fo(e){return An(e)?wr(e):e}function Ht(e){var t;e.assignedMap=(t=e.assignedMap)!==null&&t!==void 0?t:new Map,e.operated||(e.operated=!0,e.parent&&Ht(e.parent))}function Pi(){throw new Error("Cannot modify frozen object")}function Yn(e,t,r,o,a){{r=r??new WeakMap,o=o??[],a=a??[];const f=r.has(e)?r.get(e):e;if(o.length>0){const p=o.indexOf(f);if(f&&typeof f=="object"&&p!==-1)throw o[0]===f?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${a.slice(0,p).map((g,v)=>{if(typeof g=="symbol")return`[${g.toString()}]`;const w=o[v];return typeof g=="object"&&(w instanceof Map||w instanceof Set)?Array.from(w.keys()).indexOf(g):g}).join("/")}`);o.push(f),a.push(t)}else o.push(f)}if(Object.isFrozen(e)||An(e)){o.pop(),a.pop();return}switch(Qn(e)){case 2:for(const[p,g]of e)Yn(p,p,r,o,a),Yn(g,p,r,o,a);e.set=e.clear=e.delete=Pi;break;case 3:for(const p of e)Yn(p,p,r,o,a);e.add=e.clear=e.delete=Pi;break;case 1:Object.freeze(e);let f=0;for(const p of e)Yn(p,f,r,o,a),f+=1;break;default:Object.freeze(e),Object.keys(e).forEach(p=>{const g=e[p];Yn(g,p,r,o,a)})}o.pop(),a.pop()}function ho(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ai(e,t){if(t in e){let r=Reflect.getPrototypeOf(e);for(;r;){const o=Reflect.getOwnPropertyDescriptor(r,t);if(o)return o;r=Reflect.getPrototypeOf(r)}}}function Is(e,t){const r=Qn(e);if(r===0)Reflect.ownKeys(e).forEach(o=>{t(o,e[o],e)});else if(r===1){let o=0;for(const a of e)t(o,a,e),o+=1}else e.forEach((o,a)=>t(a,o,e))}function Ma(e,t,r){if(An(e)||!It(e,r)||t.has(e)||Object.isFrozen(e))return;const o=e instanceof Set,a=o?new Map:void 0;if(t.add(e),Is(e,(l,f)=>{var p;if(An(f)){const g=de(f);lt(g);const v=!((p=g.assignedMap)===null||p===void 0)&&p.size||g.operated?g.copy:g.original;Pr(o?a:e,l,v)}else Ma(f,t,r)}),a){const l=e,f=Array.from(l);l.clear(),f.forEach(p=>{l.add(a.has(p)?a.get(p):p)})}}function ql(e,t){const r=e.type===3?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&r&&Ma(yn(r,t),e.finalities.handledSet,e.options)}function ps(e){e.type===3&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(Ts(t))}))}function ms(e,t,r,o){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(r&&o){const l=Da(e);l&&t(e,l,r,o)}e.finalized=!0}}function Ls(e,t,r,o){const a=de(r);a&&(a.callbacks||(a.callbacks=[]),a.callbacks.push((l,f)=>{var p;const g=e.type===3?e.setMap:e.copy;if(tn(yn(g,t),r)){let v=a.original;a.copy&&(v=a.copy),ps(e),ms(e,o,l,f),e.options.enableAutoFreeze&&(e.options.updatedValues=(p=e.options.updatedValues)!==null&&p!==void 0?p:new WeakMap,e.options.updatedValues.set(v,a.original)),Pr(g,t,v)}}),e.options.enableAutoFreeze&&a.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),It(r,e.options)&&e.finalities.draft.push(()=>{const l=e.type===3?e.setMap:e.copy;tn(yn(l,t),r)&&ql(e,t)})}function Wl(e,t,r,o,a){let{original:l,assignedMap:f,options:p}=e,g=e.copy;g.length<l.length&&([l,g]=[g,l],[r,o]=[o,r]);for(let v=0;v<l.length;v+=1)if(f.get(v.toString())&&g[v]!==l[v]){const w=t.concat([v]),N=On(w,a);r.push({op:Fe.Replace,path:N,value:fo(g[v])}),o.push({op:Fe.Replace,path:N,value:fo(l[v])})}for(let v=l.length;v<g.length;v+=1){const w=t.concat([v]),N=On(w,a);r.push({op:Fe.Add,path:N,value:fo(g[v])})}if(l.length<g.length){const{arrayLengthAssignment:v=!0}=p.enablePatches;if(v){const w=t.concat(["length"]),N=On(w,a);o.push({op:Fe.Replace,path:N,value:l.length})}else for(let w=g.length;l.length<w;w-=1){const N=t.concat([w-1]),R=On(N,a);o.push({op:Fe.Remove,path:R})}}}function Yl({original:e,copy:t,assignedMap:r},o,a,l,f){r.forEach((p,g)=>{const v=yn(e,g),w=fo(yn(t,g)),N=p?ho(e,g)?Fe.Replace:Fe.Add:Fe.Remove;if(tn(v,w)&&N===Fe.Replace)return;const R=o.concat(g),P=On(R,f);a.push(N===Fe.Remove?{op:N,path:P}:{op:N,path:P,value:w}),l.push(N===Fe.Add?{op:Fe.Remove,path:P}:N===Fe.Remove?{op:Fe.Add,path:P,value:v}:{op:Fe.Replace,path:P,value:v})})}function Vl({original:e,copy:t},r,o,a,l){let f=0;e.forEach(p=>{if(!t.has(p)){const g=r.concat([f]),v=On(g,l);o.push({op:Fe.Remove,path:v,value:p}),a.unshift({op:Fe.Add,path:v,value:p})}f+=1}),f=0,t.forEach(p=>{if(!e.has(p)){const g=r.concat([f]),v=On(g,l);o.push({op:Fe.Add,path:v,value:p}),a.unshift({op:Fe.Remove,path:v,value:p})}f+=1})}function _r(e,t,r,o){const{pathAsArray:a=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return Yl(e,t,r,o,a);case 1:return Wl(e,t,r,o,a);case 3:return Vl(e,t,r,o,a)}}let $l=!1;const vo=(e,t,r=!1)=>{if(typeof e=="object"&&e!==null&&(!It(e,t)||r)&&!$l)throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},gs={get size(){return Nt(de(this)).size},has(e){return Nt(de(this)).has(e)},set(e,t){const r=de(this),o=Nt(r);return(!o.has(e)||!tn(o.get(e),t))&&(lt(r),Ht(r),r.assignedMap.set(e,!0),r.copy.set(e,t),Ls(r,e,t,_r)),this},delete(e){if(!this.has(e))return!1;const t=de(this);return lt(t),Ht(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){const e=de(this);if(this.size){lt(e),Ht(e),e.assignedMap=new Map;for(const[t]of e.original)e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){const r=de(this);Nt(r).forEach((o,a)=>{e.call(t,this.get(a),a,this)})},get(e){var t,r;const o=de(this),a=Nt(o).get(e),l=((r=(t=o.options).mark)===null||r===void 0?void 0:r.call(t,a,_t))===_t.mutable;if(o.options.strict&&vo(a,o.options,l),l||o.finalized||!It(a,o.options)||a!==o.original.get(e))return a;const f=Rs.createDraft({original:a,parentDraft:o,key:e,finalities:o.finalities,options:o.options});return lt(o),o.copy.set(e,f),f},keys(){return Nt(de(this)).keys()},values(){const e=this.keys();return{[uo]:()=>this.values(),next:()=>{const t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){const e=this.keys();return{[uo]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const r=this.get(t.value);return{done:!1,value:[t.value,r]}}}},[uo](){return this.entries()}},Hl=Reflect.ownKeys(gs),Ri=(e,t,{isValuesIterator:r})=>()=>{var o,a;const l=t.next();if(l.done)return l;const f=l.value;let p=e.setMap.get(f);const g=de(p),v=((a=(o=e.options).mark)===null||a===void 0?void 0:a.call(o,p,_t))===_t.mutable;if(e.options.strict&&vo(f,e.options,v),!v&&!g&&It(f,e.options)&&!e.finalized&&e.original.has(f)){const w=Rs.createDraft({original:f,parentDraft:e,key:f,finalities:e.finalities,options:e.options});e.setMap.set(f,w),p=w}else g&&(p=g.proxy);return{done:!1,value:r?p:[p,p]}},vs={get size(){return de(this).setMap.size},has(e){const t=de(this);if(t.setMap.has(e))return!0;lt(t);const r=de(e);return!!(r&&t.setMap.has(r.original))},add(e){const t=de(this);return this.has(e)||(lt(t),Ht(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),Ls(t,e,e,_r)),this},delete(e){if(!this.has(e))return!1;const t=de(this);lt(t),Ht(t);const r=de(e);return r&&t.setMap.has(r.original)?(t.assignedMap.set(r.original,!1),t.setMap.delete(r.original)):(!r&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;const e=de(this);lt(e),Ht(e);for(const t of e.original)e.assignedMap.set(t,!1);e.setMap.clear()},values(){const e=de(this);lt(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:Ri(e,t,{isValuesIterator:!0})}},entries(){const e=de(this);lt(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:Ri(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[uo](){return this.values()},forEach(e,t){const r=this.values();let o=r.next();for(;!o.done;)e.call(t,o.value,o.value,this),o=r.next()}},Ul=Reflect.ownKeys(vs),Pa=new WeakSet,Aa={get(e,t,r){var o,a;const l=(o=e.copy)===null||o===void 0?void 0:o[t];if(l&&Pa.has(l))return l;if(t===Ea)return e;let f;if(e.options.mark){const v=t==="size"&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,r);if(f=e.options.mark(v,_t),f===_t.mutable)return e.options.strict&&vo(v,e.options,!0),v}const p=Nt(e);if(p instanceof Map&&Hl.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(gs,"size").get.call(e.proxy);const v=gs[t];if(v)return v.bind(e.proxy)}if(p instanceof Set&&Ul.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(vs,"size").get.call(e.proxy);const v=vs[t];if(v)return v.bind(e.proxy)}if(!ho(p,t)){const v=Ai(p,t);return v?"value"in v?v.value:(a=v.get)===null||a===void 0?void 0:a.call(e.proxy):void 0}const g=p[t];if(e.options.strict&&vo(g,e.options),e.finalized||!It(g,e.options))return g;if(g===ss(e.original,t)){if(lt(e),e.copy[t]=Fs({original:e.original[t],parentDraft:e,key:e.type===1?Number(t):t,finalities:e.finalities,options:e.options}),typeof f=="function"){const v=de(e.copy[t]);return lt(v),Ht(v),v.copy}return e.copy[t]}return g},set(e,t,r){var o;if(e.type===3||e.type===2)throw new Error("Map/Set draft does not support any property assignment.");let a;if(e.type===1&&t!=="length"&&!(Number.isInteger(a=Number(t))&&a>=0&&(t===0||a===0||String(a)===String(t))))throw new Error("Only supports setting array indices and the 'length' property.");const l=Ai(Nt(e),t);if(l!=null&&l.set)return l.set.call(e.proxy,r),!0;const f=ss(Nt(e),t),p=de(f);return p&&tn(p.original,r)?(e.copy[t]=r,e.assignedMap=(o=e.assignedMap)!==null&&o!==void 0?o:new Map,e.assignedMap.set(t,!1),!0):(tn(r,f)&&(r!==void 0||ho(e.original,t))||(lt(e),Ht(e),ho(e.original,t)&&tn(r,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=r,Ls(e,t,r,_r)),!0)},has(e,t){return t in Nt(e)},ownKeys(e){return Reflect.ownKeys(Nt(e))},getOwnPropertyDescriptor(e,t){const r=Nt(e),o=Reflect.getOwnPropertyDescriptor(r,t);return o&&{writable:!0,configurable:e.type!==1||t!=="length",enumerable:o.enumerable,value:r[t]}},getPrototypeOf(e){return Reflect.getPrototypeOf(e.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var r;return e.type===1?Aa.set.call(this,e,t,void 0,e.proxy):(ss(e.original,t)!==void 0||t in e.original?(lt(e),Ht(e),e.assignedMap.set(t,!1)):(e.assignedMap=(r=e.assignedMap)!==null&&r!==void 0?r:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function Fs(e){const{original:t,parentDraft:r,key:o,finalities:a,options:l}=e,f=Qn(t),p={type:f,finalized:!1,parent:r,original:t,copy:null,proxy:null,finalities:a,options:l,setMap:f===3?new Map(t.entries()):void 0};(o||"key"in e)&&(p.key=o);const{proxy:g,revoke:v}=Proxy.revocable(f===1?Object.assign([],p):p,Aa);if(a.revoke.push(v),Pa.add(g),p.proxy=g,r){const w=r;w.finalities.draft.push((N,R)=>{var P,L;const F=de(g);let z=w.type===3?w.setMap:w.copy;const Y=yn(z,o),U=de(Y);if(U){let B=U.original;U.operated&&(B=Ts(Y)),ps(U),ms(U,_r,N,R),w.options.enableAutoFreeze&&(w.options.updatedValues=(P=w.options.updatedValues)!==null&&P!==void 0?P:new WeakMap,w.options.updatedValues.set(B,U.original)),Pr(z,o,B)}(L=F.callbacks)===null||L===void 0||L.forEach(B=>{B(N,R)})})}else{const w=de(g);w.finalities.draft.push((N,R)=>{ps(w),ms(w,_r,N,R)})}return g}Rs.createDraft=Fs;function Xl(e,t,r,o,a){var l;const f=de(e),p=(l=f==null?void 0:f.original)!==null&&l!==void 0?l:e,g=!!t.length;if(f!=null&&f.operated)for(;f.finalities.draft.length>0;)f.finalities.draft.pop()(r,o);const v=g?t[0]:f?f.operated?f.copy:f.original:e;return f&&hs(f),a&&Yn(v,v,f==null?void 0:f.options.updatedValues),[v,r&&g?[{op:Fe.Replace,path:[],value:t[0]}]:r,o&&g?[{op:Fe.Replace,path:[],value:p}]:o]}function Gl(e,t){var r;const o={draft:[],revoke:[],handledSet:new WeakSet};let a,l;t.enablePatches&&(a=[],l=[]);const p=((r=t.mark)===null||r===void 0?void 0:r.call(t,e,_t))===_t.mutable||!It(e,t)?e:Fs({original:e,parentDraft:null,finalities:o,options:t});return[p,(g=[])=>{const[v,w,N]=Xl(p,g,a,l,t.enableAutoFreeze);return t.enablePatches?[v,w,N]:v}]}function ys(e){const{rootDraft:t,value:r,useRawReturn:o=!1,isRoot:a=!0}=e;Is(r,(l,f,p)=>{const g=de(f);if(g&&t&&g.finalities===t.finalities){e.isContainDraft=!0;const v=g.original;if(p instanceof Set){const w=Array.from(p);p.clear(),w.forEach(N=>p.add(l===N?v:N))}else Pr(p,l,v)}else typeof f=="object"&&f!==null&&(e.value=f,e.isRoot=!1,ys(e))}),a&&(e.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),o&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function Ra(e){const t=de(e);if(!It(e,t==null?void 0:t.options))return e;const r=Qn(e);if(t&&!t.operated)return t.original;let o;function a(){o=r===2?new Map(e):r===3?Array.from(t.setMap.values()):Oa(e,t==null?void 0:t.options)}if(t){t.finalized=!0;try{a()}finally{t.finalized=!1}}else o=e;return Is(o,(l,f)=>{if(t&&tn(yn(t.original,l),f))return;const p=Ra(f);p!==f&&(o===e&&a(),Pr(o,l,p))}),r===3?new Set(o):o}function Ti(e){if(!An(e))throw new Error(`current() is only used for Draft, parameter: ${e}`);return Ra(e)}const Ql=e=>function t(r,o,a){var l,f,p;if(typeof r=="function"&&typeof o!="function")return function(V,...J){return t(V,Z=>r.call(this,Z,...J),o)};const g=r,v=o;let w=a;if(typeof o!="function"&&(w=o),w!==void 0&&Object.prototype.toString.call(w)!=="[object Object]")throw new Error(`Invalid options: ${w}, 'options' should be an object.`);w=Object.assign(Object.assign({},e),w);const N=An(g)?Ti(g):g,R=Array.isArray(w.mark)?(V,J)=>{for(const Z of w.mark){if(typeof Z!="function")throw new Error(`Invalid mark: ${Z}, 'mark' should be a function.`);const oe=Z(V,J);if(oe)return oe}}:w.mark,P=(l=w.enablePatches)!==null&&l!==void 0?l:!1,L=(f=w.strict)!==null&&f!==void 0?f:!1,z={enableAutoFreeze:(p=w.enableAutoFreeze)!==null&&p!==void 0?p:!1,mark:R,strict:L,enablePatches:P};if(!It(N,z)&&typeof N=="object"&&N!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[Y,U]=Gl(N,z);if(typeof o!="function"){if(!It(N,z))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[Y,U]}let B;try{B=v(Y)}catch(V){throw hs(de(Y)),V}const te=V=>{const J=de(Y);if(!An(V)){if(V!==void 0&&!tn(V,Y)&&(J!=null&&J.operated))throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const oe=V==null?void 0:V[zl];if(oe){const fe=oe[0];return z.strict&&typeof V=="object"&&V!==null&&ys({rootDraft:J,value:V,useRawReturn:!0}),U([fe])}if(V!==void 0)return typeof V=="object"&&V!==null&&ys({rootDraft:J,value:V}),U([V])}if(V===Y||V===void 0)return U([]);const Z=de(V);if(z===Z.options){if(Z.operated)throw new Error("Cannot return a modified child draft.");return U([Ti(V)])}return U([V])};return B instanceof Promise?B.then(te,V=>{throw hs(de(Y)),V}):te(B)},bs=Ql();Object.prototype.constructor.toString();var ws=function(e,t){return ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])},ws(e,t)},vn=function(){return vn=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},vn.apply(this,arguments)};function Ta(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o,a,l=r.call(e),f=[];try{for(;(t===void 0||t-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(p){a={error:p}}finally{try{o&&!o.done&&(r=l.return)&&r.call(l)}finally{if(a)throw a.error}}return f}var Ia="USM-REDUX",yo=Symbol("store"),Ii=Symbol("subscriptions"),Tt=Symbol("state"),Li=Symbol("bootstrapped"),xs=Symbol("identifier"),La=Symbol("strict"),Fa=Symbol("enablePatches"),Ss=function(e,t){return e===t?e!==0||t!==0||1/e==1/t:e!=e&&t!=t},za,mt,js=function(){return za},is=function(e){za=e},po=0,Ba=function(){function e(t){this._version=0,this._value=t}return e.prototype._refresh=function(){return!0},Object.defineProperty(e.prototype,"value",{get:function(){var t=this.addDependency();return t!==void 0&&(t._version=this._version),this._value},set:function(t){if(mt instanceof Jl)throw new Error("Computed cannot have side-effects");Ss(t,this._value)||(this._value=t,this._version+=1,po+=1)},enumerable:!1,configurable:!0}),e.prototype.addDependency=function(){if(mt!==void 0){var t=this._node;return t===void 0||t._target!==mt?(t={_version:0,_source:this,_prevSource:mt._sources,_nextSource:void 0,_target:mt,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:t},mt._sources!==void 0&&(mt._sources._nextSource=t),mt._sources=t,this._node=t,t):t._version===-1?(t._version=0,t._nextSource!==void 0&&(t._nextSource._prevSource=t._prevSource,t._prevSource!==void 0&&(t._prevSource._nextSource=t._nextSource),t._prevSource=mt._sources,t._nextSource=void 0,mt._sources._nextSource=t,mt._sources=t),t):void 0}},e}(),Jl=function(e){function t(r){var o=e.call(this,void 0)||this;return o._globalVersion=po-1,o._flags=new Set([2]),o._compute=r,o}return function(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=r}ws(r,o),r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}(t,e),t.prototype._refresh=function(){if(this._flags.delete(1),this._flags.has(0))return!1;if(!this._flags.has(2)&&this._flags.has(4)||(this._flags.delete(2),this._globalVersion===po))return!0;if(this._globalVersion=po,this._flags.add(0),this._version>0&&!this.needsToRecompute())return this._flags.delete(0),!0;var r=mt;try{this.prepareSources(),mt=this;var o=this._compute();(this._flags.has(3)||this._value!==o||this._version===0)&&(this._value=o,this._flags.delete(3),this._version+=1)}catch(a){this._value=a,this._flags.add(3),this._version+=1}return mt=r,this.cleanupSources(),this._flags.delete(0),!0},Object.defineProperty(t.prototype,"value",{get:function(){if(this._flags.has(0))throw new Error("Cycle detected");var r=this.addDependency();if(this._refresh(),r!==void 0&&(r._version=this._version),this._flags.has(3))throw this._value;return this._value},enumerable:!1,configurable:!0}),t.prototype.needsToRecompute=function(){for(var r=this._sources;r!==void 0;r=r._nextSource)if(r._source._version!==r._version||!r._source._refresh()||r._source._version!==r._version)return!0;return!1},t.prototype.prepareSources=function(){for(var r=this._sources;r!==void 0;r=r._nextSource){var o=r._source._node;if(o!==void 0&&(r._rollbackNode=o),r._source._node=r,r._version=-1,r._nextSource===void 0){this._sources=r;break}}},t.prototype.cleanupSources=function(){for(var r,o=this._sources;o!==void 0;){var a=o._prevSource;o._version===-1?(a!==void 0&&(a._nextSource=o._nextSource),o._nextSource!==void 0&&(o._nextSource._prevSource=a)):r=o,o._source._node=o._rollbackNode,o._rollbackNode!==void 0&&(o._rollbackNode=void 0),o=a}this._sources=r},t}(Ba),Zl=function(e,t,r){var o,a,l,f;r===void 0&&(r={});var p=r.reduxEnhancer,g=r.handleReducers,v=g===void 0?function(B){return Ei(B)}:g;if(typeof e!="object"||!Array.isArray(e.modules))throw new Error("'createStore' options should be a object with a property 'modules'");var w,N=(l=e.strict)!==null&&l!==void 0&&l,R=(f=r.enablePatches)!==null&&f!==void 0&&f,P=new Set,L={},F=[];e.modules.forEach(function(B,te){var V,J,Z,oe,fe;if(typeof B=="object"&&B!==null){var se=B,he=Object.getPrototypeOf(se).constructor.name;se[Tt]===void 0||se[Li];var ne=(fe=se[xs])!==null&&fe!==void 0?fe:se.name;if(ne==null&&(ne="@@usm-redux/".concat(he,"/").concat(Math.random().toString(36))),typeof ne!="string")throw new Error("'".concat(he,"' module 'name' property should be defined as a valid 'string'."));P.has(ne)&&(ne+="".concat(te)),P.add(ne);var je=((V={})[Li]={enumerable:!1,configurable:!1,value:!0},V);if(se[Tt]){var De={},dt=function(pe){var Pe,Se,Ae=Object.getOwnPropertyDescriptor(se,pe);if(Ae===void 0)return"continue";Object.assign(se[Tt],((Pe={})[pe]=Ae.value,Pe)),Object.assign(je,((Se={})[pe]={enumerable:!0,configurable:!1,get:function(){var Be=this[Tt][pe],Ke=js();return Ke?Be:(Ke||!De[pe]||Ss(De[pe].value,Be)||(De[pe].value=Be),De[pe].value)},set:function(Be){this[Tt][pe]=Be}},Se))};for(var st in se[Tt])dt(st);var ze=N?bs(vn({},se[Tt]),function(){},{strict:N,enableAutoFreeze:N}):se[Tt],Ve=Object.entries(ze).reduce(function(pe,Pe){var Se,Ae,Be=Ta(Pe,2),Ke=Be[0],Me=Be[1];if(typeof Me=="function")return Object.assign(pe,((Se={})[Ke]=Me,Se));De[Ke]=function(Ge){return new Ba(Ge)}(Me);var Ft=De[Ke];return Object.assign(pe,((Ae={})[Ke]=function(Ge,ee){if(Ge===void 0&&(Ge=Me),ee._usm===Ia){var me=ee._state[ne][Ke];return Ss(me,Ge)||(Ft.value=me),me}return Ge},Ae))},{}),Oe=Ei(Ve);Object.assign(L,((J={})[ne]=Oe,J)),Object.assign(je,((Z={})[Tt]={enumerable:!1,configurable:!1,get:function(){var pe,Pe=js();if(Pe)return Pe[ne];var Se=(pe=this[yo])===null||pe===void 0?void 0:pe.getState()[ne];return N&&!Object.isFrozen(Se)?Object.freeze(Se):Se}},Z))}Object.assign(je,((oe={})[xs]={configurable:!1,enumerable:!1,value:ne},oe[La]={configurable:!1,enumerable:!1,value:N},oe[Fa]={configurable:!1,enumerable:!1,value:R},oe[yo]={configurable:!1,enumerable:!1,get:function(){return w}},oe)),Object.defineProperties(se,je),Array.isArray(se[Ii])&&Array.prototype.push.apply(F,se[Ii])}});var z=tl(v(L),t,p);w={dispatch:z.dispatch,getState:z.getState,subscribe:z.subscribe};try{for(var Y=function(B){var te=typeof Symbol=="function"&&Symbol.iterator,V=te&&B[te],J=0;if(V)return V.call(B);if(B&&typeof B.length=="number")return{next:function(){return B&&J>=B.length&&(B=void 0),{value:B&&B[J++],done:!B}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(F),U=Y.next();!U.done;U=Y.next())(0,U.value)()}catch(B){o={error:B}}finally{try{U&&!U.done&&(a=Y.return)&&a.call(Y)}finally{if(o)throw o.error}}return w},Ct=function(e,t,r){var o=r.value;if(typeof o!="function")throw new Error("".concat(String(t)," can only be decorated by '@action' as a class method."));return vn(vn({},r),{value:function(){for(var a,l=this,f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];if(js()===void 0)try{var g=this[yo].getState(),v=void 0,w=[],N=[],R=function(F){is(F),o.apply(l,f)},P=this[Fa],L=this[La];P?(v=(a=Ta(bs(g,R,{enablePatches:!0,strict:L,enableAutoFreeze:L}),3))[0],w=a[1],N=a[2]):v=bs(g,R,{strict:L,enableAutoFreeze:L}),is(void 0),this[yo].dispatch(vn({type:this[xs],method:t,params:f,_state:v,_usm:Ia},P?{_patches:w,_inversePatches:N}:{}))}finally{is(void 0)}else o.apply(this,f)}})},eu=function(e,t,r){var o,a;if(typeof t!="string")throw new Error("'@state' decorate ".concat(t.toString()," error in ").concat(e.constructor.name," class, it only supports class properties that decorate keys for string types."));Object.assign(e,((o={})[Tt]=vn(vn({},e[Tt]),((a={})[t]=void 0,a)),o))},tu=Object.defineProperty,nu=Object.getOwnPropertyDescriptor,vt=(e,t,r,o)=>{for(var a=o>1?void 0:o?nu(t,r):t,l=e.length-1,f;l>=0;l--)(f=e[l])&&(a=(o?f(t,r,a):f(a))||a);return o&&a&&tu(t,r,a),a};const ru=typeof window=="object"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):nl;class ut{constructor(){oo(this,"states",{selectedTab:0,tabs:[""],notes:[],selectedNoteId:null,searchQuery:"",sortBy:"updatedAt",sortOrder:"desc",theme:"system",color:"blue",fontSize:14})}setStates(t){this.states={...this.states,...t}}setText(t){if(this.states.tabs[this.states.selectedTab]!==void 0&&(this.states.tabs[this.states.selectedTab]=t),this.states.selectedNoteId){const r=this.states.notes.find(o=>o.id===this.states.selectedNoteId);r&&(r.content=t,r.updatedAt=Date.now())}}deleteTab(){this.states.tabs=this.states.tabs.filter((t,r)=>r!==this.states.selectedTab),this.states.selectedTab>0&&(this.states.selectedTab-=1)}addTab(){this.states.tabs.splice(this.states.selectedTab+1,0,""),this.states.selectedTab+=1}_createNoteAction(t,r=!0){this.states.notes.push(t),r&&(this.states.selectedNoteId=t.id)}createNote(t="Untitled Note"){const r={id:`note_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,title:t,content:"",createdAt:Date.now(),updatedAt:Date.now()};return this._createNoteAction(r,!0),r.id}updateNote(t,r){const o=this.states.notes.findIndex(a=>a.id===t);o!==-1&&(this.states.notes[o]={...this.states.notes[o],...r,updatedAt:Date.now()})}deleteNote(t){var r;this.states.notes=this.states.notes.filter(o=>o.id!==t),this.states.selectedNoteId===t&&(this.states.selectedNoteId=((r=this.states.notes[0])==null?void 0:r.id)||null)}clearAllNotes(){this.states.notes=[],this.states.selectedNoteId=null}selectNote(t){this.states.selectedNoteId=t}setSearchQuery(t){this.states.searchQuery=t}setTheme(t){this.states.theme=t}updateSettings(t){t.theme&&(this.states.theme=t.theme),t.color&&(this.states.color=t.color),t.fontSize&&(this.states.fontSize=t.fontSize)}reorderNotes(t,r){const o=Array.from(this.states.notes),[a]=o.splice(t,1);o.splice(r,0,a),this.states.notes=o}getFilteredNotes(){let t=[...this.states.notes];if(this.states.searchQuery){const r=this.states.searchQuery.toLowerCase();t=t.filter(o=>o.title.toLowerCase().includes(r)||o.content.toLowerCase().includes(r))}return t.sort((r,o)=>{const a=r[this.states.sortBy],l=o[this.states.sortBy];return this.states.sortOrder==="asc"?a<l?-1:a>l?1:0:a>l?-1:a<l?1:0}),t}}vt([eu],ut.prototype,"states",2);vt([Ct],ut.prototype,"setStates",1);vt([Ct],ut.prototype,"setText",1);vt([Ct],ut.prototype,"deleteTab",1);vt([Ct],ut.prototype,"addTab",1);vt([Ct],ut.prototype,"_createNoteAction",1);vt([Ct],ut.prototype,"updateNote",1);vt([Ct],ut.prototype,"deleteNote",1);vt([Ct],ut.prototype,"clearAllNotes",1);vt([Ct],ut.prototype,"selectNote",1);vt([Ct],ut.prototype,"setSearchQuery",1);vt([Ct],ut.prototype,"setTheme",1);vt([Ct],ut.prototype,"updateSettings",1);vt([Ct],ut.prototype,"reorderNotes",1);const _e=new ut,ou=Zl({modules:[_e]},void 0,{reduxEnhancer:ru()});var Ka={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(Di,function(){var r=function(n,s){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(i[u]=c[u])})(n,s)},o=function(){return(o=Object.assign||function(n){for(var s,i=1,c=arguments.length;i<c;i++)for(var u in s=arguments[i])Object.prototype.hasOwnProperty.call(s,u)&&(n[u]=s[u]);return n}).apply(this,arguments)};function a(n,s,i){for(var c,u=0,h=s.length;u<h;u++)!c&&u in s||((c=c||Array.prototype.slice.call(s,0,u))[u]=s[u]);return n.concat(c||Array.prototype.slice.call(s))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Di,f=Object.keys,p=Array.isArray;function g(n,s){return typeof s!="object"||f(s).forEach(function(i){n[i]=s[i]}),n}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var v=Object.getPrototypeOf,w={}.hasOwnProperty;function N(n,s){return w.call(n,s)}function R(n,s){typeof s=="function"&&(s=s(v(n))),(typeof Reflect>"u"?f:Reflect.ownKeys)(s).forEach(function(i){L(n,i,s[i])})}var P=Object.defineProperty;function L(n,s,i,c){P(n,s,g(i&&N(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},c))}function F(n){return{from:function(s){return n.prototype=Object.create(s.prototype),L(n.prototype,"constructor",n),{extend:R.bind(null,n.prototype)}}}}var z=Object.getOwnPropertyDescriptor,Y=[].slice;function U(n,s,i){return Y.call(n,s,i)}function B(n,s){return s(n)}function te(n){if(!n)throw new Error("Assertion Failed")}function V(n){l.setImmediate?setImmediate(n):setTimeout(n,0)}function J(n,s){if(typeof s=="string"&&N(n,s))return n[s];if(!s)return n;if(typeof s!="string"){for(var i=[],c=0,u=s.length;c<u;++c){var h=J(n,s[c]);i.push(h)}return i}var m=s.indexOf(".");if(m!==-1){var y=n[s.substr(0,m)];return y==null?void 0:J(y,s.substr(m+1))}}function Z(n,s,i){if(n&&s!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof s!="string"&&"length"in s){te(typeof i!="string"&&"length"in i);for(var c=0,u=s.length;c<u;++c)Z(n,s[c],i[c])}else{var h,m,y=s.indexOf(".");y!==-1?(h=s.substr(0,y),(m=s.substr(y+1))===""?i===void 0?p(n)&&!isNaN(parseInt(h))?n.splice(h,1):delete n[h]:n[h]=i:Z(y=!(y=n[h])||!N(n,h)?n[h]={}:y,m,i)):i===void 0?p(n)&&!isNaN(parseInt(s))?n.splice(s,1):delete n[s]:n[s]=i}}function oe(n){var s,i={};for(s in n)N(n,s)&&(i[s]=n[s]);return i}var fe=[].concat;function se(n){return fe.apply([],n)}var Gt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(se([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(s){return s+n+"Array"})}))).filter(function(n){return l[n]}),he=new Set(Gt.map(function(n){return l[n]})),ne=null;function je(n){return ne=new WeakMap,n=function s(i){if(!i||typeof i!="object")return i;var c=ne.get(i);if(c)return c;if(p(i)){c=[],ne.set(i,c);for(var u=0,h=i.length;u<h;++u)c.push(s(i[u]))}else if(he.has(i.constructor))c=i;else{var m,y=v(i);for(m in c=y===Object.prototype?{}:Object.create(y),ne.set(i,c),i)N(i,m)&&(c[m]=s(i[m]))}return c}(n),ne=null,n}var De={}.toString;function dt(n){return De.call(n).slice(8,-1)}var st=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ze=typeof st=="symbol"?function(n){var s;return n!=null&&(s=n[st])&&s.apply(n)}:function(){return null};function Ve(n,s){return s=n.indexOf(s),0<=s&&n.splice(s,1),0<=s}var Oe={};function pe(n){var s,i,c,u;if(arguments.length===1){if(p(n))return n.slice();if(this===Oe&&typeof n=="string")return[n];if(u=ze(n)){for(i=[];!(c=u.next()).done;)i.push(c.value);return i}if(n==null)return[n];if(typeof(s=n.length)!="number")return[n];for(i=new Array(s);s--;)i[s]=n[s];return i}for(s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return i}var Pe=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},wn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(wn),Se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(n,s){this.name=n,this.message=s}function Be(n,s){return n+". Errors: "+Object.keys(s).map(function(i){return s[i].toString()}).filter(function(i,c,u){return u.indexOf(i)===c}).join(`
`)}function Ke(n,s,i,c){this.failures=s,this.failedKeys=c,this.successCount=i,this.message=Be(n,s)}function Me(n,s){this.name="BulkError",this.failures=Object.keys(s).map(function(i){return s[i]}),this.failuresByPos=s,this.message=Be(n,this.failures)}F(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),F(Ke).from(Ae),F(Me).from(Ae);var Ft=Mt.reduce(function(n,s){return n[s]=s+"Error",n},{}),Ge=Ae,ee=Mt.reduce(function(n,s){var i=s+"Error";function c(u,h){this.name=i,u?typeof u=="string"?(this.message="".concat(u).concat(h?`
 `+h:""),this.inner=h||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=Se[s]||i,this.inner=null)}return F(c).from(Ge),n[s]=c,n},{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var me=wn.reduce(function(n,s){return n[s+"Error"]=ee[s],n},{}),zt=Mt.reduce(function(n,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(n[s+"Error"]=ee[s]),n},{});function ue(){}function kt(n){return n}function At(n,s){return n==null||n===kt?s:function(i){return s(n(i))}}function ft(n,s){return function(){n.apply(this,arguments),s.apply(this,arguments)}}function rn(n,s){return n===ue?s:function(){var i=n.apply(this,arguments);i!==void 0&&(arguments[0]=i);var c=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var h=s.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?ft(c,this.onsuccess):c),u&&(this.onerror=this.onerror?ft(u,this.onerror):u),h!==void 0?h:i}}function Lr(n,s){return n===ue?s:function(){n.apply(this,arguments);var i=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?ft(i,this.onsuccess):i),c&&(this.onerror=this.onerror?ft(c,this.onerror):c)}}function Fr(n,s){return n===ue?s:function(i){var c=n.apply(this,arguments);g(i,c);var u=this.onsuccess,h=this.onerror;return this.onsuccess=null,this.onerror=null,i=s.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?ft(u,this.onsuccess):u),h&&(this.onerror=this.onerror?ft(h,this.onerror):h),c===void 0?i===void 0?void 0:i:g(c,i)}}function nr(n,s){return n===ue?s:function(){return s.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function Et(n,s){return n===ue?s:function(){var i=n.apply(this,arguments);if(i&&typeof i.then=="function"){for(var c=this,u=arguments.length,h=new Array(u);u--;)h[u]=arguments[u];return i.then(function(){return s.apply(c,h)})}return s.apply(this,arguments)}}zt.ModifyError=Ke,zt.DexieError=Ae,zt.BulkError=Me;var it=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function bn(n){it=n}var on={},rr=100,Gt=typeof Promise>"u"?[]:function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,v(n),n];var s=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[s,v(s),n]}(),wn=Gt[0],Mt=Gt[1],Gt=Gt[2],Mt=Mt&&Mt.then,ht=wn&&wn.constructor,Bt=!!Gt,Rt=function(n,s){xn.push([n,s]),bt&&(queueMicrotask(at),bt=!1)},Rn=!0,bt=!0,Kt=[],Tn=[],or=kt,Dt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ue,pgp:!1,env:{},finalize:ue},re=Dt,xn=[],qt=0,In=[];function X(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=re;if(typeof n!="function"){if(n!==on)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qe(this,this._value))}this._state=null,this._value=null,++s.ref,function i(c,u){try{u(function(h){if(c._state===null){if(h===c)throw new TypeError("A promise cannot be resolved with itself.");var m=c._lib&&Je();h&&typeof h.then=="function"?i(c,function(y,x){h instanceof X?h._then(y,x):h.then(y,x)}):(c._state=!0,c._value=h,tt(c)),m&&wt()}},Qe.bind(null,c))}catch(h){Qe(c,h)}}(this,n)}var sr={get:function(){var n=re,s=Yt;function i(c,u){var h=this,m=!n.global&&(n!==re||s!==Yt),y=m&&!an(),x=new X(function(j,C){Ot(h,new qe(Zs(c,n,m,y),Zs(u,n,m,y),j,C,n))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return i.prototype=on,i},set:function(n){L(this,"then",n&&n.prototype===on?sr:{get:function(){return n},set:sr.set})}};function qe(n,s,i,c,u){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof s=="function"?s:null,this.resolve=i,this.reject=c,this.psd=u}function Qe(n,s){var i,c;Tn.push(s),n._state===null&&(i=n._lib&&Je(),s=or(s),n._state=!1,n._value=s,c=n,Kt.some(function(u){return u._value===c._value})||Kt.push(c),tt(n),i&&wt())}function tt(n){var s=n._listeners;n._listeners=[];for(var i=0,c=s.length;i<c;++i)Ot(n,s[i]);var u=n._PSD;--u.ref||u.finalize(),qt===0&&(++qt,Rt(function(){--qt==0&&Te()},[]))}function Ot(n,s){if(n._state!==null){var i=n._state?s.onFulfilled:s.onRejected;if(i===null)return(n._state?s.resolve:s.reject)(n._value);++s.psd.ref,++qt,Rt(pt,[i,n,s])}else n._listeners.push(s)}function pt(n,s,i){try{var c,u=s._value;!s._state&&Tn.length&&(Tn=[]),c=it&&s._consoleTask?s._consoleTask.run(function(){return n(u)}):n(u),s._state||Tn.indexOf(u)!==-1||function(h){for(var m=Kt.length;m;)if(Kt[--m]._value===h._value)return Kt.splice(m,1)}(s),i.resolve(c)}catch(h){i.reject(h)}finally{--qt==0&&Te(),--i.psd.ref||i.psd.finalize()}}function at(){jn(Dt,function(){Je()&&wt()})}function Je(){var n=Rn;return bt=Rn=!1,n}function wt(){var n,s,i;do for(;0<xn.length;)for(n=xn,xn=[],i=n.length,s=0;s<i;++s){var c=n[s];c[0].apply(null,c[1])}while(0<xn.length);bt=Rn=!0}function Te(){var n=Kt;Kt=[],n.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var s=In.slice(0),i=s.length;i;)s[--i]()}function xt(n){return new X(on,!1,n)}function ge(n,s){var i=re;return function(){var c=Je(),u=re;try{return cn(i,!0),n.apply(this,arguments)}catch(h){s&&s(h)}finally{cn(u,!1),c&&wt()}}}R(X.prototype,{then:sr,_then:function(n,s){Ot(this,new qe(null,null,n,s,re))},catch:function(n){if(arguments.length===1)return this.then(null,n);var s=n,i=arguments[1];return typeof s=="function"?this.then(null,function(c){return(c instanceof s?i:xt)(c)}):this.then(null,function(c){return(c&&c.name===s?i:xt)(c)})},finally:function(n){return this.then(function(s){return X.resolve(n()).then(function(){return s})},function(s){return X.resolve(n()).then(function(){return xt(s)})})},timeout:function(n,s){var i=this;return n<1/0?new X(function(c,u){var h=setTimeout(function(){return u(new ee.Timeout(s))},n);i.then(c,u).finally(clearTimeout.bind(null,h))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(X.prototype,Symbol.toStringTag,"Dexie.Promise"),Dt.env=Js(),R(X,{all:function(){var n=pe.apply(null,arguments).map(zr);return new X(function(s,i){n.length===0&&s([]);var c=n.length;n.forEach(function(u,h){return X.resolve(u).then(function(m){n[h]=m,--c||s(n)},i)})})},resolve:function(n){return n instanceof X?n:n&&typeof n.then=="function"?new X(function(s,i){n.then(s,i)}):new X(on,!0,n)},reject:xt,race:function(){var n=pe.apply(null,arguments).map(zr);return new X(function(s,i){n.map(function(c){return X.resolve(c).then(s,i)})})},PSD:{get:function(){return re},set:function(n){return re=n}},totalEchoes:{get:function(){return Yt}},newPSD:sn,usePSD:jn,scheduler:{get:function(){return Rt},set:function(n){Rt=n}},rejectionMapper:{get:function(){return or},set:function(n){or=n}},follow:function(n,s){return new X(function(i,c){return sn(function(u,h){var m=re;m.unhandleds=[],m.onunhandled=h,m.finalize=ft(function(){var y,x=this;y=function(){x.unhandleds.length===0?u():h(x.unhandleds[0])},In.push(function j(){y(),In.splice(In.indexOf(j),1)}),++qt,Rt(function(){--qt==0&&Te()},[])},m.finalize),n()},s,i,c)})}}),ht&&(ht.allSettled&&L(X,"allSettled",function(){var n=pe.apply(null,arguments).map(zr);return new X(function(s){n.length===0&&s([]);var i=n.length,c=new Array(i);n.forEach(function(u,h){return X.resolve(u).then(function(m){return c[h]={status:"fulfilled",value:m}},function(m){return c[h]={status:"rejected",reason:m}}).then(function(){return--i||s(c)})})})}),ht.any&&typeof AggregateError<"u"&&L(X,"any",function(){var n=pe.apply(null,arguments).map(zr);return new X(function(s,i){n.length===0&&i(new AggregateError([]));var c=n.length,u=new Array(c);n.forEach(function(h,m){return X.resolve(h).then(function(y){return s(y)},function(y){u[m]=y,--c||i(new AggregateError(u))})})})}),ht.withResolvers&&(X.withResolvers=ht.withResolvers));var Ce={awaits:0,echoes:0,id:0},Sn=0,Wt=[],St=0,Yt=0,ir=0;function sn(n,s,i,c){var u=re,h=Object.create(u);return h.parent=u,h.ref=0,h.global=!1,h.id=++ir,Dt.env,h.env=Bt?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},s&&g(h,s),++u.ref,h.finalize=function(){--this.parent.ref||this.parent.finalize()},c=jn(h,n,i,c),h.ref===0&&h.finalize(),c}function Ln(){return Ce.id||(Ce.id=++Sn),++Ce.awaits,Ce.echoes+=rr,Ce.id}function an(){return!!Ce.awaits&&(--Ce.awaits==0&&(Ce.id=0),Ce.echoes=Ce.awaits*rr,!0)}function zr(n){return Ce.echoes&&n&&n.constructor===ht?(Ln(),n.then(function(s){return an(),s},function(s){return an(),Ie(s)})):n}function kc(){var n=Wt[Wt.length-1];Wt.pop(),cn(n,!1)}function cn(n,s){var i,c=re;(s?!Ce.echoes||St++&&n===re:!St||--St&&n===re)||queueMicrotask(s?(function(u){++Yt,Ce.echoes&&--Ce.echoes!=0||(Ce.echoes=Ce.awaits=Ce.id=0),Wt.push(re),cn(u,!0)}).bind(null,n):kc),n!==re&&(re=n,c===Dt&&(Dt.env=Js()),Bt&&(i=Dt.env.Promise,s=n.env,(c.global||n.global)&&(Object.defineProperty(l,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject,s.allSettled&&(i.allSettled=s.allSettled),s.any&&(i.any=s.any))))}function Js(){var n=l.Promise;return Bt?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function jn(n,s,i,c,u){var h=re;try{return cn(n,!0),s(i,c,u)}finally{cn(h,!1)}}function Zs(n,s,i,c){return typeof n!="function"?n:function(){var u=re;i&&Ln(),cn(s,!0);try{return n.apply(this,arguments)}finally{cn(u,!1),c&&queueMicrotask(an)}}}function Po(n){Promise===ht&&Ce.echoes===0?St===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+Mt).indexOf("[native code]")===-1&&(Ln=an=ue);var Ie=X.reject,Nn="￿",Qt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ei="String expected.",Fn=[],Br="__dbnames",Ao="readonly",Ro="readwrite";function _n(n,s){return n?s?function(){return n.apply(this,arguments)&&s.apply(this,arguments)}:n:s}var ti={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Kr(n){return typeof n!="string"||/\./.test(n)?function(s){return s}:function(s){return s[n]===void 0&&n in s&&delete(s=je(s))[n],s}}function ni(){throw ee.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ve(n,s){try{var i=ri(n),c=ri(s);if(i!==c)return i==="Array"?1:c==="Array"?-1:i==="binary"?1:c==="binary"?-1:i==="string"?1:c==="string"?-1:i==="Date"?1:c!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return s<n?1:n<s?-1:0;case"binary":return function(u,h){for(var m=u.length,y=h.length,x=m<y?m:y,j=0;j<x;++j)if(u[j]!==h[j])return u[j]<h[j]?-1:1;return m===y?0:m<y?-1:1}(oi(n),oi(s));case"Array":return function(u,h){for(var m=u.length,y=h.length,x=m<y?m:y,j=0;j<x;++j){var C=ve(u[j],h[j]);if(C!==0)return C}return m===y?0:m<y?-1:1}(n,s)}}catch{}return NaN}function ri(n){var s=typeof n;return s!="object"?s:ArrayBuffer.isView(n)?"binary":(n=dt(n),n==="ArrayBuffer"?"binary":n)}function oi(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function qr(n,s,i){var c=n.schema.yProps;return c?(s&&0<i.numFailures&&(s=s.filter(function(u,h){return!i.failures[h]})),Promise.all(c.map(function(u){return u=u.updatesTable,s?n.db.table(u).where("k").anyOf(s).delete():n.db.table(u).clear()})).then(function(){return i})):i}var si=(ke.prototype._trans=function(n,s,i){var c=this._tx||re.trans,u=this.name,h=it&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function m(j,C,b){if(!b.schema[u])throw new ee.NotFound("Table "+u+" not part of transaction");return s(b.idbtrans,b)}var y=Je();try{var x=c&&c.db._novip===this.db._novip?c===re.trans?c._promise(n,m,i):sn(function(){return c._promise(n,m,i)},{trans:c,transless:re.transless||re}):function j(C,b,O,S){if(C.idbdb&&(C._state.openComplete||re.letThrough||C._vip)){var _=C._createTransaction(b,O,C._dbSchema);try{_.create(),C._state.PR1398_maxLoop=3}catch(D){return D.name===Ft.InvalidState&&C.isOpen()&&0<--C._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),C.close({disableAutoOpen:!1}),C.open().then(function(){return j(C,b,O,S)})):Ie(D)}return _._promise(b,function(D,E){return sn(function(){return re.trans=_,S(D,E,_)})}).then(function(D){if(b==="readwrite")try{_.idbtrans.commit()}catch{}return b==="readonly"?D:_._completion.then(function(){return D})})}if(C._state.openComplete)return Ie(new ee.DatabaseClosed(C._state.dbOpenError));if(!C._state.isBeingOpened){if(!C._state.autoOpen)return Ie(new ee.DatabaseClosed);C.open().catch(ue)}return C._state.dbReadyPromise.then(function(){return j(C,b,O,S)})}(this.db,n,[this.name],m);return h&&(x._consoleTask=h,x=x.catch(function(j){return console.trace(j),Ie(j)})),x}finally{y&&wt()}},ke.prototype.get=function(n,s){var i=this;return n&&n.constructor===Object?this.where(n).first(s):n==null?Ie(new ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return i.core.get({trans:c,key:n}).then(function(u){return i.hook.reading.fire(u)})}).then(s)},ke.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(p(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var s=f(n);if(s.length===1)return this.where(s[0]).equals(n[s[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&s.every(function(j){return 0<=y.keyPath.indexOf(j)})){for(var x=0;x<s.length;++x)if(s.indexOf(y.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(y,x){return y.keyPath.length-x.keyPath.length})[0];if(i&&this.db._maxKey!==Nn){var h=i.keyPath.slice(0,s.length);return this.where(h).equals(h.map(function(x){return n[x]}))}!i&&it&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(s.join("+"),"]"));var c=this.schema.idxByName;function u(y,x){return ve(y,x)===0}var m=s.reduce(function(b,x){var j=b[0],C=b[1],b=c[x],O=n[x];return[j||b,j||!b?_n(C,b&&b.multi?function(S){return S=J(S,x),p(S)&&S.some(function(_){return u(O,_)})}:function(S){return u(O,J(S,x))}):C]},[null,null]),h=m[0],m=m[1];return h?this.where(h.name).equals(n[h.keyPath]).filter(m):i?this.filter(m):this.where(s).equals("")},ke.prototype.filter=function(n){return this.toCollection().and(n)},ke.prototype.count=function(n){return this.toCollection().count(n)},ke.prototype.offset=function(n){return this.toCollection().offset(n)},ke.prototype.limit=function(n){return this.toCollection().limit(n)},ke.prototype.each=function(n){return this.toCollection().each(n)},ke.prototype.toArray=function(n){return this.toCollection().toArray(n)},ke.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ke.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,p(n)?"[".concat(n.join("+"),"]"):n))},ke.prototype.reverse=function(){return this.toCollection().reverse()},ke.prototype.mapToClass=function(n){var s,i=this.db,c=this.name;function u(){return s!==null&&s.apply(this,arguments)||this}(this.schema.mappedClass=n).prototype instanceof ni&&(function(x,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function C(){this.constructor=x}r(x,j),x.prototype=j===null?Object.create(j):(C.prototype=j.prototype,new C)}(u,s=n),Object.defineProperty(u.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),u.prototype.table=function(){return c},n=u);for(var h=new Set,m=n.prototype;m;m=v(m))Object.getOwnPropertyNames(m).forEach(function(x){return h.add(x)});function y(x){if(!x)return x;var j,C=Object.create(n.prototype);for(j in x)if(!h.has(j))try{C[j]=x[j]}catch{}return C}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=y,this.hook("reading",y),n},ke.prototype.defineClass=function(){return this.mapToClass(function(n){g(this,n)})},ke.prototype.add=function(n,s){var i=this,c=this.schema.primKey,u=c.auto,h=c.keyPath,m=n;return h&&u&&(m=Kr(h)(n)),this._trans("readwrite",function(y){return i.core.mutate({trans:y,type:"add",keys:s!=null?[s]:null,values:[m]})}).then(function(y){return y.numFailures?X.reject(y.failures[0]):y.lastResult}).then(function(y){if(h)try{Z(n,h,y)}catch{}return y})},ke.prototype.update=function(n,s){return typeof n!="object"||p(n)?this.where(":id").equals(n).modify(s):(n=J(n,this.schema.primKey.keyPath),n===void 0?Ie(new ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(s))},ke.prototype.put=function(n,s){var i=this,c=this.schema.primKey,u=c.auto,h=c.keyPath,m=n;return h&&u&&(m=Kr(h)(n)),this._trans("readwrite",function(y){return i.core.mutate({trans:y,type:"put",values:[m],keys:s!=null?[s]:null})}).then(function(y){return y.numFailures?X.reject(y.failures[0]):y.lastResult}).then(function(y){if(h)try{Z(n,h,y)}catch{}return y})},ke.prototype.delete=function(n){var s=this;return this._trans("readwrite",function(i){return s.core.mutate({trans:i,type:"delete",keys:[n]}).then(function(c){return qr(s,[n],c)}).then(function(c){return c.numFailures?X.reject(c.failures[0]):void 0})})},ke.prototype.clear=function(){var n=this;return this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"deleteRange",range:ti}).then(function(i){return qr(n,null,i)})}).then(function(s){return s.numFailures?X.reject(s.failures[0]):void 0})},ke.prototype.bulkGet=function(n){var s=this;return this._trans("readonly",function(i){return s.core.getMany({keys:n,trans:i}).then(function(c){return c.map(function(u){return s.hook.reading.fire(u)})})})},ke.prototype.bulkAdd=function(n,s,i){var c=this,u=Array.isArray(s)?s:void 0,h=(i=i||(u?void 0:s))?i.allKeys:void 0;return this._trans("readwrite",function(m){var j=c.schema.primKey,y=j.auto,j=j.keyPath;if(j&&u)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==n.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,j=j&&y?n.map(Kr(j)):n;return c.core.mutate({trans:m,type:"add",keys:u,values:j,wantResults:h}).then(function(_){var b=_.numFailures,O=_.results,S=_.lastResult,_=_.failures;if(b===0)return h?O:S;throw new Me("".concat(c.name,".bulkAdd(): ").concat(b," of ").concat(x," operations failed"),_)})})},ke.prototype.bulkPut=function(n,s,i){var c=this,u=Array.isArray(s)?s:void 0,h=(i=i||(u?void 0:s))?i.allKeys:void 0;return this._trans("readwrite",function(m){var j=c.schema.primKey,y=j.auto,j=j.keyPath;if(j&&u)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==n.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,j=j&&y?n.map(Kr(j)):n;return c.core.mutate({trans:m,type:"put",keys:u,values:j,wantResults:h}).then(function(_){var b=_.numFailures,O=_.results,S=_.lastResult,_=_.failures;if(b===0)return h?O:S;throw new Me("".concat(c.name,".bulkPut(): ").concat(b," of ").concat(x," operations failed"),_)})})},ke.prototype.bulkUpdate=function(n){var s=this,i=this.core,c=n.map(function(m){return m.key}),u=n.map(function(m){return m.changes}),h=[];return this._trans("readwrite",function(m){return i.getMany({trans:m,keys:c,cache:"clone"}).then(function(y){var x=[],j=[];n.forEach(function(b,O){var S=b.key,_=b.changes,D=y[O];if(D){for(var E=0,M=Object.keys(_);E<M.length;E++){var A=M[E],T=_[A];if(A===s.schema.primKey.keyPath){if(ve(T,S)!==0)throw new ee.Constraint("Cannot update primary key in bulkUpdate()")}else Z(D,A,T)}h.push(O),x.push(S),j.push(D)}});var C=x.length;return i.mutate({trans:m,type:"put",keys:x,values:j,updates:{keys:c,changeSpecs:u}}).then(function(b){var O=b.numFailures,S=b.failures;if(O===0)return C;for(var _=0,D=Object.keys(S);_<D.length;_++){var E,M=D[_],A=h[Number(M)];A!=null&&(E=S[M],delete S[M],S[A]=E)}throw new Me("".concat(s.name,".bulkUpdate(): ").concat(O," of ").concat(C," operations failed"),S)})})})},ke.prototype.bulkDelete=function(n){var s=this,i=n.length;return this._trans("readwrite",function(c){return s.core.mutate({trans:c,type:"delete",keys:n}).then(function(u){return qr(s,n,u)})}).then(function(m){var u=m.numFailures,h=m.lastResult,m=m.failures;if(u===0)return h;throw new Me("".concat(s.name,".bulkDelete(): ").concat(u," of ").concat(i," operations failed"),m)})},ke);function ke(){}function ar(n){function s(m,y){if(y){for(var x=arguments.length,j=new Array(x-1);--x;)j[x-1]=arguments[x];return i[m].subscribe.apply(null,j),n}if(typeof m=="string")return i[m]}var i={};s.addEventType=h;for(var c=1,u=arguments.length;c<u;++c)h(arguments[c]);return s;function h(m,y,x){if(typeof m!="object"){var j;y=y||nr;var C={subscribers:[],fire:x=x||ue,subscribe:function(b){C.subscribers.indexOf(b)===-1&&(C.subscribers.push(b),C.fire=y(C.fire,b))},unsubscribe:function(b){C.subscribers=C.subscribers.filter(function(O){return O!==b}),C.fire=C.subscribers.reduce(y,x)}};return i[m]=s[m]=C}f(j=m).forEach(function(b){var O=j[b];if(p(O))h(b,j[b][0],j[b][1]);else{if(O!=="asap")throw new ee.InvalidArgument("Invalid event config");var S=h(b,kt,function(){for(var _=arguments.length,D=new Array(_);_--;)D[_]=arguments[_];S.subscribers.forEach(function(E){V(function(){E.apply(null,D)})})})}})}}function cr(n,s){return F(s).from({prototype:n}),s}function zn(n,s){return!(n.filter||n.algorithm||n.or)&&(s?n.justLimit:!n.replayFilter)}function To(n,s){n.filter=_n(n.filter,s)}function Io(n,s,i){var c=n.replayFilter;n.replayFilter=c?function(){return _n(c(),s())}:s,n.justLimit=i&&!c}function Wr(n,s){if(n.isPrimKey)return s.primaryKey;var i=s.getIndexByKeyPath(n.index);if(!i)throw new ee.Schema("KeyPath "+n.index+" on object store "+s.name+" is not indexed");return i}function ii(n,s,i){var c=Wr(n,s.schema);return s.openCursor({trans:i,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:c,range:n.range}})}function Yr(n,s,i,c){var u=n.replayFilter?_n(n.filter,n.replayFilter()):n.filter;if(n.or){var h={},m=function(y,x,j){var C,b;u&&!u(x,j,function(O){return x.stop(O)},function(O){return x.fail(O)})||((b=""+(C=x.primaryKey))=="[object ArrayBuffer]"&&(b=""+new Uint8Array(C)),N(h,b)||(h[b]=!0,s(y,x,j)))};return Promise.all([n.or._iterate(m,i),ai(ii(n,c,i),n.algorithm,m,!n.keysOnly&&n.valueMapper)])}return ai(ii(n,c,i),_n(n.algorithm,u),s,!n.keysOnly&&n.valueMapper)}function ai(n,s,i,c){var u=ge(c?function(h,m,y){return i(c(h),m,y)}:i);return n.then(function(h){if(h)return h.start(function(){var m=function(){return h.continue()};s&&!s(h,function(y){return m=y},function(y){h.stop(y),m=ue},function(y){h.fail(y),m=ue})||u(h.value,h,function(y){return m=y}),m()})})}var lr=(ci.prototype.execute=function(n){var s=this["@@propmod"];if(s.add!==void 0){var i=s.add;if(p(i))return a(a([],p(n)?n:[],!0),i).sort();if(typeof i=="number")return(Number(n)||0)+i;if(typeof i=="bigint")try{return BigInt(n)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(s.remove!==void 0){var c=s.remove;if(p(c))return p(n)?n.filter(function(u){return!c.includes(u)}).sort():[];if(typeof c=="number")return Number(n)-c;if(typeof c=="bigint")try{return BigInt(n)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return i=(i=s.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof n=="string"&&n.startsWith(i)?s.replacePrefix[1]+n.substring(i.length):n},ci);function ci(n){this["@@propmod"]=n}var Ec=(xe.prototype._read=function(n,s){var i=this._ctx;return i.error?i.table._trans(null,Ie.bind(null,i.error)):i.table._trans("readonly",n).then(s)},xe.prototype._write=function(n){var s=this._ctx;return s.error?s.table._trans(null,Ie.bind(null,s.error)):s.table._trans("readwrite",n,"locked")},xe.prototype._addAlgorithm=function(n){var s=this._ctx;s.algorithm=_n(s.algorithm,n)},xe.prototype._iterate=function(n,s){return Yr(this._ctx,n,s,this._ctx.table.core)},xe.prototype.clone=function(n){var s=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return n&&g(i,n),s._ctx=i,s},xe.prototype.raw=function(){return this._ctx.valueMapper=null,this},xe.prototype.each=function(n){var s=this._ctx;return this._read(function(i){return Yr(s,n,i,s.table.core)})},xe.prototype.count=function(n){var s=this;return this._read(function(i){var c=s._ctx,u=c.table.core;if(zn(c,!0))return u.count({trans:i,query:{index:Wr(c,u.schema),range:c.range}}).then(function(m){return Math.min(m,c.limit)});var h=0;return Yr(c,function(){return++h,!1},i,u).then(function(){return h})}).then(n)},xe.prototype.sortBy=function(n,s){var i=n.split(".").reverse(),c=i[0],u=i.length-1;function h(x,j){return j?h(x[i[j]],j-1):x[c]}var m=this._ctx.dir==="next"?1:-1;function y(x,j){return ve(h(x,u),h(j,u))*m}return this.toArray(function(x){return x.sort(y)}).then(s)},xe.prototype.toArray=function(n){var s=this;return this._read(function(i){var c=s._ctx;if(c.dir==="next"&&zn(c,!0)&&0<c.limit){var u=c.valueMapper,h=Wr(c,c.table.core.schema);return c.table.core.query({trans:i,limit:c.limit,values:!0,query:{index:h,range:c.range}}).then(function(y){return y=y.result,u?y.map(u):y})}var m=[];return Yr(c,function(y){return m.push(y)},i,c.table.core).then(function(){return m})},n)},xe.prototype.offset=function(n){var s=this._ctx;return n<=0||(s.offset+=n,zn(s)?Io(s,function(){var i=n;return function(c,u){return i===0||(i===1?--i:u(function(){c.advance(i),i=0}),!1)}}):Io(s,function(){var i=n;return function(){return--i<0}})),this},xe.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Io(this._ctx,function(){var s=n;return function(i,c,u){return--s<=0&&c(u),0<=s}},!0),this},xe.prototype.until=function(n,s){return To(this._ctx,function(i,c,u){return!n(i.value)||(c(u),s)}),this},xe.prototype.first=function(n){return this.limit(1).toArray(function(s){return s[0]}).then(n)},xe.prototype.last=function(n){return this.reverse().first(n)},xe.prototype.filter=function(n){var s;return To(this._ctx,function(i){return n(i.value)}),(s=this._ctx).isMatch=_n(s.isMatch,n),this},xe.prototype.and=function(n){return this.filter(n)},xe.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},xe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},xe.prototype.desc=function(){return this.reverse()},xe.prototype.eachKey=function(n){var s=this._ctx;return s.keysOnly=!s.isMatch,this.each(function(i,c){n(c.key,c)})},xe.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},xe.prototype.eachPrimaryKey=function(n){var s=this._ctx;return s.keysOnly=!s.isMatch,this.each(function(i,c){n(c.primaryKey,c)})},xe.prototype.keys=function(n){var s=this._ctx;s.keysOnly=!s.isMatch;var i=[];return this.each(function(c,u){i.push(u.key)}).then(function(){return i}).then(n)},xe.prototype.primaryKeys=function(n){var s=this._ctx;if(s.dir==="next"&&zn(s,!0)&&0<s.limit)return this._read(function(c){var u=Wr(s,s.table.core.schema);return s.table.core.query({trans:c,values:!1,limit:s.limit,query:{index:u,range:s.range}})}).then(function(c){return c.result}).then(n);s.keysOnly=!s.isMatch;var i=[];return this.each(function(c,u){i.push(u.primaryKey)}).then(function(){return i}).then(n)},xe.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},xe.prototype.firstKey=function(n){return this.limit(1).keys(function(s){return s[0]}).then(n)},xe.prototype.lastKey=function(n){return this.reverse().firstKey(n)},xe.prototype.distinct=function(){var n=this._ctx,n=n.index&&n.table.schema.idxByName[n.index];if(!n||!n.multi)return this;var s={};return To(this._ctx,function(u){var c=u.primaryKey.toString(),u=N(s,c);return s[c]=!0,!u}),this},xe.prototype.modify=function(n){var s=this,i=this._ctx;return this._write(function(c){var u,h,m;m=typeof n=="function"?n:(u=f(n),h=u.length,function(M){for(var A=!1,T=0;T<h;++T){var I=u[T],K=n[I],$=J(M,I);K instanceof lr?(Z(M,I,K.execute($)),A=!0):$!==K&&(Z(M,I,K),A=!0)}return A});var y=i.table.core,b=y.schema.primaryKey,x=b.outbound,j=b.extractKey,C=200,b=s.db._options.modifyChunkSize;b&&(C=typeof b=="object"?b[y.name]||b["*"]||200:b);function O(M,I){var T=I.failures,I=I.numFailures;_+=M-I;for(var K=0,$=f(T);K<$.length;K++){var q=$[K];S.push(T[q])}}var S=[],_=0,D=[],E=n===li;return s.clone().primaryKeys().then(function(M){function A(I){var K=Math.min(C,M.length-I),$=M.slice(I,I+K);return(E?Promise.resolve([]):y.getMany({trans:c,keys:$,cache:"immutable"})).then(function(q){var W=[],G=[],H=x?[]:null,Q=E?$:[];if(!E)for(var ce=0;ce<K;++ce){var we=q[ce],ae={value:je(we),primKey:M[I+ce]};m.call(ae,ae.value,ae)!==!1&&(ae.value==null?Q.push(M[I+ce]):x||ve(j(we),j(ae.value))===0?(G.push(ae.value),x&&H.push(M[I+ce])):(Q.push(M[I+ce]),W.push(ae.value)))}return Promise.resolve(0<W.length&&y.mutate({trans:c,type:"add",values:W}).then(function(Re){for(var ie in Re.failures)Q.splice(parseInt(ie),1);O(W.length,Re)})).then(function(){return(0<G.length||T&&typeof n=="object")&&y.mutate({trans:c,type:"put",keys:H,values:G,criteria:T,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<I}).then(function(Re){return O(G.length,Re)})}).then(function(){return(0<Q.length||T&&E)&&y.mutate({trans:c,type:"delete",keys:Q,criteria:T,isAdditionalChunk:0<I}).then(function(Re){return qr(i.table,Q,Re)}).then(function(Re){return O(Q.length,Re)})}).then(function(){return M.length>I+K&&A(I+C)})})}var T=zn(i)&&i.limit===1/0&&(typeof n!="function"||E)&&{index:i.index,range:i.range};return A(0).then(function(){if(0<S.length)throw new Ke("Error modifying one or more objects",S,_,D);return M.length})})})},xe.prototype.delete=function(){var n=this._ctx,s=n.range;return!zn(n)||n.table.schema.yProps||!n.isPrimKey&&s.type!==3?this.modify(li):this._write(function(i){var c=n.table.core.schema.primaryKey,u=s;return n.table.core.count({trans:i,query:{index:c,range:u}}).then(function(h){return n.table.core.mutate({trans:i,type:"deleteRange",range:u}).then(function(x){var y=x.failures,x=x.numFailures;if(x)throw new Ke("Could not delete some values",Object.keys(y).map(function(j){return y[j]}),h-x);return h-x})})})},xe);function xe(){}var li=function(n,s){return s.value=null};function Dc(n,s){return n<s?-1:n===s?0:1}function Oc(n,s){return s<n?-1:n===s?0:1}function jt(n,s,i){return n=n instanceof di?new n.Collection(n):n,n._ctx.error=new(i||TypeError)(s),n}function Bn(n){return new n.Collection(n,function(){return ui("")}).limit(0)}function Vr(n,s,i,c){var u,h,m,y,x,j,C,b=i.length;if(!i.every(function(_){return typeof _=="string"}))return jt(n,ei);function O(_){u=_==="next"?function(E){return E.toUpperCase()}:function(E){return E.toLowerCase()},h=_==="next"?function(E){return E.toLowerCase()}:function(E){return E.toUpperCase()},m=_==="next"?Dc:Oc;var D=i.map(function(E){return{lower:h(E),upper:u(E)}}).sort(function(E,M){return m(E.lower,M.lower)});y=D.map(function(E){return E.upper}),x=D.map(function(E){return E.lower}),C=(j=_)==="next"?"":c}O("next"),n=new n.Collection(n,function(){return ln(y[0],x[b-1]+c)}),n._ondirectionchange=function(_){O(_)};var S=0;return n._addAlgorithm(function(_,D,E){var M=_.key;if(typeof M!="string")return!1;var A=h(M);if(s(A,x,S))return!0;for(var T=null,I=S;I<b;++I){var K=function($,q,W,G,H,Q){for(var ce=Math.min($.length,G.length),we=-1,ae=0;ae<ce;++ae){var Re=q[ae];if(Re!==G[ae])return H($[ae],W[ae])<0?$.substr(0,ae)+W[ae]+W.substr(ae+1):H($[ae],G[ae])<0?$.substr(0,ae)+G[ae]+W.substr(ae+1):0<=we?$.substr(0,we)+q[we]+W.substr(we+1):null;H($[ae],Re)<0&&(we=ae)}return ce<G.length&&Q==="next"?$+W.substr($.length):ce<$.length&&Q==="prev"?$.substr(0,W.length):we<0?null:$.substr(0,we)+G[we]+W.substr(we+1)}(M,A,y[I],x[I],m,j);K===null&&T===null?S=I+1:(T===null||0<m(T,K))&&(T=K)}return D(T!==null?function(){_.continue(T+C)}:E),!1}),n}function ln(n,s,i,c){return{type:2,lower:n,upper:s,lowerOpen:i,upperOpen:c}}function ui(n){return{type:1,lower:n,upper:n}}var di=(Object.defineProperty($e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$e.prototype.between=function(n,s,i,c){i=i!==!1,c=c===!0;try{return 0<this._cmp(n,s)||this._cmp(n,s)===0&&(i||c)&&(!i||!c)?Bn(this):new this.Collection(this,function(){return ln(n,s,!i,!c)})}catch{return jt(this,Qt)}},$e.prototype.equals=function(n){return n==null?jt(this,Qt):new this.Collection(this,function(){return ui(n)})},$e.prototype.above=function(n){return n==null?jt(this,Qt):new this.Collection(this,function(){return ln(n,void 0,!0)})},$e.prototype.aboveOrEqual=function(n){return n==null?jt(this,Qt):new this.Collection(this,function(){return ln(n,void 0,!1)})},$e.prototype.below=function(n){return n==null?jt(this,Qt):new this.Collection(this,function(){return ln(void 0,n,!1,!0)})},$e.prototype.belowOrEqual=function(n){return n==null?jt(this,Qt):new this.Collection(this,function(){return ln(void 0,n)})},$e.prototype.startsWith=function(n){return typeof n!="string"?jt(this,ei):this.between(n,n+Nn,!0,!0)},$e.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Vr(this,function(s,i){return s.indexOf(i[0])===0},[n],Nn)},$e.prototype.equalsIgnoreCase=function(n){return Vr(this,function(s,i){return s===i[0]},[n],"")},$e.prototype.anyOfIgnoreCase=function(){var n=pe.apply(Oe,arguments);return n.length===0?Bn(this):Vr(this,function(s,i){return i.indexOf(s)!==-1},n,"")},$e.prototype.startsWithAnyOfIgnoreCase=function(){var n=pe.apply(Oe,arguments);return n.length===0?Bn(this):Vr(this,function(s,i){return i.some(function(c){return s.indexOf(c)===0})},n,Nn)},$e.prototype.anyOf=function(){var n=this,s=pe.apply(Oe,arguments),i=this._cmp;try{s.sort(i)}catch{return jt(this,Qt)}if(s.length===0)return Bn(this);var c=new this.Collection(this,function(){return ln(s[0],s[s.length-1])});c._ondirectionchange=function(h){i=h==="next"?n._ascending:n._descending,s.sort(i)};var u=0;return c._addAlgorithm(function(h,m,y){for(var x=h.key;0<i(x,s[u]);)if(++u===s.length)return m(y),!1;return i(x,s[u])===0||(m(function(){h.continue(s[u])}),!1)}),c},$e.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$e.prototype.noneOf=function(){var n=pe.apply(Oe,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return jt(this,Qt)}var s=n.reduce(function(i,c){return i?i.concat([[i[i.length-1][1],c]]):[[-1/0,c]]},null);return s.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(s,{includeLowers:!1,includeUppers:!1})},$e.prototype.inAnyRange=function(M,s){var i=this,c=this._cmp,u=this._ascending,h=this._descending,m=this._min,y=this._max;if(M.length===0)return Bn(this);if(!M.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&u(A[0],A[1])<=0}))return jt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);var x=!s||s.includeLowers!==!1,j=s&&s.includeUppers===!0,C,b=u;function O(A,T){return b(A[0],T[0])}try{(C=M.reduce(function(A,T){for(var I=0,K=A.length;I<K;++I){var $=A[I];if(c(T[0],$[1])<0&&0<c(T[1],$[0])){$[0]=m($[0],T[0]),$[1]=y($[1],T[1]);break}}return I===K&&A.push(T),A},[])).sort(O)}catch{return jt(this,Qt)}var S=0,_=j?function(A){return 0<u(A,C[S][1])}:function(A){return 0<=u(A,C[S][1])},D=x?function(A){return 0<h(A,C[S][0])}:function(A){return 0<=h(A,C[S][0])},E=_,M=new this.Collection(this,function(){return ln(C[0][0],C[C.length-1][1],!x,!j)});return M._ondirectionchange=function(A){b=A==="next"?(E=_,u):(E=D,h),C.sort(O)},M._addAlgorithm(function(A,T,I){for(var K,$=A.key;E($);)if(++S===C.length)return T(I),!1;return!_(K=$)&&!D(K)||(i._cmp($,C[S][1])===0||i._cmp($,C[S][0])===0||T(function(){b===u?A.continue(C[S][0]):A.continue(C[S][1])}),!1)}),M},$e.prototype.startsWithAnyOf=function(){var n=pe.apply(Oe,arguments);return n.every(function(s){return typeof s=="string"})?n.length===0?Bn(this):this.inAnyRange(n.map(function(s){return[s,s+Nn]})):jt(this,"startsWithAnyOf() only works with strings")},$e);function $e(){}function Vt(n){return ge(function(s){return ur(s),n(s.target.error),!1})}function ur(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var dr="storagemutated",Lo="x-storagemutated-1",un=ar(null,dr),Mc=($t.prototype._lock=function(){return te(!re.global),++this._reculock,this._reculock!==1||re.global||(re.lockOwnerFor=this),this},$t.prototype._unlock=function(){if(te(!re.global),--this._reculock==0)for(re.global||(re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{jn(n[1],n[0])}catch{}}return this},$t.prototype._locked=function(){return this._reculock&&re.lockOwnerFor!==this},$t.prototype.create=function(n){var s=this;if(!this.mode)return this;var i=this.db.idbdb,c=this.db._state.dbOpenError;if(te(!this.idbtrans),!n&&!i)switch(c&&c.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(c);case"MissingAPIError":throw new ee.MissingAPI(c.message,c);default:throw new ee.OpenFailed(c)}if(!this.active)throw new ee.TransactionInactive;return te(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ge(function(u){ur(u),s._reject(n.error)}),n.onabort=ge(function(u){ur(u),s.active&&s._reject(new ee.Abort(n.error)),s.active=!1,s.on("abort").fire(u)}),n.oncomplete=ge(function(){s.active=!1,s._resolve(),"mutatedParts"in n&&un.storagemutated.fire(n.mutatedParts)}),this},$t.prototype._promise=function(n,s,i){var c=this;if(n==="readwrite"&&this.mode!=="readwrite")return Ie(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return Ie(new ee.TransactionInactive);if(this._locked())return new X(function(h,m){c._blockedFuncs.push([function(){c._promise(n,s,i).then(h,m)},re])});if(i)return sn(function(){var h=new X(function(m,y){c._lock();var x=s(m,y,c);x&&x.then&&x.then(m,y)});return h.finally(function(){return c._unlock()}),h._lib=!0,h});var u=new X(function(h,m){var y=s(h,m,c);y&&y.then&&y.then(h,m)});return u._lib=!0,u},$t.prototype._root=function(){return this.parent?this.parent._root():this},$t.prototype.waitFor=function(n){var s,i=this._root(),c=X.resolve(n);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return c}):(i._waitingFor=c,i._waitingQueue=[],s=i.idbtrans.objectStore(i.storeNames[0]),function h(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(s.get(-1/0).onsuccess=h)}());var u=i._waitingFor;return new X(function(h,m){c.then(function(y){return i._waitingQueue.push(ge(h.bind(null,y)))},function(y){return i._waitingQueue.push(ge(m.bind(null,y)))}).finally(function(){i._waitingFor===u&&(i._waitingFor=null)})})},$t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))},$t.prototype.table=function(n){var s=this._memoizedTables||(this._memoizedTables={});if(N(s,n))return s[n];var i=this.schema[n];if(!i)throw new ee.NotFound("Table "+n+" not part of transaction");return i=new this.db.Table(n,i,this),i.core=this.db.core.table(n),s[n]=i},$t);function $t(){}function Fo(n,s,i,c,u,h,m,y){return{name:n,keyPath:s,unique:i,multi:c,auto:u,compound:h,src:(i&&!m?"&":"")+(c?"*":"")+(u?"++":"")+fi(s),type:y}}function fi(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function zo(n,s,i){return{name:n,primKey:s,indexes:i,mappedClass:null,idxByName:(c=function(u){return[u.name,u]},i.reduce(function(u,h,m){return m=c(h,m),m&&(u[m[0]]=m[1]),u},{}))};var c}var fr=function(n){try{return n.only([[]]),fr=function(){return[[]]},[[]]}catch{return fr=function(){return Nn},Nn}};function Bo(n){return n==null?function(){}:typeof n=="string"?(s=n).split(".").length===1?function(i){return i[s]}:function(i){return J(i,s)}:function(i){return J(i,n)};var s}function hi(n){return[].slice.call(n)}var Pc=0;function hr(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Ac(n,s,x){function c(E){if(E.type===3)return null;if(E.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=E.lower,_=E.upper,D=E.lowerOpen,E=E.upperOpen;return S===void 0?_===void 0?null:s.upperBound(_,!!E):_===void 0?s.lowerBound(S,!!D):s.bound(S,_,!!D,!!E)}function u(O){var S,_=O.name;return{name:_,schema:O,mutate:function(D){var E=D.trans,M=D.type,A=D.keys,T=D.values,I=D.range;return new Promise(function(K,$){K=ge(K);var q=E.objectStore(_),W=q.keyPath==null,G=M==="put"||M==="add";if(!G&&M!=="delete"&&M!=="deleteRange")throw new Error("Invalid operation type: "+M);var H,Q=(A||T||{length:1}).length;if(A&&T&&A.length!==T.length)throw new Error("Given keys array must have same length as given values array.");if(Q===0)return K({numFailures:0,failures:{},results:[],lastResult:void 0});function ce(ct){++Re,ur(ct)}var we=[],ae=[],Re=0;if(M==="deleteRange"){if(I.type===4)return K({numFailures:Re,failures:ae,results:[],lastResult:void 0});I.type===3?we.push(H=q.clear()):we.push(H=q.delete(c(I)))}else{var W=G?W?[T,A]:[T,null]:[A,null],ie=W[0],rt=W[1];if(G)for(var ot=0;ot<Q;++ot)we.push(H=rt&&rt[ot]!==void 0?q[M](ie[ot],rt[ot]):q[M](ie[ot])),H.onerror=ce;else for(ot=0;ot<Q;++ot)we.push(H=q[M](ie[ot])),H.onerror=ce}function ro(ct){ct=ct.target.result,we.forEach(function(En,os){return En.error!=null&&(ae[os]=En.error)}),K({numFailures:Re,failures:ae,results:M==="delete"?A:we.map(function(En){return En.result}),lastResult:ct})}H.onerror=function(ct){ce(ct),ro(ct)},H.onsuccess=ro})},getMany:function(D){var E=D.trans,M=D.keys;return new Promise(function(A,T){A=ge(A);for(var I,K=E.objectStore(_),$=M.length,q=new Array($),W=0,G=0,H=function(we){we=we.target,q[we._pos]=we.result,++G===W&&A(q)},Q=Vt(T),ce=0;ce<$;++ce)M[ce]!=null&&((I=K.get(M[ce]))._pos=ce,I.onsuccess=H,I.onerror=Q,++W);W===0&&A(q)})},get:function(D){var E=D.trans,M=D.key;return new Promise(function(A,T){A=ge(A);var I=E.objectStore(_).get(M);I.onsuccess=function(K){return A(K.target.result)},I.onerror=Vt(T)})},query:(S=j,function(D){return new Promise(function(E,M){E=ge(E);var A,T,I,W=D.trans,K=D.values,$=D.limit,H=D.query,q=$===1/0?void 0:$,G=H.index,H=H.range,W=W.objectStore(_),G=G.isPrimaryKey?W:W.index(G.name),H=c(H);if($===0)return E({result:[]});S?((q=K?G.getAll(H,q):G.getAllKeys(H,q)).onsuccess=function(Q){return E({result:Q.target.result})},q.onerror=Vt(M)):(A=0,T=!K&&"openKeyCursor"in G?G.openKeyCursor(H):G.openCursor(H),I=[],T.onsuccess=function(Q){var ce=T.result;return ce?(I.push(K?ce.value:ce.primaryKey),++A===$?E({result:I}):void ce.continue()):E({result:I})},T.onerror=Vt(M))})}),openCursor:function(D){var E=D.trans,M=D.values,A=D.query,T=D.reverse,I=D.unique;return new Promise(function(K,$){K=ge(K);var G=A.index,q=A.range,W=E.objectStore(_),W=G.isPrimaryKey?W:W.index(G.name),G=T?I?"prevunique":"prev":I?"nextunique":"next",H=!M&&"openKeyCursor"in W?W.openKeyCursor(c(q),G):W.openCursor(c(q),G);H.onerror=Vt($),H.onsuccess=ge(function(Q){var ce,we,ae,Re,ie=H.result;ie?(ie.___id=++Pc,ie.done=!1,ce=ie.continue.bind(ie),we=(we=ie.continuePrimaryKey)&&we.bind(ie),ae=ie.advance.bind(ie),Re=function(){throw new Error("Cursor not stopped")},ie.trans=E,ie.stop=ie.continue=ie.continuePrimaryKey=ie.advance=function(){throw new Error("Cursor not started")},ie.fail=ge($),ie.next=function(){var rt=this,ot=1;return this.start(function(){return ot--?rt.continue():rt.stop()}).then(function(){return rt})},ie.start=function(rt){function ot(){if(H.result)try{rt()}catch(ct){ie.fail(ct)}else ie.done=!0,ie.start=function(){throw new Error("Cursor behind last entry")},ie.stop()}var ro=new Promise(function(ct,En){ct=ge(ct),H.onerror=Vt(En),ie.fail=En,ie.stop=function(os){ie.stop=ie.continue=ie.continuePrimaryKey=ie.advance=Re,ct(os)}});return H.onsuccess=ge(function(ct){H.onsuccess=ot,ot()}),ie.continue=ce,ie.continuePrimaryKey=we,ie.advance=ae,ot(),ro},K(ie)):K(null)},$)})},count:function(D){var E=D.query,M=D.trans,A=E.index,T=E.range;return new Promise(function(I,K){var $=M.objectStore(_),q=A.isPrimaryKey?$:$.index(A.name),$=c(T),q=$?q.count($):q.count();q.onsuccess=ge(function(W){return I(W.target.result)}),q.onerror=Vt(K)})}}}var h,m,y,C=(m=x,y=hi((h=n).objectStoreNames),{schema:{name:h.name,tables:y.map(function(O){return m.objectStore(O)}).map(function(O){var S=O.keyPath,E=O.autoIncrement,_=p(S),D={},E={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S==null,compound:_,keyPath:S,autoIncrement:E,unique:!0,extractKey:Bo(S)},indexes:hi(O.indexNames).map(function(M){return O.index(M)}).map(function(I){var A=I.name,T=I.unique,K=I.multiEntry,I=I.keyPath,K={name:A,compound:p(I),keyPath:I,unique:T,multiEntry:K,extractKey:Bo(I)};return D[hr(I)]=K}),getIndexByKeyPath:function(M){return D[hr(M)]}};return D[":id"]=E.primaryKey,S!=null&&(D[hr(S)]=E.primaryKey),E})},hasGetAll:0<y.length&&"getAll"in m.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=C.schema,j=C.hasGetAll,C=x.tables.map(u),b={};return C.forEach(function(O){return b[O.name]=O}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(O){if(!b[O])throw new Error("Table '".concat(O,"' not found"));return b[O]},MIN_KEY:-1/0,MAX_KEY:fr(s),schema:x}}function Rc(n,s,i,c){var u=i.IDBKeyRange;return i.indexedDB,{dbcore:(c=Ac(s,u,c),n.dbcore.reduce(function(h,m){return m=m.create,o(o({},h),m(h))},c))}}function $r(n,c){var i=c.db,c=Rc(n._middlewares,i,n._deps,c);n.core=c.dbcore,n.tables.forEach(function(u){var h=u.name;n.core.schema.tables.some(function(m){return m.name===h})&&(u.core=n.core.table(h),n[h]instanceof n.Table&&(n[h].core=u.core))})}function Hr(n,s,i,c){i.forEach(function(u){var h=c[u];s.forEach(function(m){var y=function x(j,C){return z(j,C)||(j=v(j))&&x(j,C)}(m,u);(!y||"value"in y&&y.value===void 0)&&(m===n.Transaction.prototype||m instanceof n.Transaction?L(m,u,{get:function(){return this.table(u)},set:function(x){P(this,u,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):m[u]=new n.Table(u,h))})})}function Ko(n,s){s.forEach(function(i){for(var c in i)i[c]instanceof n.Table&&delete i[c]})}function Tc(n,s){return n._cfg.version-s._cfg.version}function Ic(n,s,i,c){var u=n._dbSchema;i.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=zo("$meta",mi("")[0],[]),n._storeNames.push("$meta"));var h=n._createTransaction("readwrite",n._storeNames,u);h.create(i),h._completion.catch(c);var m=h._reject.bind(h),y=re.transless||re;sn(function(){return re.trans=h,re.transless=y,s!==0?($r(n,i),j=s,((x=h).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(C){return C??j}):X.resolve(j)).then(function(C){return O=C,S=h,_=i,D=[],C=(b=n)._versions,E=b._dbSchema=Xr(0,b.idbdb,_),(C=C.filter(function(M){return M._cfg.version>=O})).length!==0?(C.forEach(function(M){D.push(function(){var A=E,T=M._cfg.dbschema;Gr(b,A,_),Gr(b,T,_),E=b._dbSchema=T;var I=qo(A,T);I.add.forEach(function(G){Wo(_,G[0],G[1].primKey,G[1].indexes)}),I.change.forEach(function(G){if(G.recreate)throw new ee.Upgrade("Not yet support for changing primary key");var H=_.objectStore(G.name);G.add.forEach(function(Q){return Ur(H,Q)}),G.change.forEach(function(Q){H.deleteIndex(Q.name),Ur(H,Q)}),G.del.forEach(function(Q){return H.deleteIndex(Q)})});var K=M._cfg.contentUpgrade;if(K&&M._cfg.version>O){$r(b,_),S._memoizedTables={};var $=oe(T);I.del.forEach(function(G){$[G]=A[G]}),Ko(b,[b.Transaction.prototype]),Hr(b,[b.Transaction.prototype],f($),$),S.schema=$;var q,W=Pe(K);return W&&Ln(),I=X.follow(function(){var G;(q=K(S))&&W&&(G=an.bind(null,null),q.then(G,G))}),q&&typeof q.then=="function"?X.resolve(q):I.then(function(){return q})}}),D.push(function(A){var T,I,K=M._cfg.dbschema;T=K,I=A,[].slice.call(I.db.objectStoreNames).forEach(function($){return T[$]==null&&I.db.deleteObjectStore($)}),Ko(b,[b.Transaction.prototype]),Hr(b,[b.Transaction.prototype],b._storeNames,b._dbSchema),S.schema=b._dbSchema}),D.push(function(A){b.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(b.idbdb.version/10)===M._cfg.version?(b.idbdb.deleteObjectStore("$meta"),delete b._dbSchema.$meta,b._storeNames=b._storeNames.filter(function(T){return T!=="$meta"})):A.objectStore("$meta").put(M._cfg.version,"version"))})}),function M(){return D.length?X.resolve(D.shift()(S.idbtrans)).then(M):X.resolve()}().then(function(){pi(E,_)})):X.resolve();var b,O,S,_,D,E}).catch(m)):(f(u).forEach(function(C){Wo(i,C,u[C].primKey,u[C].indexes)}),$r(n,i),void X.follow(function(){return n.on.populate.fire(h)}).catch(m));var x,j})}function Lc(n,s){pi(n._dbSchema,s),s.db.version%10!=0||s.objectStoreNames.contains("$meta")||s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var i=Xr(0,n.idbdb,s);Gr(n,n._dbSchema,s);for(var c=0,u=qo(i,n._dbSchema).change;c<u.length;c++){var h=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var y=s.objectStore(m.name);m.add.forEach(function(x){it&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(x.src)),Ur(y,x)})}(u[c]);if(typeof h=="object")return h.value}}function qo(n,s){var i,c={del:[],add:[],change:[]};for(i in n)s[i]||c.del.push(i);for(i in s){var u=n[i],h=s[i];if(u){var m={name:i,def:h,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(h.primKey.keyPath||"")||u.primKey.auto!==h.primKey.auto)m.recreate=!0,c.change.push(m);else{var y=u.idxByName,x=h.idxByName,j=void 0;for(j in y)x[j]||m.del.push(j);for(j in x){var C=y[j],b=x[j];C?C.src!==b.src&&m.change.push(b):m.add.push(b)}(0<m.del.length||0<m.add.length||0<m.change.length)&&c.change.push(m)}}else c.add.push([i,h])}return c}function Wo(n,s,i,c){var u=n.db.createObjectStore(s,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return c.forEach(function(h){return Ur(u,h)}),u}function pi(n,s){f(n).forEach(function(i){s.db.objectStoreNames.contains(i)||(it&&console.debug("Dexie: Creating missing table",i),Wo(s,i,n[i].primKey,n[i].indexes))})}function Ur(n,s){n.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function Xr(n,s,i){var c={};return U(s.objectStoreNames,0).forEach(function(u){for(var h=i.objectStore(u),m=Fo(fi(j=h.keyPath),j||"",!0,!1,!!h.autoIncrement,j&&typeof j!="string",!0),y=[],x=0;x<h.indexNames.length;++x){var C=h.index(h.indexNames[x]),j=C.keyPath,C=Fo(C.name,j,!!C.unique,!!C.multiEntry,!1,j&&typeof j!="string",!1);y.push(C)}c[u]=zo(u,m,y)}),c}function Gr(n,s,i){for(var c=i.db.objectStoreNames,u=0;u<c.length;++u){var h=c[u],m=i.objectStore(h);n._hasGetAll="getAll"in m;for(var y=0;y<m.indexNames.length;++y){var x=m.indexNames[y],j=m.index(x).keyPath,C=typeof j=="string"?j:"["+U(j).join("+")+"]";!s[h]||(j=s[h].idxByName[C])&&(j.name=x,delete s[h].idxByName[C],s[h].idxByName[x]=j)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function mi(n){return n.split(",").map(function(s,i){var h=s.split(":"),c=(u=h[1])===null||u===void 0?void 0:u.trim(),u=(s=h[0].trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Fo(u,h||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),p(h),i===0,c)})}var Fc=(Kn.prototype._createTableSchema=zo,Kn.prototype._parseIndexSyntax=mi,Kn.prototype._parseStoresSpec=function(n,s){var i=this;f(n).forEach(function(c){if(n[c]!==null){var u=i._parseIndexSyntax(n[c]),h=u.shift();if(!h)throw new ee.Schema("Invalid schema for table "+c+": "+n[c]);if(h.unique=!0,h.multi)throw new ee.Schema("Primary key cannot be multiEntry*");u.forEach(function(m){if(m.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!m.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")}),u=i._createTableSchema(c,h,u),s[c]=u}})},Kn.prototype.stores=function(i){var s=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,i):i;var i=s._versions,c={},u={};return i.forEach(function(h){g(c,h._cfg.storesSource),u=h._cfg.dbschema={},h._parseStoresSpec(c,u)}),s._dbSchema=u,Ko(s,[s._allTables,s,s.Transaction.prototype]),Hr(s,[s._allTables,s,s.Transaction.prototype,this._cfg.tables],f(u),u),s._storeNames=f(u),this},Kn.prototype.upgrade=function(n){return this._cfg.contentUpgrade=Et(this._cfg.contentUpgrade||ue,n),this},Kn);function Kn(){}function Yo(n,s){var i=n._dbNamesDB;return i||(i=n._dbNamesDB=new Jt(Br,{addons:[],indexedDB:n,IDBKeyRange:s})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Vo(n){return n&&typeof n.databases=="function"}function $o(n){return sn(function(){return re.letThrough=!0,n()})}function Ho(n){return!("from"in n)}var nt=function(n,s){if(!this){var i=new nt;return n&&"d"in n&&g(i,n),i}g(this,arguments.length?{d:1,from:n,to:1<arguments.length?s:n}:{d:0})};function pr(n,s,i){var c=ve(s,i);if(!isNaN(c)){if(0<c)throw RangeError();if(Ho(n))return g(n,{from:s,to:i,d:1});var u=n.l,c=n.r;if(ve(i,n.from)<0)return u?pr(u,s,i):n.l={from:s,to:i,d:1,l:null,r:null},vi(n);if(0<ve(s,n.to))return c?pr(c,s,i):n.r={from:s,to:i,d:1,l:null,r:null},vi(n);ve(s,n.from)<0&&(n.from=s,n.l=null,n.d=c?c.d+1:1),0<ve(i,n.to)&&(n.to=i,n.r=null,n.d=n.l?n.l.d+1:1),i=!n.r,u&&!n.l&&mr(n,u),c&&i&&mr(n,c)}}function mr(n,s){Ho(s)||function i(c,x){var h=x.from,m=x.to,y=x.l,x=x.r;pr(c,h,m),y&&i(c,y),x&&i(c,x)}(n,s)}function gi(n,s){var i=Qr(s),c=i.next();if(c.done)return!1;for(var u=c.value,h=Qr(n),m=h.next(u.from),y=m.value;!c.done&&!m.done;){if(ve(y.from,u.to)<=0&&0<=ve(y.to,u.from))return!0;ve(u.from,y.from)<0?u=(c=i.next(y.from)).value:y=(m=h.next(u.from)).value}return!1}function Qr(n){var s=Ho(n)?null:{s:0,n};return{next:function(i){for(var c=0<arguments.length;s;)switch(s.s){case 0:if(s.s=1,c)for(;s.n.l&&ve(i,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!c||ve(i,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function vi(n){var s,i,c=(((s=n.r)===null||s===void 0?void 0:s.d)||0)-(((i=n.l)===null||i===void 0?void 0:i.d)||0),u=1<c?"r":c<-1?"l":"";u&&(s=u=="r"?"l":"r",i=o({},n),c=n[u],n.from=c.from,n.to=c.to,n[u]=c[u],i[u]=c[s],(n[s]=i).d=yi(i)),n.d=yi(n)}function yi(i){var s=i.r,i=i.l;return(s?i?Math.max(s.d,i.d):s.d:i?i.d:0)+1}function Jr(n,s){return f(s).forEach(function(i){n[i]?mr(n[i],s[i]):n[i]=function c(u){var h,m,y={};for(h in u)N(u,h)&&(m=u[h],y[h]=!m||typeof m!="object"||he.has(m.constructor)?m:c(m));return y}(s[i])}),n}function Uo(n,s){return n.all||s.all||Object.keys(n).some(function(i){return s[i]&&gi(s[i],n[i])})}R(nt.prototype,((Mt={add:function(n){return mr(this,n),this},addKey:function(n){return pr(this,n,n),this},addKeys:function(n){var s=this;return n.forEach(function(i){return pr(s,i,i)}),this},hasKey:function(n){var s=Qr(this).next(n).value;return s&&ve(s.from,n)<=0&&0<=ve(s.to,n)}})[st]=function(){return Qr(this)},Mt));var Cn={},Xo={},Go=!1;function Zr(n){Jr(Xo,n),Go||(Go=!0,setTimeout(function(){Go=!1,Qo(Xo,!(Xo={}))},0))}function Qo(n,s){s===void 0&&(s=!1);var i=new Set;if(n.all)for(var c=0,u=Object.values(Cn);c<u.length;c++)bi(m=u[c],n,i,s);else for(var h in n){var m,y=/^idb\:\/\/(.*)\/(.*)\//.exec(h);y&&(h=y[1],y=y[2],(m=Cn["idb://".concat(h,"/").concat(y)])&&bi(m,n,i,s))}i.forEach(function(x){return x()})}function bi(n,s,i,c){for(var u=[],h=0,m=Object.entries(n.queries.query);h<m.length;h++){for(var y=m[h],x=y[0],j=[],C=0,b=y[1];C<b.length;C++){var O=b[C];Uo(s,O.obsSet)?O.subscribers.forEach(function(E){return i.add(E)}):c&&j.push(O)}c&&u.push([x,j])}if(c)for(var S=0,_=u;S<_.length;S++){var D=_[S],x=D[0],j=D[1];n.queries.query[x]=j}}function zc(n){var s=n._state,i=n._deps.indexedDB;if(s.isBeingOpened||n.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?Ie(s.dbOpenError):n});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var c=s.openCanceller,u=Math.round(10*n.verno),h=!1;function m(){if(s.openCanceller!==c)throw new ee.DatabaseClosed("db.open() was cancelled")}function y(){return new X(function(O,S){if(m(),!i)throw new ee.MissingAPI;var _=n.name,D=s.autoSchema||!u?i.open(_):i.open(_,u);if(!D)throw new ee.MissingAPI;D.onerror=Vt(S),D.onblocked=ge(n._fireOnBlocked),D.onupgradeneeded=ge(function(E){var M;C=D.transaction,s.autoSchema&&!n._options.allowEmptyDB?(D.onerror=ur,C.abort(),D.result.close(),(M=i.deleteDatabase(_)).onsuccess=M.onerror=ge(function(){S(new ee.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(C.onerror=Vt(S),E=E.oldVersion>Math.pow(2,62)?0:E.oldVersion,b=E<1,n.idbdb=D.result,h&&Lc(n,C),Ic(n,E/10,C,S))},S),D.onsuccess=ge(function(){C=null;var E,M,A,T,I,K=n.idbdb=D.result,$=U(K.objectStoreNames);if(0<$.length)try{var q=K.transaction((T=$).length===1?T[0]:T,"readonly");if(s.autoSchema)M=K,A=q,(E=n).verno=M.version/10,A=E._dbSchema=Xr(0,M,A),E._storeNames=U(M.objectStoreNames,0),Hr(E,[E._allTables],f(A),A);else if(Gr(n,n._dbSchema,q),((I=qo(Xr(0,(I=n).idbdb,q),I._dbSchema)).add.length||I.change.some(function(W){return W.add.length||W.change.length}))&&!h)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),K.close(),u=K.version+1,h=!0,O(y());$r(n,q)}catch{}Fn.push(n),K.onversionchange=ge(function(W){s.vcFired=!0,n.on("versionchange").fire(W)}),K.onclose=ge(function(W){n.on("close").fire(W)}),b&&(I=n._deps,q=_,K=I.indexedDB,I=I.IDBKeyRange,Vo(K)||q===Br||Yo(K,I).put({name:q}).catch(ue)),O()},S)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<s.PR1398_maxLoop)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),y();break;case"VersionError":if(0<u)return u=0,y()}return X.reject(O)})}var x,j=s.dbReadyResolve,C=null,b=!1;return X.race([c,(typeof navigator>"u"?X.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function S(){return indexedDB.databases().finally(O)}x=setInterval(S,100),S()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(y)]).then(function(){return m(),s.onReadyBeingFired=[],X.resolve($o(function(){return n.on.ready.fire(n.vip)})).then(function O(){if(0<s.onReadyBeingFired.length){var S=s.onReadyBeingFired.reduce(Et,ue);return s.onReadyBeingFired=[],X.resolve($o(function(){return S(n.vip)})).then(O)}})}).finally(function(){s.openCanceller===c&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(O){s.dbOpenError=O;try{C&&C.abort()}catch{}return c===s.openCanceller&&n._close(),Ie(O)}).finally(function(){s.openComplete=!0,j()}).then(function(){var O;return b&&(O={},n.tables.forEach(function(S){S.schema.indexes.forEach(function(_){_.name&&(O["idb://".concat(n.name,"/").concat(S.name,"/").concat(_.name)]=new nt(-1/0,[[[]]]))}),O["idb://".concat(n.name,"/").concat(S.name,"/")]=O["idb://".concat(n.name,"/").concat(S.name,"/:dels")]=new nt(-1/0,[[[]]])}),un(dr).fire(O),Qo(O,!0)),n})}function Jo(n){function s(h){return n.next(h)}var i=u(s),c=u(function(h){return n.throw(h)});function u(h){return function(x){var y=h(x),x=y.value;return y.done?x:x&&typeof x.then=="function"?x.then(i,c):p(x)?Promise.all(x).then(i,c):i(x)}}return u(s)()}function eo(n,s,i){for(var c=p(n)?n.slice():[n],u=0;u<i;++u)c.push(s);return c}var Bc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return o(o({},n),{table:function(s){var i=n.table(s),c=i.schema,u={},h=[];function m(b,O,S){var _=hr(b),D=u[_]=u[_]||[],E=b==null?0:typeof b=="string"?1:b.length,M=0<O,M=o(o({},S),{name:M?"".concat(_,"(virtual-from:").concat(S.name,")"):S.name,lowLevelIndex:S,isVirtual:M,keyTail:O,keyLength:E,extractKey:Bo(b),unique:!M&&S.unique});return D.push(M),M.isPrimaryKey||h.push(M),1<E&&m(E===2?b[0]:b.slice(0,E-1),O+1,S),D.sort(function(A,T){return A.keyTail-T.keyTail}),M}s=m(c.primaryKey.keyPath,0,c.primaryKey),u[":id"]=[s];for(var y=0,x=c.indexes;y<x.length;y++){var j=x[y];m(j.keyPath,0,j)}function C(b){var O,S=b.query.index;return S.isVirtual?o(o({},b),{query:{index:S.lowLevelIndex,range:(O=b.query.range,S=S.keyTail,{type:O.type===1?2:O.type,lower:eo(O.lower,O.lowerOpen?n.MAX_KEY:n.MIN_KEY,S),lowerOpen:!0,upper:eo(O.upper,O.upperOpen?n.MIN_KEY:n.MAX_KEY,S),upperOpen:!0})}}):b}return o(o({},i),{schema:o(o({},c),{primaryKey:s,indexes:h,getIndexByKeyPath:function(b){return(b=u[hr(b)])&&b[0]}}),count:function(b){return i.count(C(b))},query:function(b){return i.query(C(b))},openCursor:function(b){var O=b.query.index,S=O.keyTail,_=O.isVirtual,D=O.keyLength;return _?i.openCursor(C(b)).then(function(M){return M&&E(M)}):i.openCursor(b);function E(M){return Object.create(M,{continue:{value:function(A){A!=null?M.continue(eo(A,b.reverse?n.MAX_KEY:n.MIN_KEY,S)):b.unique?M.continue(M.key.slice(0,D).concat(b.reverse?n.MIN_KEY:n.MAX_KEY,S)):M.continue()}},continuePrimaryKey:{value:function(A,T){M.continuePrimaryKey(eo(A,n.MAX_KEY,S),T)}},primaryKey:{get:function(){return M.primaryKey}},key:{get:function(){var A=M.key;return D===1?A[0]:A.slice(0,D)}},value:{get:function(){return M.value}}})}}})}})}};function Zo(n,s,i,c){return i=i||{},c=c||"",f(n).forEach(function(u){var h,m,y;N(s,u)?(h=n[u],m=s[u],typeof h=="object"&&typeof m=="object"&&h&&m?(y=dt(h))!==dt(m)?i[c+u]=s[u]:y==="Object"?Zo(h,m,i,c+u+"."):h!==m&&(i[c+u]=s[u]):h!==m&&(i[c+u]=s[u])):i[c+u]=void 0}),f(s).forEach(function(u){N(n,u)||(i[c+u]=s[u])}),i}function es(n,s){return s.type==="delete"?s.keys:s.keys||s.values.map(n.extractKey)}var Kc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return o(o({},n),{table:function(s){var i=n.table(s),c=i.schema.primaryKey;return o(o({},i),{mutate:function(u){var h=re.trans,m=h.table(s).hook,y=m.deleting,x=m.creating,j=m.updating;switch(u.type){case"add":if(x.fire===ue)break;return h._promise("readwrite",function(){return C(u)},!0);case"put":if(x.fire===ue&&j.fire===ue)break;return h._promise("readwrite",function(){return C(u)},!0);case"delete":if(y.fire===ue)break;return h._promise("readwrite",function(){return C(u)},!0);case"deleteRange":if(y.fire===ue)break;return h._promise("readwrite",function(){return function b(O,S,_){return i.query({trans:O,values:!1,query:{index:c,range:S},limit:_}).then(function(D){var E=D.result;return C({type:"delete",keys:E,trans:O}).then(function(M){return 0<M.numFailures?Promise.reject(M.failures[0]):E.length<_?{failures:[],numFailures:0,lastResult:void 0}:b(O,o(o({},S),{lower:E[E.length-1],lowerOpen:!0}),_)})})}(u.trans,u.range,1e4)},!0)}return i.mutate(u);function C(b){var O,S,_,D=re.trans,E=b.keys||es(c,b);if(!E)throw new Error("Keys missing");return(b=b.type==="add"||b.type==="put"?o(o({},b),{keys:E}):o({},b)).type!=="delete"&&(b.values=a([],b.values)),b.keys&&(b.keys=a([],b.keys)),O=i,_=E,((S=b).type==="add"?Promise.resolve([]):O.getMany({trans:S.trans,keys:_,cache:"immutable"})).then(function(M){var A=E.map(function(T,I){var K,$,q,W=M[I],G={onerror:null,onsuccess:null};return b.type==="delete"?y.fire.call(G,T,W,D):b.type==="add"||W===void 0?(K=x.fire.call(G,T,b.values[I],D),T==null&&K!=null&&(b.keys[I]=T=K,c.outbound||Z(b.values[I],c.keyPath,T))):(K=Zo(W,b.values[I]),($=j.fire.call(G,K,T,W,D))&&(q=b.values[I],Object.keys($).forEach(function(H){N(q,H)?q[H]=$[H]:Z(q,H,$[H])}))),G});return i.mutate(b).then(function(T){for(var I=T.failures,K=T.results,$=T.numFailures,T=T.lastResult,q=0;q<E.length;++q){var W=(K||E)[q],G=A[q];W==null?G.onerror&&G.onerror(I[q]):G.onsuccess&&G.onsuccess(b.type==="put"&&M[q]?b.values[q]:W)}return{failures:I,results:K,numFailures:$,lastResult:T}}).catch(function(T){return A.forEach(function(I){return I.onerror&&I.onerror(T)}),Promise.reject(T)})})}}})}})}};function wi(n,s,i){try{if(!s||s.keys.length<n.length)return null;for(var c=[],u=0,h=0;u<s.keys.length&&h<n.length;++u)ve(s.keys[u],n[h])===0&&(c.push(i?je(s.values[u]):s.values[u]),++h);return c.length===n.length?c:null}catch{return null}}var qc={stack:"dbcore",level:-1,create:function(n){return{table:function(s){var i=n.table(s);return o(o({},i),{getMany:function(c){if(!c.cache)return i.getMany(c);var u=wi(c.keys,c.trans._cache,c.cache==="clone");return u?X.resolve(u):i.getMany(c).then(function(h){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?je(h):h},h})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),i.mutate(c)}})}}}};function xi(n,s){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function Si(n,s){switch(n){case"query":return s.values&&!s.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Wc={stack:"dbcore",level:0,name:"Observability",create:function(n){var s=n.schema.name,i=new nt(n.MIN_KEY,n.MAX_KEY);return o(o({},n),{transaction:function(c,u,h){if(re.subscr&&u!=="readonly")throw new ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(re.querier));return n.transaction(c,u,h)},table:function(c){var u=n.table(c),h=u.schema,m=h.primaryKey,b=h.indexes,y=m.extractKey,x=m.outbound,j=m.autoIncrement&&b.filter(function(S){return S.compound&&S.keyPath.includes(m.keyPath)}),C=o(o({},u),{mutate:function(S){function _(H){return H="idb://".concat(s,"/").concat(c,"/").concat(H),T[H]||(T[H]=new nt)}var D,E,M,A=S.trans,T=S.mutatedParts||(S.mutatedParts={}),I=_(""),K=_(":dels"),$=S.type,G=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[es(m,S).filter(function(H){return H}),S.values]:[],q=G[0],W=G[1],G=S.trans._cache;return p(q)?(I.addKeys(q),(G=$==="delete"||q.length===W.length?wi(q,G):null)||K.addKeys(q),(G||W)&&(D=_,E=G,M=W,h.indexes.forEach(function(H){var Q=D(H.name||"");function ce(ae){return ae!=null?H.extractKey(ae):null}function we(ae){return H.multiEntry&&p(ae)?ae.forEach(function(Re){return Q.addKey(Re)}):Q.addKey(ae)}(E||M).forEach(function(ae,rt){var ie=E&&ce(E[rt]),rt=M&&ce(M[rt]);ve(ie,rt)!==0&&(ie!=null&&we(ie),rt!=null&&we(rt))})}))):q?(W={from:(W=q.lower)!==null&&W!==void 0?W:n.MIN_KEY,to:(W=q.upper)!==null&&W!==void 0?W:n.MAX_KEY},K.add(W),I.add(W)):(I.add(i),K.add(i),h.indexes.forEach(function(H){return _(H.name).add(i)})),u.mutate(S).then(function(H){return!q||S.type!=="add"&&S.type!=="put"||(I.addKeys(H.results),j&&j.forEach(function(Q){for(var ce=S.values.map(function(ie){return Q.extractKey(ie)}),we=Q.keyPath.findIndex(function(ie){return ie===m.keyPath}),ae=0,Re=H.results.length;ae<Re;++ae)ce[ae][we]=H.results[ae];_(Q.name).addKeys(ce)})),A.mutatedParts=Jr(A.mutatedParts||{},T),H})}}),b=function(_){var D=_.query,_=D.index,D=D.range;return[_,new nt((_=D.lower)!==null&&_!==void 0?_:n.MIN_KEY,(D=D.upper)!==null&&D!==void 0?D:n.MAX_KEY)]},O={get:function(S){return[m,new nt(S.key)]},getMany:function(S){return[m,new nt().addKeys(S.keys)]},count:b,query:b,openCursor:b};return f(O).forEach(function(S){C[S]=function(_){var D=re.subscr,E=!!D,M=xi(re,u)&&Si(S,_)?_.obsSet={}:D;if(E){var A=function(W){return W="idb://".concat(s,"/").concat(c,"/").concat(W),M[W]||(M[W]=new nt)},T=A(""),I=A(":dels"),D=O[S](_),E=D[0],D=D[1];if((S==="query"&&E.isPrimaryKey&&!_.values?I:A(E.name||"")).add(D),!E.isPrimaryKey){if(S!=="count"){var K=S==="query"&&x&&_.values&&u.query(o(o({},_),{values:!1}));return u[S].apply(this,arguments).then(function(W){if(S==="query"){if(x&&_.values)return K.then(function(ce){return ce=ce.result,T.addKeys(ce),W});var G=_.values?W.result.map(y):W.result;(_.values?T:I).addKeys(G)}else if(S==="openCursor"){var H=W,Q=_.values;return H&&Object.create(H,{key:{get:function(){return I.addKey(H.primaryKey),H.key}},primaryKey:{get:function(){var ce=H.primaryKey;return I.addKey(ce),ce}},value:{get:function(){return Q&&T.addKey(H.primaryKey),H.value}}})}return W})}I.add(i)}}return u[S].apply(this,arguments)}}),C}})}};function ji(n,s,i){if(i.numFailures===0)return s;if(s.type==="deleteRange")return null;var c=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1;return i.numFailures===c?null:(s=o({},s),p(s.keys)&&(s.keys=s.keys.filter(function(u,h){return!(h in i.failures)})),"values"in s&&p(s.values)&&(s.values=s.values.filter(function(u,h){return!(h in i.failures)})),s)}function ts(n,s){return i=n,((c=s).lower===void 0||(c.lowerOpen?0<ve(i,c.lower):0<=ve(i,c.lower)))&&(n=n,(s=s).upper===void 0||(s.upperOpen?ve(n,s.upper)<0:ve(n,s.upper)<=0));var i,c}function Ni(n,s,O,c,u,h){if(!O||O.length===0)return n;var m=s.query.index,y=m.multiEntry,x=s.query.range,j=c.schema.primaryKey.extractKey,C=m.extractKey,b=(m.lowLevelIndex||m).extractKey,O=O.reduce(function(S,_){var D=S,E=[];if(_.type==="add"||_.type==="put")for(var M=new nt,A=_.values.length-1;0<=A;--A){var T,I=_.values[A],K=j(I);M.hasKey(K)||(T=C(I),(y&&p(T)?T.some(function(H){return ts(H,x)}):ts(T,x))&&(M.addKey(K),E.push(I)))}switch(_.type){case"add":var $=new nt().addKeys(s.values?S.map(function(Q){return j(Q)}):S),D=S.concat(s.values?E.filter(function(Q){return Q=j(Q),!$.hasKey(Q)&&($.addKey(Q),!0)}):E.map(function(Q){return j(Q)}).filter(function(Q){return!$.hasKey(Q)&&($.addKey(Q),!0)}));break;case"put":var q=new nt().addKeys(_.values.map(function(Q){return j(Q)}));D=S.filter(function(Q){return!q.hasKey(s.values?j(Q):Q)}).concat(s.values?E:E.map(function(Q){return j(Q)}));break;case"delete":var W=new nt().addKeys(_.keys);D=S.filter(function(Q){return!W.hasKey(s.values?j(Q):Q)});break;case"deleteRange":var G=_.range;D=S.filter(function(Q){return!ts(j(Q),G)})}return D},n);return O===n?n:(O.sort(function(S,_){return ve(b(S),b(_))||ve(j(S),j(_))}),s.limit&&s.limit<1/0&&(O.length>s.limit?O.length=s.limit:n.length===s.limit&&O.length<s.limit&&(u.dirty=!0)),h?Object.freeze(O):O)}function _i(n,s){return ve(n.lower,s.lower)===0&&ve(n.upper,s.upper)===0&&!!n.lowerOpen==!!s.lowerOpen&&!!n.upperOpen==!!s.upperOpen}function Yc(n,s){return function(i,c,u,h){if(i===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=ve(i,c))===0){if(u&&h)return 0;if(u)return 1;if(h)return-1}return c}(n.lower,s.lower,n.lowerOpen,s.lowerOpen)<=0&&0<=function(i,c,u,h){if(i===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=ve(i,c))===0){if(u&&h)return 0;if(u)return-1;if(h)return 1}return c}(n.upper,s.upper,n.upperOpen,s.upperOpen)}function Vc(n,s,i,c){n.subscribers.add(i),c.addEventListener("abort",function(){var u,h;n.subscribers.delete(i),n.subscribers.size===0&&(u=n,h=s,setTimeout(function(){u.subscribers.size===0&&Ve(h,u)},3e3))})}var $c={stack:"dbcore",level:0,name:"Cache",create:function(n){var s=n.schema.name;return o(o({},n),{transaction:function(i,c,u){var h,m,y=n.transaction(i,c,u);return c==="readwrite"&&(m=(h=new AbortController).signal,u=function(x){return function(){if(h.abort(),c==="readwrite"){for(var j=new Set,C=0,b=i;C<b.length;C++){var O=b[C],S=Cn["idb://".concat(s,"/").concat(O)];if(S){var _=n.table(O),D=S.optimisticOps.filter(function(Q){return Q.trans===y});if(y._explicit&&x&&y.mutatedParts)for(var E=0,M=Object.values(S.queries.query);E<M.length;E++)for(var A=0,T=($=M[E]).slice();A<T.length;A++)Uo((q=T[A]).obsSet,y.mutatedParts)&&(Ve($,q),q.subscribers.forEach(function(Q){return j.add(Q)}));else if(0<D.length){S.optimisticOps=S.optimisticOps.filter(function(Q){return Q.trans!==y});for(var I=0,K=Object.values(S.queries.query);I<K.length;I++)for(var $,q,W,G=0,H=($=K[I]).slice();G<H.length;G++)(q=H[G]).res!=null&&y.mutatedParts&&(x&&!q.dirty?(W=Object.isFrozen(q.res),W=Ni(q.res,q.req,D,_,q,W),q.dirty?(Ve($,q),q.subscribers.forEach(function(Q){return j.add(Q)})):W!==q.res&&(q.res=W,q.promise=X.resolve({result:W}))):(q.dirty&&Ve($,q),q.subscribers.forEach(function(Q){return j.add(Q)})))}}}j.forEach(function(Q){return Q()})}}},y.addEventListener("abort",u(!1),{signal:m}),y.addEventListener("error",u(!1),{signal:m}),y.addEventListener("complete",u(!0),{signal:m})),y},table:function(i){var c=n.table(i),u=c.schema.primaryKey;return o(o({},c),{mutate:function(h){var m=re.trans;if(u.outbound||m.db._options.cache==="disabled"||m.explicit||m.idbtrans.mode!=="readwrite")return c.mutate(h);var y=Cn["idb://".concat(s,"/").concat(i)];return y?(m=c.mutate(h),h.type!=="add"&&h.type!=="put"||!(50<=h.values.length||es(u,h).some(function(x){return x==null}))?(y.optimisticOps.push(h),h.mutatedParts&&Zr(h.mutatedParts),m.then(function(x){0<x.numFailures&&(Ve(y.optimisticOps,h),(x=ji(0,h,x))&&y.optimisticOps.push(x),h.mutatedParts&&Zr(h.mutatedParts))}),m.catch(function(){Ve(y.optimisticOps,h),h.mutatedParts&&Zr(h.mutatedParts)})):m.then(function(x){var j=ji(0,o(o({},h),{values:h.values.map(function(C,b){var O;return x.failures[b]?C:(C=(O=u.keyPath)!==null&&O!==void 0&&O.includes(".")?je(C):o({},C),Z(C,u.keyPath,x.results[b]),C)})}),x);y.optimisticOps.push(j),queueMicrotask(function(){return h.mutatedParts&&Zr(h.mutatedParts)})}),m):c.mutate(h)},query:function(h){if(!xi(re,c)||!Si("query",h))return c.query(h);var m=((j=re.trans)===null||j===void 0?void 0:j.db._options.cache)==="immutable",b=re,y=b.requery,x=b.signal,j=function(_,D,E,M){var A=Cn["idb://".concat(_,"/").concat(D)];if(!A)return[];if(!(D=A.queries[E]))return[null,!1,A,null];var T=D[(M.query?M.query.index.name:null)||""];if(!T)return[null,!1,A,null];switch(E){case"query":var I=T.find(function(K){return K.req.limit===M.limit&&K.req.values===M.values&&_i(K.req.query.range,M.query.range)});return I?[I,!0,A,T]:[T.find(function(K){return("limit"in K.req?K.req.limit:1/0)>=M.limit&&(!M.values||K.req.values)&&Yc(K.req.query.range,M.query.range)}),!1,A,T];case"count":return I=T.find(function(K){return _i(K.req.query.range,M.query.range)}),[I,!!I,A,T]}}(s,i,"query",h),C=j[0],b=j[1],O=j[2],S=j[3];return C&&b?C.obsSet=h.obsSet:(b=c.query(h).then(function(_){var D=_.result;if(C&&(C.res=D),m){for(var E=0,M=D.length;E<M;++E)Object.freeze(D[E]);Object.freeze(D)}else _.result=je(D);return _}).catch(function(_){return S&&C&&Ve(S,C),Promise.reject(_)}),C={obsSet:h.obsSet,promise:b,subscribers:new Set,type:"query",req:h,dirty:!1},S?S.push(C):(S=[C],(O=O||(Cn["idb://".concat(s,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[h.query.index.name||""]=S)),Vc(C,S,y,x),C.promise.then(function(_){return{result:Ni(_.result,h,O==null?void 0:O.optimisticOps,c,C,m)}})}})}})}};function to(n,s){return new Proxy(n,{get:function(i,c,u){return c==="db"?s:Reflect.get(i,c,u)}})}var Jt=(Le.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ee.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var s=this._versions,i=s.filter(function(c){return c._cfg.version===n})[0];return i||(i=new this.Version(n),s.push(i),s.sort(Tc),i.stores({}),this._state.autoSchema=!1,i)},Le.prototype._whenReady=function(n){var s=this;return this.idbdb&&(this._state.openComplete||re.letThrough||this._vip)?n():new X(function(i,c){if(s._state.openComplete)return c(new ee.DatabaseClosed(s._state.dbOpenError));if(!s._state.isBeingOpened){if(!s._state.autoOpen)return void c(new ee.DatabaseClosed);s.open().catch(ue)}s._state.dbReadyPromise.then(i,c)}).then(n)},Le.prototype.use=function(n){var s=n.stack,i=n.create,c=n.level,u=n.name;return u&&this.unuse({stack:s,name:u}),n=this._middlewares[s]||(this._middlewares[s]=[]),n.push({stack:s,create:i,level:c??10,name:u}),n.sort(function(h,m){return h.level-m.level}),this},Le.prototype.unuse=function(n){var s=n.stack,i=n.name,c=n.create;return s&&this._middlewares[s]&&(this._middlewares[s]=this._middlewares[s].filter(function(u){return c?u.create!==c:!!i&&u.name!==i})),this},Le.prototype.open=function(){var n=this;return jn(Dt,function(){return zc(n)})},Le.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,s=Fn.indexOf(this);if(0<=s&&Fn.splice(s,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new X(function(i){n.dbReadyResolve=i}),n.openCanceller=new X(function(i,c){n.cancelOpen=c}))},Le.prototype.close=function(i){var s=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;s?(i.isBeingOpened&&i.cancelOpen(new ee.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new ee.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},Le.prototype.delete=function(n){var s=this;n===void 0&&(n={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new X(function(u,h){function m(){s.close(n);var y=s._deps.indexedDB.deleteDatabase(s.name);y.onsuccess=ge(function(){var x,j,C;x=s._deps,j=s.name,C=x.indexedDB,x=x.IDBKeyRange,Vo(C)||j===Br||Yo(C,x).delete(j).catch(ue),u()}),y.onerror=Vt(h),y.onblocked=s._fireOnBlocked}if(i)throw new ee.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(m):m()})},Le.prototype.backendDB=function(){return this.idbdb},Le.prototype.isOpen=function(){return this.idbdb!==null},Le.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},Le.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Le.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Le.prototype,"tables",{get:function(){var n=this;return f(this._allTables).map(function(s){return n._allTables[s]})},enumerable:!1,configurable:!0}),Le.prototype.transaction=function(){var n=(function(s,i,c){var u=arguments.length;if(u<2)throw new ee.InvalidArgument("Too few arguments");for(var h=new Array(u-1);--u;)h[u-1]=arguments[u];return c=h.pop(),[s,se(h),c]}).apply(this,arguments);return this._transaction.apply(this,n)},Le.prototype._transaction=function(n,s,i){var c=this,u=re.trans;u&&u.db===this&&n.indexOf("!")===-1||(u=null);var h,m,y=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{if(m=s.map(function(j){if(j=j instanceof c.Table?j.name:j,typeof j!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return j}),n=="r"||n===Ao)h=Ao;else{if(n!="rw"&&n!=Ro)throw new ee.InvalidArgument("Invalid transaction mode: "+n);h=Ro}if(u){if(u.mode===Ao&&h===Ro){if(!y)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&m.forEach(function(j){if(u&&u.storeNames.indexOf(j)===-1){if(!y)throw new ee.SubTransaction("Table "+j+" not included in parent transaction.");u=null}}),y&&u&&!u.active&&(u=null)}}catch(j){return u?u._promise(null,function(C,b){b(j)}):Ie(j)}var x=(function j(C,b,O,S,_){return X.resolve().then(function(){var D=re.transless||re,E=C._createTransaction(b,O,C._dbSchema,S);if(E.explicit=!0,D={trans:E,transless:D},S)E.idbtrans=S.idbtrans;else try{E.create(),E.idbtrans._explicit=!0,C._state.PR1398_maxLoop=3}catch(T){return T.name===Ft.InvalidState&&C.isOpen()&&0<--C._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),C.close({disableAutoOpen:!1}),C.open().then(function(){return j(C,b,O,null,_)})):Ie(T)}var M,A=Pe(_);return A&&Ln(),D=X.follow(function(){var T;(M=_.call(E,E))&&(A?(T=an.bind(null,null),M.then(T,T)):typeof M.next=="function"&&typeof M.throw=="function"&&(M=Jo(M)))},D),(M&&typeof M.then=="function"?X.resolve(M).then(function(T){return E.active?T:Ie(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return M})).then(function(T){return S&&E._resolve(),E._completion.then(function(){return T})}).catch(function(T){return E._reject(T),Ie(T)})})}).bind(null,this,h,m,u,i);return u?u._promise(h,x,"lock"):re.trans?jn(re.transless,function(){return c._whenReady(x)}):this._whenReady(x)},Le.prototype.table=function(n){if(!N(this._allTables,n))throw new ee.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},Le);function Le(n,s){var i=this;this._middlewares={},this.verno=0;var c=Le.dependencies;this._options=s=o({addons:Le.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},s),this._deps={indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange},c=s.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,h,m,y,x,j={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ue,dbReadyPromise:null,cancelOpen:ue,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:s.autoOpen};j.dbReadyPromise=new X(function(b){j.dbReadyResolve=b}),j.openCanceller=new X(function(b,O){j.cancelOpen=O}),this._state=j,this.name=n,this.on=ar(this,"populate","blocked","versionchange","close",{ready:[Et,ue]}),this.once=function(b,O){var S=function(){for(var _=[],D=0;D<arguments.length;D++)_[D]=arguments[D];i.on(b).unsubscribe(S),O.apply(i,_)};return i.on(b,S)},this.on.ready.subscribe=B(this.on.ready.subscribe,function(b){return function(O,S){Le.vip(function(){var _,D=i._state;D.openComplete?(D.dbOpenError||X.resolve().then(O),S&&b(O)):D.onReadyBeingFired?(D.onReadyBeingFired.push(O),S&&b(O)):(b(O),_=i,S||b(function E(){_.on.ready.unsubscribe(O),_.on.ready.unsubscribe(E)}))})}}),this.Collection=(u=this,cr(Ec.prototype,function(M,E){this.db=u;var S=ti,_=null;if(E)try{S=E()}catch(A){_=A}var D=M._ctx,E=D.table,M=E.hook.reading.fire;this._ctx={table:E,index:D.index,isPrimKey:!D.index||E.schema.primKey.keyPath&&D.index===E.schema.primKey.name,range:S,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:D.or,valueMapper:M!==kt?M:null}})),this.Table=(h=this,cr(si.prototype,function(b,O,S){this.db=h,this._tx=S,this.name=b,this.schema=O,this.hook=h._allTables[b]?h._allTables[b].hook:ar(null,{creating:[rn,ue],reading:[At,kt],updating:[Fr,ue],deleting:[Lr,ue]})})),this.Transaction=(m=this,cr(Mc.prototype,function(b,O,S,_,D){var E=this;b!=="readonly"&&O.forEach(function(M){M=(M=S[M])===null||M===void 0?void 0:M.yProps,M&&(O=O.concat(M.map(function(A){return A.updatesTable})))}),this.db=m,this.mode=b,this.storeNames=O,this.schema=S,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=ar(this,"complete","error","abort"),this.parent=D||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(M,A){E._resolve=M,E._reject=A}),this._completion.then(function(){E.active=!1,E.on.complete.fire()},function(M){var A=E.active;return E.active=!1,E.on.error.fire(M),E.parent?E.parent._reject(M):A&&E.idbtrans&&E.idbtrans.abort(),Ie(M)})})),this.Version=(y=this,cr(Fc.prototype,function(b){this.db=y,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,cr(di.prototype,function(b,O,S){if(this.db=x,this._ctx={table:b,index:O===":id"?null:O,or:S},this._cmp=this._ascending=ve,this._descending=function(_,D){return ve(D,_)},this._max=function(_,D){return 0<ve(_,D)?_:D},this._min=function(_,D){return ve(_,D)<0?_:D},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new ee.MissingAPI})),this.on("versionchange",function(b){0<b.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=fr(s.IDBKeyRange),this._createTransaction=function(b,O,S,_){return new i.Transaction(b,O,S,i._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(b){i.on("blocked").fire(b),Fn.filter(function(O){return O.name===i.name&&O!==i&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(b)})},this.use(qc),this.use($c),this.use(Wc),this.use(Bc),this.use(Kc);var C=new Proxy(this,{get:function(b,O,S){if(O==="_vip")return!0;if(O==="table")return function(D){return to(i.table(D),C)};var _=Reflect.get(b,O,S);return _ instanceof si?to(_,C):O==="tables"?_.map(function(D){return to(D,C)}):O==="_createTransaction"?function(){return to(_.apply(this,arguments),C)}:_}});this.vip=C,c.forEach(function(b){return b(i)})}var no,Mt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Hc=(ns.prototype.subscribe=function(n,s,i){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:s,complete:i})},ns.prototype[Mt]=function(){return this},ns);function ns(n){this._subscribe=n}try{no={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{no={indexedDB:null,IDBKeyRange:null}}function Ci(n){var s,i=!1,c=new Hc(function(u){var h=Pe(n),m,y=!1,x={},j={},C={get closed(){return y},unsubscribe:function(){y||(y=!0,m&&m.abort(),b&&un.storagemutated.unsubscribe(S))}};u.start&&u.start(C);var b=!1,O=function(){return Po(_)},S=function(D){Jr(x,D),Uo(j,x)&&O()},_=function(){var D,E,M;!y&&no.indexedDB&&(x={},D={},m&&m.abort(),m=new AbortController,M=function(A){var T=Je();try{h&&Ln();var I=sn(n,A);return I=h?I.finally(an):I}finally{T&&wt()}}(E={subscr:D,signal:m.signal,requery:O,querier:n,trans:null}),Promise.resolve(M).then(function(A){i=!0,s=A,y||E.signal.aborted||(x={},function(T){for(var I in T)if(N(T,I))return;return 1}(j=D)||b||(un(dr,S),b=!0),Po(function(){return!y&&u.next&&u.next(A)}))},function(A){i=!1,["DatabaseClosedError","AbortError"].includes(A==null?void 0:A.name)||y||Po(function(){y||u.error&&u.error(A)})}))};return setTimeout(O,0),C});return c.hasValue=function(){return i},c.getValue=function(){return s},c}var kn=Jt;function rs(n){var s=dn;try{dn=!0,un.storagemutated.fire(n),Qo(n,!0)}finally{dn=s}}R(kn,o(o({},zt),{delete:function(n){return new kn(n,{addons:[]}).delete()},exists:function(n){return new kn(n,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return s=kn.dependencies,i=s.indexedDB,s=s.IDBKeyRange,(Vo(i)?Promise.resolve(i.databases()).then(function(c){return c.map(function(u){return u.name}).filter(function(u){return u!==Br})}):Yo(i,s).toCollection().primaryKeys()).then(n)}catch{return Ie(new ee.MissingAPI)}var s,i},defineClass:function(){return function(n){g(this,n)}},ignoreTransaction:function(n){return re.trans?jn(re.transless,n):n()},vip:$o,async:function(n){return function(){try{var s=Jo(n.apply(this,arguments));return s&&typeof s.then=="function"?s:X.resolve(s)}catch(i){return Ie(i)}}},spawn:function(n,s,i){try{var c=Jo(n.apply(i,s||[]));return c&&typeof c.then=="function"?c:X.resolve(c)}catch(u){return Ie(u)}},currentTransaction:{get:function(){return re.trans||null}},waitFor:function(n,s){return s=X.resolve(typeof n=="function"?kn.ignoreTransaction(n):n).timeout(s||6e4),re.trans?re.trans.waitFor(s):s},Promise:X,debug:{get:function(){return it},set:function(n){bn(n)}},derive:F,extend:g,props:R,override:B,Events:ar,on:un,liveQuery:Ci,extendObservabilitySet:Jr,getByKeyPath:J,setByKeyPath:Z,delByKeyPath:function(n,s){typeof s=="string"?Z(n,s,void 0):"length"in s&&[].map.call(s,function(i){Z(n,i,void 0)})},shallowClone:oe,deepClone:je,getObjectDiff:Zo,cmp:ve,asap:V,minKey:-1/0,addons:[],connections:Fn,errnames:Ft,dependencies:no,cache:Cn,semVer:"4.2.0",version:"4.2.0".split(".").map(function(n){return parseInt(n)}).reduce(function(n,s,i){return n+s/Math.pow(10,2*i)})})),kn.maxKey=fr(kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(un(dr,function(n){dn||(n=new CustomEvent(Lo,{detail:n}),dn=!0,dispatchEvent(n),dn=!1)}),addEventListener(Lo,function(n){n=n.detail,dn||rs(n)}));var qn,dn=!1,ki=function(){};return typeof BroadcastChannel<"u"&&((ki=function(){(qn=new BroadcastChannel(Lo)).onmessage=function(n){return n.data&&rs(n.data)}})(),typeof qn.unref=="function"&&qn.unref(),un(dr,function(n){dn||qn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Jt.disableBfCache&&n.persisted){it&&console.debug("Dexie: handling persisted pagehide"),qn!=null&&qn.close();for(var s=0,i=Fn;s<i.length;s++)i[s].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!Jt.disableBfCache&&n.persisted&&(it&&console.debug("Dexie: handling persisted pageshow"),ki(),rs({all:new nt(-1/0,[[]])}))})),X.rejectionMapper=function(n,s){return!n||n instanceof Ae||n instanceof TypeError||n instanceof SyntaxError||!n.name||!me[n.name]?n:(s=new me[n.name](s||n.message,n),"stack"in n&&L(s,"stack",{get:function(){return this.inner.stack}}),s)},bn(it),o(Jt,Object.freeze({__proto__:null,Dexie:Jt,liveQuery:Ci,Entity:ni,cmp:ve,PropModification:lr,replacePrefix:function(n,s){return new lr({replacePrefix:[n,s]})},add:function(n){return new lr({add:n})},remove:function(n){return new lr({remove:n})},default:Jt,RangeSet:nt,mergeRanges:mr,rangesOverlap:gi}),{default:Jt}),Jt})})(Ka);var su=Ka.exports;const Ns=rl(su),Fi=Symbol.for("Dexie"),_s=globalThis[Fi]||(globalThis[Fi]=Ns);if(Ns.semVer!==_s.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ns.semVer} and ${_s.semVer}`);class iu extends _s{constructor(){super("NotesDatabase");oo(this,"notes");oo(this,"settings");this.version(1).stores({notes:"id, title, content, createdAt, updatedAt",settings:"++id, theme, color, selectedNoteId"})}}const Zt=new iu;class au{async getNotes(){try{return await Zt.notes.orderBy("updatedAt").reverse().toArray()}catch(t){return console.error("Failed to get notes from IndexedDB:",t),this.getNotesFromLocalStorage()}}async saveNotes(t){try{await Zt.notes.clear(),await Zt.notes.bulkAdd(t)}catch(r){console.error("Failed to save notes to IndexedDB:",r),this.saveNotesToLocalStorage(t)}}async saveNote(t){try{await Zt.notes.put(t)}catch(r){console.error("Failed to save note to IndexedDB:",r);const o=await this.getNotes(),a=o.map(l=>l.id===t.id?t:l);o.find(l=>l.id===t.id)||a.push(t),this.saveNotesToLocalStorage(a)}}async getSettings(){try{const t=await Zt.settings.toArray();return t.length>0?t[0]:null}catch(t){return console.error("Failed to get settings from IndexedDB:",t),this.getSettingsFromLocalStorage()}}async saveSettings(t){try{await Zt.settings.clear(),await Zt.settings.add(t)}catch(r){console.error("Failed to save settings to IndexedDB:",r),this.saveSettingsToLocalStorage(t)}}async migrateFromLocalStorage(){try{const t=await Zt.notes.count(),r=await Zt.settings.count();if(t===0&&r===0){const o=this.getNotesFromLocalStorage(),a=this.getSettingsFromLocalStorage();o.length>0&&(await this.saveNotes(o),console.log(`Migrated ${o.length} notes from localStorage to IndexedDB`)),a&&(await this.saveSettings(a),console.log("Migrated settings from localStorage to IndexedDB"))}}catch(t){console.error("Migration from localStorage failed:",t)}}getNotesFromLocalStorage(){try{const t=localStorage.getItem("notes");if(t){const r=JSON.parse(t);return Array.isArray(r)?r.map(o=>({...o,createdAt:new Date(o.createdAt),updatedAt:new Date(o.updatedAt)})):[]}return[]}catch(t){return console.error("Failed to get notes from localStorage:",t),[]}}saveNotesToLocalStorage(t){try{localStorage.setItem("notes",JSON.stringify(t))}catch(r){console.error("Failed to save notes to localStorage:",r)}}getSettingsFromLocalStorage(){try{const t=localStorage.getItem("theme")||"system",r=localStorage.getItem("color")||"blue",o=localStorage.getItem("selectedNoteId")||null;return{id:1,theme:t,color:r,selectedNoteId:o}}catch(t){return console.error("Failed to get settings from localStorage:",t),null}}saveSettingsToLocalStorage(t){try{localStorage.setItem("theme",t.theme),localStorage.setItem("color",t.color),t.selectedNoteId?localStorage.setItem("selectedNoteId",t.selectedNoteId):localStorage.removeItem("selectedNoteId")}catch(r){console.error("Failed to save settings to localStorage:",r)}}}const Pn=new au;function qa(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=qa(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function cu(){for(var e,t,r=0,o="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=qa(e))&&(o&&(o+=" "),o+=t);return o}const zs="-";function lu(e){const t=du(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=e;function a(f){const p=f.split(zs);return p[0]===""&&p.length!==1&&p.shift(),Wa(p,t)||uu(f)}function l(f,p){const g=r[f]||[];return p&&o[f]?[...g,...o[f]]:g}return{getClassGroupId:a,getConflictingClassGroupIds:l}}function Wa(e,t){var f;if(e.length===0)return t.classGroupId;const r=e[0],o=t.nextPart.get(r),a=o?Wa(e.slice(1),o):void 0;if(a)return a;if(t.validators.length===0)return;const l=e.join(zs);return(f=t.validators.find(({validator:p})=>p(l)))==null?void 0:f.classGroupId}const zi=/^\[(.+)\]$/;function uu(e){if(zi.test(e)){const t=zi.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function du(e){const{theme:t,prefix:r}=e,o={nextPart:new Map,validators:[]};return hu(Object.entries(e.classGroups),r).forEach(([l,f])=>{Cs(f,o,l,t)}),o}function Cs(e,t,r,o){e.forEach(a=>{if(typeof a=="string"){const l=a===""?t:Bi(t,a);l.classGroupId=r;return}if(typeof a=="function"){if(fu(a)){Cs(a(o),t,r,o);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([l,f])=>{Cs(f,Bi(t,l),r,o)})})}function Bi(e,t){let r=e;return t.split(zs).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r}function fu(e){return e.isThemeGetter}function hu(e,t){return t?e.map(([r,o])=>{const a=o.map(l=>typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([f,p])=>[t+f,p])):l);return[r,a]}):e}function pu(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,o=new Map;function a(l,f){r.set(l,f),t++,t>e&&(t=0,o=r,r=new Map)}return{get(l){let f=r.get(l);if(f!==void 0)return f;if((f=o.get(l))!==void 0)return a(l,f),f},set(l,f){r.has(l)?r.set(l,f):a(l,f)}}}const Ya="!";function mu(e){const{separator:t,experimentalParseClassName:r}=e,o=t.length===1,a=t[0],l=t.length;function f(p){const g=[];let v=0,w=0,N;for(let z=0;z<p.length;z++){let Y=p[z];if(v===0){if(Y===a&&(o||p.slice(z,z+l)===t)){g.push(p.slice(w,z)),w=z+l;continue}if(Y==="/"){N=z;continue}}Y==="["?v++:Y==="]"&&v--}const R=g.length===0?p:p.substring(w),P=R.startsWith(Ya),L=P?R.substring(1):R,F=N&&N>w?N-w:void 0;return{modifiers:g,hasImportantModifier:P,baseClassName:L,maybePostfixModifierPosition:F}}return r?function(g){return r({className:g,parseClassName:f})}:f}function gu(e){if(e.length<=1)return e;const t=[];let r=[];return e.forEach(o=>{o[0]==="["?(t.push(...r.sort(),o),r=[]):r.push(o)}),t.push(...r.sort()),t}function vu(e){return{cache:pu(e.cacheSize),parseClassName:mu(e),...lu(e)}}const yu=/\s+/;function bu(e,t){const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:a}=t,l=new Set;return e.trim().split(yu).map(f=>{const{modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:w}=r(f);let N=!!w,R=o(N?v.substring(0,w):v);if(!R){if(!N)return{isTailwindClass:!1,originalClassName:f};if(R=o(v),!R)return{isTailwindClass:!1,originalClassName:f};N=!1}const P=gu(p).join(":");return{isTailwindClass:!0,modifierId:g?P+Ya:P,classGroupId:R,originalClassName:f,hasPostfixModifier:N}}).reverse().filter(f=>{if(!f.isTailwindClass)return!0;const{modifierId:p,classGroupId:g,hasPostfixModifier:v}=f,w=p+g;return l.has(w)?!1:(l.add(w),a(g,v).forEach(N=>l.add(p+N)),!0)}).reverse().map(f=>f.originalClassName).join(" ")}function wu(){let e=0,t,r,o="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Va(t))&&(o&&(o+=" "),o+=r);return o}function Va(e){if(typeof e=="string")return e;let t,r="";for(let o=0;o<e.length;o++)e[o]&&(t=Va(e[o]))&&(r&&(r+=" "),r+=t);return r}function xu(e,...t){let r,o,a,l=f;function f(g){const v=t.reduce((w,N)=>N(w),e());return r=vu(v),o=r.cache.get,a=r.cache.set,l=p,p(g)}function p(g){const v=o(g);if(v)return v;const w=bu(g,r);return a(g,w),w}return function(){return l(wu.apply(null,arguments))}}function Ee(e){const t=r=>r[e]||[];return t.isThemeGetter=!0,t}const $a=/^\[(?:([a-z-]+):)?(.+)\]$/i,Su=/^\d+\/\d+$/,ju=new Set(["px","full","screen"]),Nu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_u=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ku=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Eu=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function en(e){return Mn(e)||ju.has(e)||Su.test(e)}function fn(e){return Jn(e,"length",Iu)}function Mn(e){return!!e&&!Number.isNaN(Number(e))}function so(e){return Jn(e,"number",Mn)}function gr(e){return!!e&&Number.isInteger(Number(e))}function Du(e){return e.endsWith("%")&&Mn(e.slice(0,-1))}function le(e){return $a.test(e)}function hn(e){return Nu.test(e)}const Ou=new Set(["length","size","percentage"]);function Mu(e){return Jn(e,Ou,Ha)}function Pu(e){return Jn(e,"position",Ha)}const Au=new Set(["image","url"]);function Ru(e){return Jn(e,Au,Fu)}function Tu(e){return Jn(e,"",Lu)}function vr(){return!0}function Jn(e,t,r){const o=$a.exec(e);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):r(o[2]):!1}function Iu(e){return _u.test(e)&&!Cu.test(e)}function Ha(){return!1}function Lu(e){return ku.test(e)}function Fu(e){return Eu.test(e)}function zu(){const e=Ee("colors"),t=Ee("spacing"),r=Ee("blur"),o=Ee("brightness"),a=Ee("borderColor"),l=Ee("borderRadius"),f=Ee("borderSpacing"),p=Ee("borderWidth"),g=Ee("contrast"),v=Ee("grayscale"),w=Ee("hueRotate"),N=Ee("invert"),R=Ee("gap"),P=Ee("gradientColorStops"),L=Ee("gradientColorStopPositions"),F=Ee("inset"),z=Ee("margin"),Y=Ee("opacity"),U=Ee("padding"),B=Ee("saturate"),te=Ee("scale"),V=Ee("sepia"),J=Ee("skew"),Z=Ee("space"),oe=Ee("translate"),fe=()=>["auto","contain","none"],se=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto",le,t],ne=()=>[le,t],je=()=>["",en,fn],De=()=>["auto",Mn,le],dt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],st=()=>["solid","dashed","dotted","double","none"],ze=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ve=()=>["start","end","center","between","around","evenly","stretch"],Oe=()=>["","0",le],pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Pe=()=>[Mn,so],Se=()=>[Mn,le];return{cacheSize:500,separator:":",theme:{colors:[vr],spacing:[en,fn],blur:["none","",hn,le],brightness:Pe(),borderColor:[e],borderRadius:["none","","full",hn,le],borderSpacing:ne(),borderWidth:je(),contrast:Pe(),grayscale:Oe(),hueRotate:Se(),invert:Oe(),gap:ne(),gradientColorStops:[e],gradientColorStopPositions:[Du,fn],inset:he(),margin:he(),opacity:Pe(),padding:ne(),saturate:Pe(),scale:Pe(),sepia:Oe(),skew:Se(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",le]}],container:["container"],columns:[{columns:[hn]}],"break-after":[{"break-after":pe()}],"break-before":[{"break-before":pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...dt(),le]}],overflow:[{overflow:se()}],"overflow-x":[{"overflow-x":se()}],"overflow-y":[{"overflow-y":se()}],overscroll:[{overscroll:fe()}],"overscroll-x":[{"overscroll-x":fe()}],"overscroll-y":[{"overscroll-y":fe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[F]}],"inset-x":[{"inset-x":[F]}],"inset-y":[{"inset-y":[F]}],start:[{start:[F]}],end:[{end:[F]}],top:[{top:[F]}],right:[{right:[F]}],bottom:[{bottom:[F]}],left:[{left:[F]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gr,le]}],basis:[{basis:he()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",le]}],grow:[{grow:Oe()}],shrink:[{shrink:Oe()}],order:[{order:["first","last","none",gr,le]}],"grid-cols":[{"grid-cols":[vr]}],"col-start-end":[{col:["auto",{span:["full",gr,le]},le]}],"col-start":[{"col-start":De()}],"col-end":[{"col-end":De()}],"grid-rows":[{"grid-rows":[vr]}],"row-start-end":[{row:["auto",{span:[gr,le]},le]}],"row-start":[{"row-start":De()}],"row-end":[{"row-end":De()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",le]}],gap:[{gap:[R]}],"gap-x":[{"gap-x":[R]}],"gap-y":[{"gap-y":[R]}],"justify-content":[{justify:["normal",...Ve()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ve(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ve(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[U]}],px:[{px:[U]}],py:[{py:[U]}],ps:[{ps:[U]}],pe:[{pe:[U]}],pt:[{pt:[U]}],pr:[{pr:[U]}],pb:[{pb:[U]}],pl:[{pl:[U]}],m:[{m:[z]}],mx:[{mx:[z]}],my:[{my:[z]}],ms:[{ms:[z]}],me:[{me:[z]}],mt:[{mt:[z]}],mr:[{mr:[z]}],mb:[{mb:[z]}],ml:[{ml:[z]}],"space-x":[{"space-x":[Z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",le,t]}],"min-w":[{"min-w":[le,t,"min","max","fit"]}],"max-w":[{"max-w":[le,t,"none","full","min","max","fit","prose",{screen:[hn]},hn]}],h:[{h:[le,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[le,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[le,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[le,t,"auto","min","max","fit"]}],"font-size":[{text:["base",hn,fn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",so]}],"font-family":[{font:[vr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",le]}],"line-clamp":[{"line-clamp":["none",Mn,so]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",en,le]}],"list-image":[{"list-image":["none",le]}],"list-style-type":[{list:["none","disc","decimal",le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[Y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[Y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...st(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",en,fn]}],"underline-offset":[{"underline-offset":["auto",en,le]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...dt(),Pu]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Mu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ru]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[L]}],"gradient-via-pos":[{via:[L]}],"gradient-to-pos":[{to:[L]}],"gradient-from":[{from:[P]}],"gradient-via":[{via:[P]}],"gradient-to":[{to:[P]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[p]}],"border-w-x":[{"border-x":[p]}],"border-w-y":[{"border-y":[p]}],"border-w-s":[{"border-s":[p]}],"border-w-e":[{"border-e":[p]}],"border-w-t":[{"border-t":[p]}],"border-w-r":[{"border-r":[p]}],"border-w-b":[{"border-b":[p]}],"border-w-l":[{"border-l":[p]}],"border-opacity":[{"border-opacity":[Y]}],"border-style":[{border:[...st(),"hidden"]}],"divide-x":[{"divide-x":[p]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[p]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Y]}],"divide-style":[{divide:st()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...st()]}],"outline-offset":[{"outline-offset":[en,le]}],"outline-w":[{outline:[en,fn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:je()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[Y]}],"ring-offset-w":[{"ring-offset":[en,fn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",hn,Tu]}],"shadow-color":[{shadow:[vr]}],opacity:[{opacity:[Y]}],"mix-blend":[{"mix-blend":[...ze(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ze()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[o]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",hn,le]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[w]}],invert:[{invert:[N]}],saturate:[{saturate:[B]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[w]}],"backdrop-invert":[{"backdrop-invert":[N]}],"backdrop-opacity":[{"backdrop-opacity":[Y]}],"backdrop-saturate":[{"backdrop-saturate":[B]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",le]}],duration:[{duration:Se()}],ease:[{ease:["linear","in","out","in-out",le]}],delay:[{delay:Se()}],animate:[{animate:["none","spin","ping","pulse","bounce",le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[te]}],"scale-x":[{"scale-x":[te]}],"scale-y":[{"scale-y":[te]}],rotate:[{rotate:[gr,le]}],"translate-x":[{"translate-x":[oe]}],"translate-y":[{"translate-y":[oe]}],"skew-x":[{"skew-x":[J]}],"skew-y":[{"skew-y":[J]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",le]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[en,fn,so]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const Bu=xu(zu);function Xt(...e){return Bu(cu(e))}let pn=null;async function Ki(){try{const e=_e.states;if(!pn){await Pn.saveNotes(e.notes),await qi(e),pn=JSON.parse(JSON.stringify(e));return}if((e.theme!==pn.theme||e.color!==pn.color||e.selectedNoteId!==pn.selectedNoteId)&&await qi(e),e.notes.length!==pn.notes.length)await Pn.saveNotes(e.notes);else for(const r of e.notes){const o=pn.notes.find(a=>a.id===r.id);(!o||r.title!==o.title||r.content!==o.content||r.updatedAt!==o.updatedAt)&&await Pn.saveNote(r)}pn=JSON.parse(JSON.stringify(e))}catch(e){console.error("Failed to save data:",e)}}async function qi(e){const t={id:1,theme:e.theme,color:e.color,selectedNoteId:e.selectedNoteId};await Pn.saveSettings(t)}async function Ku(){try{await Pn.migrateFromLocalStorage();const e=await Pn.getNotes(),t=await Pn.getSettings(),r={notes:e||[],theme:(t==null?void 0:t.theme)||"system",color:(t==null?void 0:t.color)||"blue",selectedNoteId:(t==null?void 0:t.selectedNoteId)||null};_e.setStates(r)}catch(e){console.error("Failed to load data:",e),_e.setStates({notes:[],theme:"system",color:"blue",selectedNoteId:null})}}function qu(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Wu(...e){return t=>e.forEach(r=>qu(r,t))}var Bs=k.forwardRef((e,t)=>{const{children:r,...o}=e,a=k.Children.toArray(r),l=a.find(Vu);if(l){const f=l.props.children,p=a.map(g=>g===l?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return d.jsx(ks,{...o,ref:t,children:k.isValidElement(f)?k.cloneElement(f,void 0,p):null})}return d.jsx(ks,{...o,ref:t,children:r})});Bs.displayName="Slot";var ks=k.forwardRef((e,t)=>{const{children:r,...o}=e;if(k.isValidElement(r)){const a=Hu(r);return k.cloneElement(r,{...$u(o,r.props),ref:t?Wu(t,a):a})}return k.Children.count(r)>1?k.Children.only(null):null});ks.displayName="SlotClone";var Yu=({children:e})=>d.jsx(d.Fragment,{children:e});function Vu(e){return k.isValidElement(e)&&e.type===Yu}function $u(e,t){const r={...t};for(const o in t){const a=e[o],l=t[o];/^on[A-Z]/.test(o)?a&&l?r[o]=(...p)=>{l(...p),a(...p)}:a&&(r[o]=a):o==="style"?r[o]={...a,...l}:o==="className"&&(r[o]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}function Hu(e){var o,a;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ua(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Ua(e[t]))&&(o&&(o+=" "),o+=r);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function Uu(){for(var e,t,r=0,o="";r<arguments.length;)(e=arguments[r++])&&(t=Ua(e))&&(o&&(o+=" "),o+=t);return o}const Wi=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,Yi=Uu,Xu=(e,t)=>r=>{var o;if((t==null?void 0:t.variants)==null)return Yi(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:l}=t,f=Object.keys(a).map(v=>{const w=r==null?void 0:r[v],N=l==null?void 0:l[v];if(w===null)return null;const R=Wi(w)||Wi(N);return a[v][R]}),p=r&&Object.entries(r).reduce((v,w)=>{let[N,R]=w;return R===void 0||(v[N]=R),v},{}),g=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((v,w)=>{let{class:N,className:R,...P}=w;return Object.entries(P).every(L=>{let[F,z]=L;return Array.isArray(z)?z.includes({...l,...p}[F]):{...l,...p}[F]===z})?[...v,N,R]:v},[]);return Yi(e,f,g,r==null?void 0:r.class,r==null?void 0:r.className)},Gu=Xu("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ye=k.forwardRef(({className:e,variant:t,size:r,asChild:o=!1,...a},l)=>{const f=o?Bs:"button";return d.jsx(f,{className:Xt(Gu({variant:t,size:r,className:e})),ref:l,...a})});ye.displayName="Button";const Ks=k.forwardRef(({className:e,type:t,...r},o)=>d.jsx("input",{type:t,className:Xt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...r}));Ks.displayName="Input";const qs=il,Ze=al,et=cl,He=k.forwardRef(({className:e,sideOffset:t=4,...r},o)=>d.jsx(sl,{children:d.jsx(pa,{ref:o,sideOffset:t,className:Xt("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r})}));He.displayName=pa.displayName;function Qu(e,t){if(e==null)return{};var r={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var Ju=["color"],Zu=k.forwardRef(function(e,t){var r=e.color,o=r===void 0?"currentColor":r,a=Qu(e,Ju);return k.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),k.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))});const Cr=dl,ed=ul,Xa=k.forwardRef(({className:e,...t},r)=>d.jsx(ma,{ref:r,className:Xt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Xa.displayName=ma.displayName;const Un=k.forwardRef(({className:e,children:t,...r},o)=>d.jsxs(ed,{children:[d.jsx(Xa,{}),d.jsxs(ga,{ref:o,className:Xt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,d.jsxs(ll,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(Zu,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Un.displayName=ga.displayName;const Xn=({className:e,...t})=>d.jsx("div",{className:Xt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Xn.displayName="DialogHeader";const Ws=({className:e,...t})=>d.jsx("div",{className:Xt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ws.displayName="DialogFooter";const Gn=k.forwardRef(({className:e,...t},r)=>d.jsx(va,{ref:r,className:Xt("text-lg font-semibold leading-none tracking-tight",e),...t}));Gn.displayName=va.displayName;const bo=k.forwardRef(({className:e,...t},r)=>d.jsx(ya,{ref:r,className:Xt("text-sm text-muted-foreground",e),...t}));bo.displayName=ya.displayName;var td=Gc,nd=Qc,rd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],od=rd.reduce((e,t)=>{const r=k.forwardRef((o,a)=>{const{asChild:l,...f}=o,p=l?Bs:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(p,{...f,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),sd="Separator",Vi="horizontal",id=["horizontal","vertical"],Ga=k.forwardRef((e,t)=>{const{decorative:r,orientation:o=Vi,...a}=e,l=ad(o)?o:Vi,p=r?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return d.jsx(od.div,{"data-orientation":l,...p,...a,ref:t})});Ga.displayName=sd;function ad(e){return id.includes(e)}var Qa=Ga;const xr=k.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...o},a)=>d.jsx(Qa,{ref:a,decorative:r,orientation:t,className:Xt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...o}));xr.displayName=Qa.displayName;const cd=e=>{k.useEffect(()=>{const t=r=>{const o=r.target,a=o&&(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.contentEditable==="true"||o.closest&&o.closest(".ProseMirror")),f=navigator.platform.toUpperCase().indexOf("MAC")>=0?r.metaKey:r.ctrlKey;let p="";f&&(p+="cmd+"),r.shiftKey&&(p+="shift+"),r.altKey&&(p+="alt+"),p+=r.key.toLowerCase();const g=["cmd+b","cmd+shift+i","cmd+shift+s","cmd+1","cmd+2","cmd+3","cmd+shift+l","cmd+shift+o","cmd+shift+c"],v=["cmd+k","cmd+d","cmd+s","cmd+f","alt+arrowup","alt+arrowdown","escape"];if(a){if(!g.includes(p)&&!v.includes(p))return}else if(g.includes(p))return;e[p]&&(r.preventDefault(),e[p]())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])},gt=e=>{const t=navigator.platform.toUpperCase().indexOf("MAC")>=0;return e.split("+").map(o=>{switch(o){case"cmd":return t?"⌘":"Ctrl";case"shift":return t?"⇧":"Shift";case"alt":return t?"⌥":"Alt";default:return o.toUpperCase()}}).join(t?"":"+")},ld=({editor:e})=>e?d.jsx(qs,{children:d.jsxs("div",{className:"border-b border-border p-1.5 sm:p-2 flex flex-wrap items-center gap-0.5 sm:gap-1 overflow-x-auto scrollbar-none",children:[d.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("heading",{level:1})?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),className:"h-8 w-8 sm:h-9 sm:w-auto sm:px-3 text-xs sm:text-sm touch-manipulation",children:d.jsx("span",{className:e.isActive("heading",{level:1})?"text-white":"",children:"H1"})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Heading 1"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+1")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("heading",{level:2})?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:"h-8 w-8 sm:h-9 sm:w-auto sm:px-3 text-xs sm:text-sm touch-manipulation",children:d.jsx("span",{className:e.isActive("heading",{level:2})?"text-white":"",children:"H2"})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Heading 2"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+2")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("heading",{level:3})?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),className:"h-8 w-8 sm:h-9 sm:w-auto sm:px-3 text-xs sm:text-sm touch-manipulation",children:d.jsx("span",{className:e.isActive("heading",{level:3})?"text-white":"",children:"H3"})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Heading 3"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+3")})]})})]})]}),d.jsx(xr,{orientation:"vertical",className:"h-8 sm:h-9 mx-1 flex-shrink-0 self-center"}),d.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("bold")?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleBold().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(ba,{className:`h-3.5 w-3.5 sm:h-4 sm:w-4 ${e.isActive("bold")?"text-white":""}`})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Bold"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+b")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("italic")?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleItalic().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(wa,{className:`h-3.5 w-3.5 sm:h-4 sm:w-4 ${e.isActive("italic")?"text-white":""}`})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Italic"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+shift+i")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("strike")?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleStrike().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(xa,{className:`h-3.5 w-3.5 sm:h-4 sm:w-4 ${e.isActive("strike")?"text-white":""}`})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Strikethrough"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+shift+s")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("code")?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleCode().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(Sa,{className:`h-3.5 w-3.5 sm:h-4 sm:w-4 ${e.isActive("code")?"text-white":""}`})})}),d.jsx(He,{children:d.jsx("span",{className:"font-medium text-white",children:"Inline code"})})]})]}),d.jsx(xr,{orientation:"vertical",className:"h-8 sm:h-9 mx-1 flex-shrink-0 self-center"}),d.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("bulletList")?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleBulletList().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(ja,{className:`h-3.5 w-3.5 sm:h-4 sm:w-4 ${e.isActive("bulletList")?"text-white":""}`})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Bullet list"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+shift+l")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("orderedList")?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleOrderedList().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(Na,{className:`h-3.5 w-3.5 sm:h-4 sm:w-4 ${e.isActive("orderedList")?"text-white":""}`})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Numbered list"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+shift+o")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:e.isActive("blockquote")?"default":"ghost",size:"sm",onClick:()=>e.chain().focus().toggleBlockquote().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(fl,{className:`h-3.5 w-3.5 sm:h-4 sm:w-4 ${e.isActive("blockquote")?"text-white":""}`})})}),d.jsx(He,{children:d.jsx("span",{className:"font-medium text-white",children:"Quote"})})]})]}),d.jsx(xr,{orientation:"vertical",className:"h-8 sm:h-9 mx-1 flex-shrink-0 self-center"}),d.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleCodeBlock().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(hl,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),d.jsx(He,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:"Code block"}),d.jsx("span",{className:"text-xs text-white/80 mt-1",children:gt("cmd+shift+c")})]})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().setHorizontalRule().run(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation",children:d.jsx(pl,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),d.jsx(He,{children:d.jsx("span",{className:"font-medium text-white",children:"Horizontal rule"})})]})]}),d.jsx(xr,{orientation:"vertical",className:"h-8 sm:h-9 mx-1 flex-shrink-0 self-center"}),d.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().undo().run(),disabled:!e.can().undo(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation disabled:opacity-50",children:d.jsx(ml,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),d.jsx(He,{children:d.jsx("span",{className:"font-medium text-white",children:"Undo"})})]}),d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().redo().run(),disabled:!e.can().redo(),className:"h-8 w-8 sm:h-9 sm:w-9 p-1.5 sm:p-2 touch-manipulation disabled:opacity-50",children:d.jsx(gl,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),d.jsx(He,{children:d.jsx("span",{className:"font-medium text-white",children:"Redo"})})]})]})]})}):null,ud=({content:e,onChange:t,placeholder:r="Start writing...",className:o="",onEditorReady:a})=>{const l=Jc({extensions:[Zc,td.configure({placeholder:r}),nd.configure({limit:1e5})],content:e,onUpdate:({editor:f})=>{t(f.getHTML())},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-xl mx-auto focus:outline-none h-full px-3 py-3 sm:px-6 sm:py-4 max-w-none"}}});return Ye.useEffect(()=>{l&&e!==l.getHTML()&&l.commands.setContent(e)},[e,l]),Ye.useEffect(()=>{l&&a&&a(l)},[l,a]),Ye.useEffect(()=>{if(!l)return;const f=p=>{const{command:g,level:v}=p.detail;switch(g){case"toggleBold":l.chain().focus().toggleBold().run();break;case"toggleItalic":l.chain().focus().toggleItalic().run();break;case"toggleStrike":l.chain().focus().toggleStrike().run();break;case"toggleHeading":l.chain().focus().toggleHeading({level:v}).run();break;case"toggleBulletList":l.chain().focus().toggleBulletList().run();break;case"toggleOrderedList":l.chain().focus().toggleOrderedList().run();break}};return window.addEventListener("editorCommand",f),()=>window.removeEventListener("editorCommand",f)},[l]),l?d.jsxs("div",{className:`border border-border rounded-lg bg-background flex flex-col ${o}`,children:[d.jsx(ld,{editor:l}),d.jsx("div",{className:"relative flex-1 cursor-text min-h-0",onClick:()=>l==null?void 0:l.commands.focus(),children:d.jsx(el,{editor:l,className:"h-full"})})]}):null},Ja=6048e5,dd=864e5,io=43200,$i=1440,Hi=Symbol.for("constructDateFrom");function nn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Hi in e?e[Hi](t):e instanceof Date?new e.constructor(t):new Date(t)}function Xe(e,t){return nn(t||e,e)}let fd={};function Ar(){return fd}function kr(e,t){var p,g,v,w;const r=Ar(),o=(t==null?void 0:t.weekStartsOn)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((w=(v=r.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??0,a=Xe(e,t==null?void 0:t.in),l=a.getDay(),f=(l<o?7:0)+l-o;return a.setDate(a.getDate()-f),a.setHours(0,0,0,0),a}function wo(e,t){return kr(e,{...t,weekStartsOn:1})}function Za(e,t){const r=Xe(e,t==null?void 0:t.in),o=r.getFullYear(),a=nn(r,0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);const l=wo(a),f=nn(r,0);f.setFullYear(o,0,4),f.setHours(0,0,0,0);const p=wo(f);return r.getTime()>=l.getTime()?o+1:r.getTime()>=p.getTime()?o:o-1}function xo(e){const t=Xe(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ko(e,...t){const r=nn.bind(null,e||t.find(o=>typeof o=="object"));return t.map(r)}function Ui(e,t){const r=Xe(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function hd(e,t,r){const[o,a]=ko(r==null?void 0:r.in,e,t),l=Ui(o),f=Ui(a),p=+l-xo(l),g=+f-xo(f);return Math.round((p-g)/dd)}function pd(e,t){const r=Za(e,t),o=nn(e,0);return o.setFullYear(r,0,4),o.setHours(0,0,0,0),wo(o)}function mo(e,t){const r=+Xe(e)-+Xe(t);return r<0?-1:r>0?1:r}function md(e){return nn(e,Date.now())}function gd(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function vd(e){return!(!gd(e)&&typeof e!="number"||isNaN(+Xe(e)))}function yd(e,t,r){const[o,a]=ko(r==null?void 0:r.in,e,t),l=o.getFullYear()-a.getFullYear(),f=o.getMonth()-a.getMonth();return l*12+f}function bd(e){return t=>{const o=(e?Math[e]:Math.trunc)(t);return o===0?0:o}}function wd(e,t){return+Xe(e)-+Xe(t)}function xd(e,t){const r=Xe(e,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function Sd(e,t){const r=Xe(e,t==null?void 0:t.in),o=r.getMonth();return r.setFullYear(r.getFullYear(),o+1,0),r.setHours(23,59,59,999),r}function jd(e,t){const r=Xe(e,t==null?void 0:t.in);return+xd(r,t)==+Sd(r,t)}function Nd(e,t,r){const[o,a,l]=ko(r==null?void 0:r.in,e,e,t),f=mo(a,l),p=Math.abs(yd(a,l));if(p<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-f*p);let g=mo(a,l)===-f;jd(o)&&p===1&&mo(o,l)===1&&(g=!1);const v=f*(p-+g);return v===0?0:v}function _d(e,t,r){const o=wd(e,t)/1e3;return bd(r==null?void 0:r.roundingMethod)(o)}function Cd(e,t){const r=Xe(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const kd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ed=(e,t,r)=>{let o;const a=kd[e];return typeof a=="string"?o=a:t===1?o=a.one:o=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+o:o+" ago":o};function as(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Dd={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Od={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Md={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pd={date:as({formats:Dd,defaultWidth:"full"}),time:as({formats:Od,defaultWidth:"full"}),dateTime:as({formats:Md,defaultWidth:"full"})},Ad={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Rd=(e,t,r,o)=>Ad[e];function yr(e){return(t,r)=>{const o=r!=null&&r.context?String(r.context):"standalone";let a;if(o==="formatting"&&e.formattingValues){const f=e.defaultFormattingWidth||e.defaultWidth,p=r!=null&&r.width?String(r.width):f;a=e.formattingValues[p]||e.formattingValues[f]}else{const f=e.defaultWidth,p=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[p]||e.values[f]}const l=e.argumentCallback?e.argumentCallback(t):t;return a[l]}}const Td={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Id={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ld={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fd={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kd=(e,t)=>{const r=Number(e),o=r%100;if(o>20||o<10)switch(o%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},qd={ordinalNumber:Kd,era:yr({values:Td,defaultWidth:"wide"}),quarter:yr({values:Id,defaultWidth:"wide",argumentCallback:e=>e-1}),month:yr({values:Ld,defaultWidth:"wide"}),day:yr({values:Fd,defaultWidth:"wide"}),dayPeriod:yr({values:zd,defaultWidth:"wide",formattingValues:Bd,defaultFormattingWidth:"wide"})};function br(e){return(t,r={})=>{const o=r.width,a=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],l=t.match(a);if(!l)return null;const f=l[0],p=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],g=Array.isArray(p)?Yd(p,N=>N.test(f)):Wd(p,N=>N.test(f));let v;v=e.valueCallback?e.valueCallback(g):g,v=r.valueCallback?r.valueCallback(v):v;const w=t.slice(f.length);return{value:v,rest:w}}}function Wd(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Yd(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Vd(e){return(t,r={})=>{const o=t.match(e.matchPattern);if(!o)return null;const a=o[0],l=t.match(e.parsePattern);if(!l)return null;let f=e.valueCallback?e.valueCallback(l[0]):l[0];f=r.valueCallback?r.valueCallback(f):f;const p=t.slice(a.length);return{value:f,rest:p}}}const $d=/^(\d+)(th|st|nd|rd)?/i,Hd=/\d+/i,Ud={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xd={any:[/^b/i,/^(a|c)/i]},Gd={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qd={any:[/1/i,/2/i,/3/i,/4/i]},Jd={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zd={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ef={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},of={ordinalNumber:Vd({matchPattern:$d,parsePattern:Hd,valueCallback:e=>parseInt(e,10)}),era:br({matchPatterns:Ud,defaultMatchWidth:"wide",parsePatterns:Xd,defaultParseWidth:"any"}),quarter:br({matchPatterns:Gd,defaultMatchWidth:"wide",parsePatterns:Qd,defaultParseWidth:"any",valueCallback:e=>e+1}),month:br({matchPatterns:Jd,defaultMatchWidth:"wide",parsePatterns:Zd,defaultParseWidth:"any"}),day:br({matchPatterns:ef,defaultMatchWidth:"wide",parsePatterns:tf,defaultParseWidth:"any"}),dayPeriod:br({matchPatterns:nf,defaultMatchWidth:"any",parsePatterns:rf,defaultParseWidth:"any"})},ec={code:"en-US",formatDistance:Ed,formatLong:Pd,formatRelative:Rd,localize:qd,match:of,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sf(e,t){const r=Xe(e,t==null?void 0:t.in);return hd(r,Cd(r))+1}function af(e,t){const r=Xe(e,t==null?void 0:t.in),o=+wo(r)-+pd(r);return Math.round(o/Ja)+1}function tc(e,t){var w,N,R,P;const r=Xe(e,t==null?void 0:t.in),o=r.getFullYear(),a=Ar(),l=(t==null?void 0:t.firstWeekContainsDate)??((N=(w=t==null?void 0:t.locale)==null?void 0:w.options)==null?void 0:N.firstWeekContainsDate)??a.firstWeekContainsDate??((P=(R=a.locale)==null?void 0:R.options)==null?void 0:P.firstWeekContainsDate)??1,f=nn((t==null?void 0:t.in)||e,0);f.setFullYear(o+1,0,l),f.setHours(0,0,0,0);const p=kr(f,t),g=nn((t==null?void 0:t.in)||e,0);g.setFullYear(o,0,l),g.setHours(0,0,0,0);const v=kr(g,t);return+r>=+p?o+1:+r>=+v?o:o-1}function cf(e,t){var p,g,v,w;const r=Ar(),o=(t==null?void 0:t.firstWeekContainsDate)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((w=(v=r.locale)==null?void 0:v.options)==null?void 0:w.firstWeekContainsDate)??1,a=tc(e,t),l=nn((t==null?void 0:t.in)||e,0);return l.setFullYear(a,0,o),l.setHours(0,0,0,0),kr(l,t)}function lf(e,t){const r=Xe(e,t==null?void 0:t.in),o=+kr(r,t)-+cf(r,t);return Math.round(o/Ja)+1}function Ne(e,t){const r=e<0?"-":"",o=Math.abs(e).toString().padStart(t,"0");return r+o}const mn={y(e,t){const r=e.getFullYear(),o=r>0?r:1-r;return Ne(t==="yy"?o%100:o,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ne(r+1,2)},d(e,t){return Ne(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ne(e.getHours()%12||12,t.length)},H(e,t){return Ne(e.getHours(),t.length)},m(e,t){return Ne(e.getMinutes(),t.length)},s(e,t){return Ne(e.getSeconds(),t.length)},S(e,t){const r=t.length,o=e.getMilliseconds(),a=Math.trunc(o*Math.pow(10,r-3));return Ne(a,t.length)}},Wn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xi={G:function(e,t,r){const o=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(o,{width:"abbreviated"});case"GGGGG":return r.era(o,{width:"narrow"});case"GGGG":default:return r.era(o,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const o=e.getFullYear(),a=o>0?o:1-o;return r.ordinalNumber(a,{unit:"year"})}return mn.y(e,t)},Y:function(e,t,r,o){const a=tc(e,o),l=a>0?a:1-a;if(t==="YY"){const f=l%100;return Ne(f,2)}return t==="Yo"?r.ordinalNumber(l,{unit:"year"}):Ne(l,t.length)},R:function(e,t){const r=Za(e);return Ne(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ne(r,t.length)},Q:function(e,t,r){const o=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(o);case"QQ":return Ne(o,2);case"Qo":return r.ordinalNumber(o,{unit:"quarter"});case"QQQ":return r.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(o,{width:"wide",context:"formatting"})}},q:function(e,t,r){const o=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(o);case"qq":return Ne(o,2);case"qo":return r.ordinalNumber(o,{unit:"quarter"});case"qqq":return r.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(o,{width:"wide",context:"standalone"})}},M:function(e,t,r){const o=e.getMonth();switch(t){case"M":case"MM":return mn.M(e,t);case"Mo":return r.ordinalNumber(o+1,{unit:"month"});case"MMM":return r.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(o,{width:"wide",context:"formatting"})}},L:function(e,t,r){const o=e.getMonth();switch(t){case"L":return String(o+1);case"LL":return Ne(o+1,2);case"Lo":return r.ordinalNumber(o+1,{unit:"month"});case"LLL":return r.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(o,{width:"wide",context:"standalone"})}},w:function(e,t,r,o){const a=lf(e,o);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Ne(a,t.length)},I:function(e,t,r){const o=af(e);return t==="Io"?r.ordinalNumber(o,{unit:"week"}):Ne(o,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):mn.d(e,t)},D:function(e,t,r){const o=sf(e);return t==="Do"?r.ordinalNumber(o,{unit:"dayOfYear"}):Ne(o,t.length)},E:function(e,t,r){const o=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(o,{width:"short",context:"formatting"});case"EEEE":default:return r.day(o,{width:"wide",context:"formatting"})}},e:function(e,t,r,o){const a=e.getDay(),l=(a-o.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return Ne(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,o){const a=e.getDay(),l=(a-o.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return Ne(l,t.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const o=e.getDay(),a=o===0?7:o;switch(t){case"i":return String(a);case"ii":return Ne(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(o,{width:"short",context:"formatting"});case"iiii":default:return r.day(o,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const o=e.getHours();let a;switch(o===12?a=Wn.noon:o===0?a=Wn.midnight:a=o/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const o=e.getHours();let a;switch(o>=17?a=Wn.evening:o>=12?a=Wn.afternoon:o>=4?a=Wn.morning:a=Wn.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let o=e.getHours()%12;return o===0&&(o=12),r.ordinalNumber(o,{unit:"hour"})}return mn.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):mn.H(e,t)},K:function(e,t,r){const o=e.getHours()%12;return t==="Ko"?r.ordinalNumber(o,{unit:"hour"}):Ne(o,t.length)},k:function(e,t,r){let o=e.getHours();return o===0&&(o=24),t==="ko"?r.ordinalNumber(o,{unit:"hour"}):Ne(o,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):mn.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):mn.s(e,t)},S:function(e,t){return mn.S(e,t)},X:function(e,t,r){const o=e.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return Qi(o);case"XXXX":case"XX":return Dn(o);case"XXXXX":case"XXX":default:return Dn(o,":")}},x:function(e,t,r){const o=e.getTimezoneOffset();switch(t){case"x":return Qi(o);case"xxxx":case"xx":return Dn(o);case"xxxxx":case"xxx":default:return Dn(o,":")}},O:function(e,t,r){const o=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Gi(o,":");case"OOOO":default:return"GMT"+Dn(o,":")}},z:function(e,t,r){const o=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Gi(o,":");case"zzzz":default:return"GMT"+Dn(o,":")}},t:function(e,t,r){const o=Math.trunc(+e/1e3);return Ne(o,t.length)},T:function(e,t,r){return Ne(+e,t.length)}};function Gi(e,t=""){const r=e>0?"-":"+",o=Math.abs(e),a=Math.trunc(o/60),l=o%60;return l===0?r+String(a):r+String(a)+t+Ne(l,2)}function Qi(e,t){return e%60===0?(e>0?"-":"+")+Ne(Math.abs(e)/60,2):Dn(e,t)}function Dn(e,t=""){const r=e>0?"-":"+",o=Math.abs(e),a=Ne(Math.trunc(o/60),2),l=Ne(o%60,2);return r+a+t+l}const Ji=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},nc=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},uf=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],o=r[1],a=r[2];if(!a)return Ji(e,t);let l;switch(o){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"});break}return l.replace("{{date}}",Ji(o,t)).replace("{{time}}",nc(a,t))},df={p:nc,P:uf},ff=/^D+$/,hf=/^Y+$/,pf=["D","DD","YY","YYYY"];function mf(e){return ff.test(e)}function gf(e){return hf.test(e)}function vf(e,t,r){const o=yf(e,t,r);if(console.warn(o),pf.includes(e))throw new RangeError(o)}function yf(e,t,r){const o=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${o} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xf=/^'([^]*?)'?$/,Sf=/''/g,jf=/[a-zA-Z]/;function Nf(e,t,r){var w,N,R,P;const o=Ar(),a=o.locale??ec,l=o.firstWeekContainsDate??((N=(w=o.locale)==null?void 0:w.options)==null?void 0:N.firstWeekContainsDate)??1,f=o.weekStartsOn??((P=(R=o.locale)==null?void 0:R.options)==null?void 0:P.weekStartsOn)??0,p=Xe(e,r==null?void 0:r.in);if(!vd(p))throw new RangeError("Invalid time value");let g=t.match(wf).map(L=>{const F=L[0];if(F==="p"||F==="P"){const z=df[F];return z(L,a.formatLong)}return L}).join("").match(bf).map(L=>{if(L==="''")return{isToken:!1,value:"'"};const F=L[0];if(F==="'")return{isToken:!1,value:_f(L)};if(Xi[F])return{isToken:!0,value:L};if(F.match(jf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return{isToken:!1,value:L}});a.localize.preprocessor&&(g=a.localize.preprocessor(p,g));const v={firstWeekContainsDate:l,weekStartsOn:f,locale:a};return g.map(L=>{if(!L.isToken)return L.value;const F=L.value;(gf(F)||mf(F))&&vf(F,t,String(e));const z=Xi[F[0]];return z(p,F,a.localize,v)}).join("")}function _f(e){const t=e.match(xf);return t?t[1].replace(Sf,"'"):e}function Cf(e,t,r){const o=Ar(),a=(r==null?void 0:r.locale)??o.locale??ec,l=2520,f=mo(e,t);if(isNaN(f))throw new RangeError("Invalid time value");const p=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:f}),[g,v]=ko(r==null?void 0:r.in,...f>0?[t,e]:[e,t]),w=_d(v,g),N=(xo(v)-xo(g))/1e3,R=Math.round((w-N)/60);let P;if(R<2)return r!=null&&r.includeSeconds?w<5?a.formatDistance("lessThanXSeconds",5,p):w<10?a.formatDistance("lessThanXSeconds",10,p):w<20?a.formatDistance("lessThanXSeconds",20,p):w<40?a.formatDistance("halfAMinute",0,p):w<60?a.formatDistance("lessThanXMinutes",1,p):a.formatDistance("xMinutes",1,p):R===0?a.formatDistance("lessThanXMinutes",1,p):a.formatDistance("xMinutes",R,p);if(R<45)return a.formatDistance("xMinutes",R,p);if(R<90)return a.formatDistance("aboutXHours",1,p);if(R<$i){const L=Math.round(R/60);return a.formatDistance("aboutXHours",L,p)}else{if(R<l)return a.formatDistance("xDays",1,p);if(R<io){const L=Math.round(R/$i);return a.formatDistance("xDays",L,p)}else if(R<io*2)return P=Math.round(R/io),a.formatDistance("aboutXMonths",P,p)}if(P=Nd(v,g),P<12){const L=Math.round(R/io);return a.formatDistance("xMonths",L,p)}else{const L=P%12,F=Math.trunc(P/12);return L<3?a.formatDistance("aboutXYears",F,p):L<9?a.formatDistance("overXYears",F,p):a.formatDistance("almostXYears",F+1,p)}}function kf(e,t){return Cf(e,md(e),t)}const Es=({children:e,title:t,description:r,shortcut:o,side:a="top",className:l=""})=>d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:e}),d.jsx(He,{side:a,className:l,children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:t}),r&&d.jsx("span",{className:"text-xs text-white mt-1",children:r}),o&&d.jsx("span",{className:"text-xs text-white mt-1",children:gt(o)})]})})]}),Zi=({children:e,title:t,side:r="top",className:o=""})=>d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:e}),d.jsx(He,{side:r,className:o,children:d.jsx("span",{className:"font-medium text-white",children:t})})]}),Ef=()=>{const e=Co(()=>_e.states),t=e.notes.find(z=>z.id===e.selectedNoteId),[r,o]=k.useState(!1),[a,l]=k.useState(""),[f,p]=k.useState(null),[g,v]=k.useState(!1);if(k.useEffect(()=>{e.theme==="dark"?document.documentElement.classList.add("dark"):e.theme==="light"?document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e.theme]),k.useEffect(()=>{e.color&&document.documentElement.setAttribute("data-color",e.color)},[e.color]),k.useEffect(()=>{const z=()=>{t&&v(!0)};return window.addEventListener("triggerDeleteDialog",z),()=>window.removeEventListener("triggerDeleteDialog",z)},[t]),k.useEffect(()=>{const z=Y=>{g&&(Y.key==="Enter"?(Y.preventDefault(),L()):Y.key==="Escape"&&(Y.preventDefault(),v(!1)))};if(g)return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[g,t]),k.useEffect(()=>{t&&f&&setTimeout(()=>{try{if(f.commands&&f.commands.focus)f.commands.focus();else{const z=document.querySelector(".ProseMirror");z&&z.focus()}}catch(z){console.log("Could not focus editor:",z)}},100)},[t==null?void 0:t.id,f]),!t)return d.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[d.jsx("div",{className:"border-b border-border p-4 bg-background",children:d.jsx("h1",{className:"text-xl font-semibold text-center",children:"9Notes"})}),d.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:d.jsxs("div",{className:"text-center max-w-md mx-auto",children:[d.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 mx-auto mb-4 sm:mb-6 bg-primary/10 rounded-2xl flex items-center justify-center",children:d.jsx(lo,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary"})}),d.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 sm:mb-3",children:"Welcome to 9Notes"}),d.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mb-6 leading-relaxed",children:"Tap the menu to view your notes, or create your first note to get started."}),d.jsxs(ye,{onClick:()=>{const z=_e.createNote();_e.selectNote(z)},className:"w-full sm:w-auto",size:"lg",children:[d.jsx(lo,{className:"w-4 h-4 mr-2"}),"Create New Note",d.jsx("span",{className:"ml-2 text-xs text-white/80",children:gt("cmd+k")})]})]})}),d.jsx("div",{className:"border-t border-border px-4 py-3 bg-muted/20",children:d.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"Start writing your thoughts and ideas"})})]});const w=()=>{l(t.title),o(!0)},N=()=>{a.trim()&&_e.updateNote(t.id,{title:a.trim()}),o(!1)},R=z=>{_e.updateNote(t.id,{content:z})},P=()=>{v(!0)},L=()=>{_e.deleteNote(t.id),v(!1)},F=z=>{if(!z)return"";const Y=document.createElement("div");return Y.innerHTML=z,Y.textContent||Y.innerText||""};return d.jsxs(qs,{children:[d.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[d.jsx("div",{className:"border-b border-border p-2 flex-shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1 mr-4",children:[r?d.jsx(Ks,{value:a,onChange:z=>l(z.target.value),onBlur:N,onKeyDown:z=>{z.key==="Enter"&&N(),z.key==="Escape"&&(o(!1),l(""))},className:"text-base font-semibold border-0 px-0 focus-visible:ring-0",autoFocus:!0}):d.jsxs("div",{className:"flex items-center group cursor-pointer",onClick:w,children:[d.jsx("h1",{className:"text-base font-semibold hover:text-muted-foreground transition-colors truncate",children:t.title||"Untitled Note"}),d.jsx(lo,{className:"h-3 w-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground"})]}),d.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[d.jsxs("span",{children:["Updated ",kf(t.updatedAt,{addSuffix:!0})]}),d.jsxs("span",{children:["Created ",Nf(t.createdAt,"MMM d, yyyy")]})]})]}),d.jsx("div",{className:"flex items-center gap-1",children:d.jsx(Es,{title:"Delete note",shortcut:"cmd+d",children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:P,className:"text-red-500 hover:text-red-600 p-1.5 touch-manipulation",children:d.jsx(vl,{className:"h-4 w-4"})})})})]})}),d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsx(ud,{content:t.content,onChange:R,placeholder:"Start writing your note...",className:"h-full",onEditorReady:p})}),d.jsx("div",{className:"border-t border-border px-4 py-3 bg-muted/20 flex-shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{children:"Auto-saved"}),d.jsxs("span",{children:["Words: ",F(t.content).split(/\s+/).filter(z=>z.length>0).length]})]}),d.jsx("div",{children:d.jsxs("span",{children:[F(t.content).length,"/100k"]})})]})})]}),d.jsx(Cr,{open:g,onOpenChange:v,children:d.jsxs(Un,{className:"w-[95vw] max-w-md sm:w-auto",children:[d.jsxs(Xn,{children:[d.jsx(Gn,{children:"Delete Note"}),d.jsxs(bo,{children:['Are you sure you want to delete "',t.title||"Untitled",'"? This action cannot be undone.']})]}),d.jsxs(Ws,{className:"flex flex-col sm:flex-row gap-2",children:[d.jsx("div",{className:"text-xs text-muted-foreground mb-2 sm:mb-0 sm:mr-auto",children:"Press Enter to delete, Escape to cancel"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(ye,{variant:"outline",onClick:()=>v(!1),children:["Cancel",d.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Esc"})]}),d.jsxs(ye,{variant:"destructive",onClick:L,autoFocus:!0,children:["Delete",d.jsx("span",{className:"ml-2 text-xs text-white",children:"Enter"})]})]})]})]})})]})};function Df(){const[e,t]=k.useState(null),[r,o]=k.useState(!1),[a,l]=k.useState(!1);return k.useEffect(()=>{const p=window.matchMedia("(display-mode: standalone)").matches,g="standalone"in window.navigator&&window.navigator.standalone;l(p||g);const w=R=>{R.preventDefault(),t(R),o(!0)},N=()=>{l(!0),o(!1),t(null)};return window.addEventListener("beforeinstallprompt",w),window.addEventListener("appinstalled",N),()=>{window.removeEventListener("beforeinstallprompt",w),window.removeEventListener("appinstalled",N)}},[]),{isInstallable:r,isInstalled:a,installApp:async()=>{if(!e)return!1;try{await e.prompt();const{outcome:p}=await e.userChoice;return p==="accepted"?(l(!0),o(!1),t(null),!0):!1}catch(p){return console.error("Error installing app:",p),!1}}}}function Of(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.useMemo(()=>o=>{t.forEach(a=>a(o))},t)}const Eo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zn(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ys(e){return"nodeType"in e}function yt(e){var t,r;return e?Zn(e)?e:Ys(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Vs(e){const{Document:t}=yt(e);return e instanceof t}function Rr(e){return Zn(e)?!1:e instanceof yt(e).HTMLElement}function rc(e){return e instanceof yt(e).SVGElement}function er(e){return e?Zn(e)?e.document:Ys(e)?Vs(e)?e:Rr(e)||rc(e)?e.ownerDocument:document:document:document}const Ut=Eo?k.useLayoutEffect:k.useEffect;function $s(e){const t=k.useRef(e);return Ut(()=>{t.current=e}),k.useCallback(function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}function Mf(){const e=k.useRef(null),t=k.useCallback((o,a)=>{e.current=setInterval(o,a)},[]),r=k.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Er(e,t){t===void 0&&(t=[e]);const r=k.useRef(e);return Ut(()=>{r.current!==e&&(r.current=e)},t),r}function Tr(e,t){const r=k.useRef();return k.useMemo(()=>{const o=e(r.current);return r.current=o,o},[...t])}function So(e){const t=$s(e),r=k.useRef(null),o=k.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,o]}function Ds(e){const t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current}let cs={};function Ir(e,t){return k.useMemo(()=>{if(t)return t;const r=cs[e]==null?0:cs[e]+1;return cs[e]=r,e+"-"+r},[e,t])}function oc(e){return function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((l,f)=>{const p=Object.entries(f);for(const[g,v]of p){const w=l[g];w!=null&&(l[g]=w+e*v)}return l},{...t})}}const Hn=oc(1),Dr=oc(-1);function Pf(e){return"clientX"in e&&"clientY"in e}function Hs(e){if(!e)return!1;const{KeyboardEvent:t}=yt(e.target);return t&&e instanceof t}function Af(e){if(!e)return!1;const{TouchEvent:t}=yt(e.target);return t&&e instanceof t}function Os(e){if(Af(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return Pf(e)?{x:e.clientX,y:e.clientY}:null}const Or=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Or.Translate.toString(e),Or.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:o}=e;return t+" "+r+"ms "+o}}}),ea="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Rf(e){return e.matches(ea)?e:e.querySelector(ea)}const Tf={display:"none"};function If(e){let{id:t,value:r}=e;return Ye.createElement("div",{id:t,style:Tf},r)}function Lf(e){let{id:t,announcement:r,ariaLiveType:o="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ye.createElement("div",{id:t,style:a,role:"status","aria-live":o,"aria-atomic":!0},r)}function Ff(){const[e,t]=k.useState("");return{announce:k.useCallback(o=>{o!=null&&t(o)},[]),announcement:e}}const sc=k.createContext(null);function zf(e){const t=k.useContext(sc);k.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Bf(){const[e]=k.useState(()=>new Set),t=k.useCallback(o=>(e.add(o),()=>e.delete(o)),[e]);return[k.useCallback(o=>{let{type:a,event:l}=o;e.forEach(f=>{var p;return(p=f[a])==null?void 0:p.call(f,l)})},[e]),t]}const Kf={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qf={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Wf(e){let{announcements:t=qf,container:r,hiddenTextDescribedById:o,screenReaderInstructions:a=Kf}=e;const{announce:l,announcement:f}=Ff(),p=Ir("DndLiveRegion"),[g,v]=k.useState(!1);if(k.useEffect(()=>{v(!0)},[]),zf(k.useMemo(()=>({onDragStart(N){let{active:R}=N;l(t.onDragStart({active:R}))},onDragMove(N){let{active:R,over:P}=N;t.onDragMove&&l(t.onDragMove({active:R,over:P}))},onDragOver(N){let{active:R,over:P}=N;l(t.onDragOver({active:R,over:P}))},onDragEnd(N){let{active:R,over:P}=N;l(t.onDragEnd({active:R,over:P}))},onDragCancel(N){let{active:R,over:P}=N;l(t.onDragCancel({active:R,over:P}))}}),[l,t])),!g)return null;const w=Ye.createElement(Ye.Fragment,null,Ye.createElement(If,{id:o,value:a.draggable}),Ye.createElement(Lf,{id:p,announcement:f}));return r?Vn.createPortal(w,r):w}var We;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(We||(We={}));function jo(){}function ta(e,t){return k.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Yf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.useMemo(()=>[...t].filter(o=>o!=null),[...t])}const Lt=Object.freeze({x:0,y:0});function ic(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ac(e,t){let{data:{value:r}}=e,{data:{value:o}}=t;return r-o}function Vf(e,t){let{data:{value:r}}=e,{data:{value:o}}=t;return o-r}function na(e){let{left:t,top:r,height:o,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+o},{x:t+a,y:r+o}]}function cc(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function ra(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const $f=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:o}=e;const a=ra(t,t.left,t.top),l=[];for(const f of o){const{id:p}=f,g=r.get(p);if(g){const v=ic(ra(g),a);l.push({id:p,data:{droppableContainer:f,value:v}})}}return l.sort(ac)},Hf=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:o}=e;const a=na(t),l=[];for(const f of o){const{id:p}=f,g=r.get(p);if(g){const v=na(g),w=a.reduce((R,P,L)=>R+ic(v[L],P),0),N=Number((w/4).toFixed(4));l.push({id:p,data:{droppableContainer:f,value:N}})}}return l.sort(ac)};function Uf(e,t){const r=Math.max(t.top,e.top),o=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),f=a-o,p=l-r;if(o<a&&r<l){const g=t.width*t.height,v=e.width*e.height,w=f*p,N=w/(g+v-w);return Number(N.toFixed(4))}return 0}const Xf=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:o}=e;const a=[];for(const l of o){const{id:f}=l,p=r.get(f);if(p){const g=Uf(p,t);g>0&&a.push({id:f,data:{droppableContainer:l,value:g}})}}return a.sort(Vf)};function Gf(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function lc(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Lt}function Qf(e){return function(r){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return a.reduce((f,p)=>({...f,top:f.top+e*p.y,bottom:f.bottom+e*p.y,left:f.left+e*p.x,right:f.right+e*p.x}),{...r})}}const Jf=Qf(1);function Zf(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function eh(e,t,r){const o=Zf(t);if(!o)return e;const{scaleX:a,scaleY:l,x:f,y:p}=o,g=e.left-f-(1-a)*parseFloat(r),v=e.top-p-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),w=a?e.width/a:e.width,N=l?e.height/l:e.height;return{width:w,height:N,top:v,right:g+w,bottom:v+N,left:g}}const th={ignoreTransform:!1};function tr(e,t){t===void 0&&(t=th);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:v,transformOrigin:w}=yt(e).getComputedStyle(e);v&&(r=eh(r,v,w))}const{top:o,left:a,width:l,height:f,bottom:p,right:g}=r;return{top:o,left:a,width:l,height:f,bottom:p,right:g}}function oa(e){return tr(e,{ignoreTransform:!0})}function nh(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function rh(e,t){return t===void 0&&(t=yt(e).getComputedStyle(e)),t.position==="fixed"}function oh(e,t){t===void 0&&(t=yt(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=t[a];return typeof l=="string"?r.test(l):!1})}function Do(e,t){const r=[];function o(a){if(t!=null&&r.length>=t||!a)return r;if(Vs(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Rr(a)||rc(a)||r.includes(a))return r;const l=yt(e).getComputedStyle(a);return a!==e&&oh(a,l)&&r.push(a),rh(a,l)?r:o(a.parentNode)}return e?o(e):r}function uc(e){const[t]=Do(e,1);return t??null}function ls(e){return!Eo||!e?null:Zn(e)?e:Ys(e)?Vs(e)||e===er(e).scrollingElement?window:Rr(e)?e:null:null}function dc(e){return Zn(e)?e.scrollX:e.scrollLeft}function fc(e){return Zn(e)?e.scrollY:e.scrollTop}function Ms(e){return{x:dc(e),y:fc(e)}}var Ue;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ue||(Ue={}));function hc(e){return!Eo||!e?!1:e===document.scrollingElement}function pc(e){const t={x:0,y:0},r=hc(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},o={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,f=e.scrollTop>=o.y,p=e.scrollLeft>=o.x;return{isTop:a,isLeft:l,isBottom:f,isRight:p,maxScroll:o,minScroll:t}}const sh={x:.2,y:.2};function ih(e,t,r,o,a){let{top:l,left:f,right:p,bottom:g}=r;o===void 0&&(o=10),a===void 0&&(a=sh);const{isTop:v,isBottom:w,isLeft:N,isRight:R}=pc(e),P={x:0,y:0},L={x:0,y:0},F={height:t.height*a.y,width:t.width*a.x};return!v&&l<=t.top+F.height?(P.y=Ue.Backward,L.y=o*Math.abs((t.top+F.height-l)/F.height)):!w&&g>=t.bottom-F.height&&(P.y=Ue.Forward,L.y=o*Math.abs((t.bottom-F.height-g)/F.height)),!R&&p>=t.right-F.width?(P.x=Ue.Forward,L.x=o*Math.abs((t.right-F.width-p)/F.width)):!N&&f<=t.left+F.width&&(P.x=Ue.Backward,L.x=o*Math.abs((t.left+F.width-f)/F.width)),{direction:P,speed:L}}function ah(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:f}=window;return{top:0,left:0,right:l,bottom:f,width:l,height:f}}const{top:t,left:r,right:o,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:o,bottom:a,width:e.clientWidth,height:e.clientHeight}}function mc(e){return e.reduce((t,r)=>Hn(t,Ms(r)),Lt)}function ch(e){return e.reduce((t,r)=>t+dc(r),0)}function lh(e){return e.reduce((t,r)=>t+fc(r),0)}function uh(e,t){if(t===void 0&&(t=tr),!e)return;const{top:r,left:o,bottom:a,right:l}=t(e);uc(e)&&(a<=0||l<=0||r>=window.innerHeight||o>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const dh=[["x",["left","right"],ch],["y",["top","bottom"],lh]];class Us{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=Do(r),a=mc(o);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,f,p]of dh)for(const g of f)Object.defineProperty(this,g,{get:()=>{const v=p(o),w=a[l]-v;return this.rect[g]+w},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Sr{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...r)})},this.target=t}add(t,r,o){var a;(a=this.target)==null||a.addEventListener(t,r,o),this.listeners.push([t,r,o])}}function fh(e){const{EventTarget:t}=yt(e);return e instanceof t?e:er(e)}function us(e,t){const r=Math.abs(e.x),o=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+o**2)>t:"x"in t&&"y"in t?r>t.x&&o>t.y:"x"in t?r>t.x:"y"in t?o>t.y:!1}var Pt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Pt||(Pt={}));function sa(e){e.preventDefault()}function hh(e){e.stopPropagation()}var be;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(be||(be={}));const gc={start:[be.Space,be.Enter],cancel:[be.Esc],end:[be.Space,be.Enter,be.Tab]},ph=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case be.Right:return{...r,x:r.x+25};case be.Left:return{...r,x:r.x-25};case be.Down:return{...r,y:r.y+25};case be.Up:return{...r,y:r.y-25}}};class Xs{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Sr(er(r)),this.windowListeners=new Sr(yt(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pt.Resize,this.handleCancel),this.windowListeners.add(Pt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,o=t.node.current;o&&uh(o),r(Lt)}handleKeyDown(t){if(Hs(t)){const{active:r,context:o,options:a}=this.props,{keyboardCodes:l=gc,coordinateGetter:f=ph,scrollBehavior:p="smooth"}=a,{code:g}=t;if(l.end.includes(g)){this.handleEnd(t);return}if(l.cancel.includes(g)){this.handleCancel(t);return}const{collisionRect:v}=o.current,w=v?{x:v.left,y:v.top}:Lt;this.referenceCoordinates||(this.referenceCoordinates=w);const N=f(t,{active:r,context:o.current,currentCoordinates:w});if(N){const R=Dr(N,w),P={x:0,y:0},{scrollableAncestors:L}=o.current;for(const F of L){const z=t.code,{isTop:Y,isRight:U,isLeft:B,isBottom:te,maxScroll:V,minScroll:J}=pc(F),Z=ah(F),oe={x:Math.min(z===be.Right?Z.right-Z.width/2:Z.right,Math.max(z===be.Right?Z.left:Z.left+Z.width/2,N.x)),y:Math.min(z===be.Down?Z.bottom-Z.height/2:Z.bottom,Math.max(z===be.Down?Z.top:Z.top+Z.height/2,N.y))},fe=z===be.Right&&!U||z===be.Left&&!B,se=z===be.Down&&!te||z===be.Up&&!Y;if(fe&&oe.x!==N.x){const he=F.scrollLeft+R.x,ne=z===be.Right&&he<=V.x||z===be.Left&&he>=J.x;if(ne&&!R.y){F.scrollTo({left:he,behavior:p});return}ne?P.x=F.scrollLeft-he:P.x=z===be.Right?F.scrollLeft-V.x:F.scrollLeft-J.x,P.x&&F.scrollBy({left:-P.x,behavior:p});break}else if(se&&oe.y!==N.y){const he=F.scrollTop+R.y,ne=z===be.Down&&he<=V.y||z===be.Up&&he>=J.y;if(ne&&!R.x){F.scrollTo({top:he,behavior:p});return}ne?P.y=F.scrollTop-he:P.y=z===be.Down?F.scrollTop-V.y:F.scrollTop-J.y,P.y&&F.scrollBy({top:-P.y,behavior:p});break}}this.handleMove(t,Hn(Dr(N,this.referenceCoordinates),P))}}}handleMove(t,r){const{onMove:o}=this.props;t.preventDefault(),o(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Xs.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:o=gc,onActivation:a}=t,{active:l}=r;const{code:f}=e.nativeEvent;if(o.start.includes(f)){const p=l.activatorNode.current;return p&&e.target!==p?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function ia(e){return!!(e&&"distance"in e)}function aa(e){return!!(e&&"delay"in e)}class Gs{constructor(t,r,o){var a;o===void 0&&(o=fh(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:l}=t,{target:f}=l;this.props=t,this.events=r,this.document=er(f),this.documentListeners=new Sr(this.document),this.listeners=new Sr(o),this.windowListeners=new Sr(yt(f)),this.initialCoordinates=(a=Os(l))!=null?a:Lt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:o}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Pt.Resize,this.handleCancel),this.windowListeners.add(Pt.DragStart,sa),this.windowListeners.add(Pt.VisibilityChange,this.handleCancel),this.windowListeners.add(Pt.ContextMenu,sa),this.documentListeners.add(Pt.Keydown,this.handleKeydown),r){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(aa(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(ia(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:o,onPending:a}=this.props;a(o,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Pt.Click,hh,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pt.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:o,initialCoordinates:a,props:l}=this,{onMove:f,options:{activationConstraint:p}}=l;if(!a)return;const g=(r=Os(t))!=null?r:Lt,v=Dr(a,g);if(!o&&p){if(ia(p)){if(p.tolerance!=null&&us(v,p.tolerance))return this.handleCancel();if(us(v,p.distance))return this.handleStart()}if(aa(p)&&us(v,p.tolerance))return this.handleCancel();this.handlePending(p,v);return}t.cancelable&&t.preventDefault(),f(g)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===be.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const mh={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Qs extends Gs{constructor(t){const{event:r}=t,o=er(r.target);super(t,mh,o)}}Qs.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:o}=t;return!r.isPrimary||r.button!==0?!1:(o==null||o({event:r}),!0)}}];const gh={move:{name:"mousemove"},end:{name:"mouseup"}};var Ps;(function(e){e[e.RightClick=2]="RightClick"})(Ps||(Ps={}));class vh extends Gs{constructor(t){super(t,gh,er(t.event.target))}}vh.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:o}=t;return r.button===Ps.RightClick?!1:(o==null||o({event:r}),!0)}}];const ds={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yh extends Gs{constructor(t){super(t,ds)}static setup(){return window.addEventListener(ds.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ds.move.name,t)};function t(){}}}yh.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:o}=t;const{touches:a}=r;return a.length>1?!1:(o==null||o({event:r}),!0)}}];var jr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(jr||(jr={}));var No;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(No||(No={}));function bh(e){let{acceleration:t,activator:r=jr.Pointer,canScroll:o,draggingRect:a,enabled:l,interval:f=5,order:p=No.TreeOrder,pointerCoordinates:g,scrollableAncestors:v,scrollableAncestorRects:w,delta:N,threshold:R}=e;const P=xh({delta:N,disabled:!l}),[L,F]=Mf(),z=k.useRef({x:0,y:0}),Y=k.useRef({x:0,y:0}),U=k.useMemo(()=>{switch(r){case jr.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case jr.DraggableRect:return a}},[r,a,g]),B=k.useRef(null),te=k.useCallback(()=>{const J=B.current;if(!J)return;const Z=z.current.x*Y.current.x,oe=z.current.y*Y.current.y;J.scrollBy(Z,oe)},[]),V=k.useMemo(()=>p===No.TreeOrder?[...v].reverse():v,[p,v]);k.useEffect(()=>{if(!l||!v.length||!U){F();return}for(const J of V){if((o==null?void 0:o(J))===!1)continue;const Z=v.indexOf(J),oe=w[Z];if(!oe)continue;const{direction:fe,speed:se}=ih(J,oe,U,t,R);for(const he of["x","y"])P[he][fe[he]]||(se[he]=0,fe[he]=0);if(se.x>0||se.y>0){F(),B.current=J,L(te,f),z.current=se,Y.current=fe;return}}z.current={x:0,y:0},Y.current={x:0,y:0},F()},[t,te,o,F,l,f,JSON.stringify(U),JSON.stringify(P),L,v,V,w,JSON.stringify(R)])}const wh={x:{[Ue.Backward]:!1,[Ue.Forward]:!1},y:{[Ue.Backward]:!1,[Ue.Forward]:!1}};function xh(e){let{delta:t,disabled:r}=e;const o=Ds(t);return Tr(a=>{if(r||!o||!a)return wh;const l={x:Math.sign(t.x-o.x),y:Math.sign(t.y-o.y)};return{x:{[Ue.Backward]:a.x[Ue.Backward]||l.x===-1,[Ue.Forward]:a.x[Ue.Forward]||l.x===1},y:{[Ue.Backward]:a.y[Ue.Backward]||l.y===-1,[Ue.Forward]:a.y[Ue.Forward]||l.y===1}}},[r,t,o])}function Sh(e,t){const r=t!=null?e.get(t):void 0,o=r?r.node.current:null;return Tr(a=>{var l;return t==null?null:(l=o??a)!=null?l:null},[o,t])}function jh(e,t){return k.useMemo(()=>e.reduce((r,o)=>{const{sensor:a}=o,l=a.activators.map(f=>({eventName:f.eventName,handler:t(f.handler,o)}));return[...r,...l]},[]),[e,t])}var Mr;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Mr||(Mr={}));var As;(function(e){e.Optimized="optimized"})(As||(As={}));const ca=new Map;function Nh(e,t){let{dragging:r,dependencies:o,config:a}=t;const[l,f]=k.useState(null),{frequency:p,measure:g,strategy:v}=a,w=k.useRef(e),N=z(),R=Er(N),P=k.useCallback(function(Y){Y===void 0&&(Y=[]),!R.current&&f(U=>U===null?Y:U.concat(Y.filter(B=>!U.includes(B))))},[R]),L=k.useRef(null),F=Tr(Y=>{if(N&&!r)return ca;if(!Y||Y===ca||w.current!==e||l!=null){const U=new Map;for(let B of e){if(!B)continue;if(l&&l.length>0&&!l.includes(B.id)&&B.rect.current){U.set(B.id,B.rect.current);continue}const te=B.node.current,V=te?new Us(g(te),te):null;B.rect.current=V,V&&U.set(B.id,V)}return U}return Y},[e,l,r,N,g]);return k.useEffect(()=>{w.current=e},[e]),k.useEffect(()=>{N||P()},[r,N]),k.useEffect(()=>{l&&l.length>0&&f(null)},[JSON.stringify(l)]),k.useEffect(()=>{N||typeof p!="number"||L.current!==null||(L.current=setTimeout(()=>{P(),L.current=null},p))},[p,N,P,...o]),{droppableRects:F,measureDroppableContainers:P,measuringScheduled:l!=null};function z(){switch(v){case Mr.Always:return!1;case Mr.BeforeDragging:return r;default:return!r}}}function vc(e,t){return Tr(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function _h(e,t){return vc(e,t)}function Ch(e){let{callback:t,disabled:r}=e;const o=$s(t),a=k.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(o)},[o,r]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Oo(e){let{callback:t,disabled:r}=e;const o=$s(t),a=k.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(o)},[r]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function kh(e){return new Us(tr(e),e)}function la(e,t,r){t===void 0&&(t=kh);const[o,a]=k.useState(null);function l(){a(g=>{if(!e)return null;if(e.isConnected===!1){var v;return(v=g??r)!=null?v:null}const w=t(e);return JSON.stringify(g)===JSON.stringify(w)?g:w})}const f=Ch({callback(g){if(e)for(const v of g){const{type:w,target:N}=v;if(w==="childList"&&N instanceof HTMLElement&&N.contains(e)){l();break}}}}),p=Oo({callback:l});return Ut(()=>{l(),e?(p==null||p.observe(e),f==null||f.observe(document.body,{childList:!0,subtree:!0})):(p==null||p.disconnect(),f==null||f.disconnect())},[e]),o}function Eh(e){const t=vc(e);return lc(e,t)}const ua=[];function Dh(e){const t=k.useRef(e),r=Tr(o=>e?o&&o!==ua&&e&&t.current&&e.parentNode===t.current.parentNode?o:Do(e):ua,[e]);return k.useEffect(()=>{t.current=e},[e]),r}function Oh(e){const[t,r]=k.useState(null),o=k.useRef(e),a=k.useCallback(l=>{const f=ls(l.target);f&&r(p=>p?(p.set(f,Ms(f)),new Map(p)):null)},[]);return k.useEffect(()=>{const l=o.current;if(e!==l){f(l);const p=e.map(g=>{const v=ls(g);return v?(v.addEventListener("scroll",a,{passive:!0}),[v,Ms(v)]):null}).filter(g=>g!=null);r(p.length?new Map(p):null),o.current=e}return()=>{f(e),f(l)};function f(p){p.forEach(g=>{const v=ls(g);v==null||v.removeEventListener("scroll",a)})}},[a,e]),k.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,f)=>Hn(l,f),Lt):mc(e):Lt,[e,t])}function da(e,t){t===void 0&&(t=[]);const r=k.useRef(null);return k.useEffect(()=>{r.current=null},t),k.useEffect(()=>{const o=e!==Lt;o&&!r.current&&(r.current=e),!o&&r.current&&(r.current=null)},[e]),r.current?Dr(e,r.current):Lt}function Mh(e){k.useEffect(()=>{if(!Eo)return;const t=e.map(r=>{let{sensor:o}=r;return o.setup==null?void 0:o.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function Ph(e,t){return k.useMemo(()=>e.reduce((r,o)=>{let{eventName:a,handler:l}=o;return r[a]=f=>{l(f,t)},r},{}),[e,t])}function yc(e){return k.useMemo(()=>e?nh(e):null,[e])}const fa=[];function Ah(e,t){t===void 0&&(t=tr);const[r]=e,o=yc(r?yt(r):null),[a,l]=k.useState(fa);function f(){l(()=>e.length?e.map(g=>hc(g)?o:new Us(t(g),g)):fa)}const p=Oo({callback:f});return Ut(()=>{p==null||p.disconnect(),f(),e.forEach(g=>p==null?void 0:p.observe(g))},[e]),a}function Rh(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Rr(t)?t:e}function Th(e){let{measure:t}=e;const[r,o]=k.useState(null),a=k.useCallback(v=>{for(const{target:w}of v)if(Rr(w)){o(N=>{const R=t(w);return N?{...N,width:R.width,height:R.height}:R});break}},[t]),l=Oo({callback:a}),f=k.useCallback(v=>{const w=Rh(v);l==null||l.disconnect(),w&&(l==null||l.observe(w)),o(w?t(w):null)},[t,l]),[p,g]=So(f);return k.useMemo(()=>({nodeRef:p,rect:r,setRef:g}),[r,p,g])}const Ih=[{sensor:Qs,options:{}},{sensor:Xs,options:{}}],Lh={current:{}},go={draggable:{measure:oa},droppable:{measure:oa,strategy:Mr.WhileDragging,frequency:As.Optimized},dragOverlay:{measure:tr}};class Nr extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,o;return(r=(o=this.get(t))==null?void 0:o.node.current)!=null?r:void 0}}const Fh={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:jo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:go,measureDroppableContainers:jo,windowRect:null,measuringScheduled:!1},zh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:jo,draggableNodes:new Map,over:null,measureDroppableContainers:jo},Mo=k.createContext(zh),bc=k.createContext(Fh);function Bh(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nr}}}function Kh(e,t){switch(t.type){case We.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case We.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case We.DragEnd:case We.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case We.RegisterDroppable:{const{element:r}=t,{id:o}=r,a=new Nr(e.droppable.containers);return a.set(o,r),{...e,droppable:{...e.droppable,containers:a}}}case We.SetDroppableDisabled:{const{id:r,key:o,disabled:a}=t,l=e.droppable.containers.get(r);if(!l||o!==l.key)return e;const f=new Nr(e.droppable.containers);return f.set(r,{...l,disabled:a}),{...e,droppable:{...e.droppable,containers:f}}}case We.UnregisterDroppable:{const{id:r,key:o}=t,a=e.droppable.containers.get(r);if(!a||o!==a.key)return e;const l=new Nr(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function qh(e){let{disabled:t}=e;const{active:r,activatorEvent:o,draggableNodes:a}=k.useContext(Mo),l=Ds(o),f=Ds(r==null?void 0:r.id);return k.useEffect(()=>{if(!t&&!o&&l&&f!=null){if(!Hs(l)||document.activeElement===l.target)return;const p=a.get(f);if(!p)return;const{activatorNode:g,node:v}=p;if(!g.current&&!v.current)return;requestAnimationFrame(()=>{for(const w of[g.current,v.current]){if(!w)continue;const N=Rf(w);if(N){N.focus();break}}})}},[o,t,a,f,l]),null}function Wh(e,t){let{transform:r,...o}=t;return e!=null&&e.length?e.reduce((a,l)=>l({transform:a,...o}),r):r}function Yh(e){return k.useMemo(()=>({draggable:{...go.draggable,...e==null?void 0:e.draggable},droppable:{...go.droppable,...e==null?void 0:e.droppable},dragOverlay:{...go.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Vh(e){let{activeNode:t,measure:r,initialRect:o,config:a=!0}=e;const l=k.useRef(!1),{x:f,y:p}=typeof a=="boolean"?{x:a,y:a}:a;Ut(()=>{if(!f&&!p||!t){l.current=!1;return}if(l.current||!o)return;const v=t==null?void 0:t.node.current;if(!v||v.isConnected===!1)return;const w=r(v),N=lc(w,o);if(f||(N.x=0),p||(N.y=0),l.current=!0,Math.abs(N.x)>0||Math.abs(N.y)>0){const R=uc(v);R&&R.scrollBy({top:N.y,left:N.x})}},[t,f,p,o,r])}const wc=k.createContext({...Lt,scaleX:1,scaleY:1});var gn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(gn||(gn={}));const $h=k.memo(function(t){var r,o,a,l;let{id:f,accessibility:p,autoScroll:g=!0,children:v,sensors:w=Ih,collisionDetection:N=Xf,measuring:R,modifiers:P,...L}=t;const F=k.useReducer(Kh,void 0,Bh),[z,Y]=F,[U,B]=Bf(),[te,V]=k.useState(gn.Uninitialized),J=te===gn.Initialized,{draggable:{active:Z,nodes:oe,translate:fe},droppable:{containers:se}}=z,he=Z!=null?oe.get(Z):null,ne=k.useRef({initial:null,translated:null}),je=k.useMemo(()=>{var qe;return Z!=null?{id:Z,data:(qe=he==null?void 0:he.data)!=null?qe:Lh,rect:ne}:null},[Z,he]),De=k.useRef(null),[dt,st]=k.useState(null),[ze,Ve]=k.useState(null),Oe=Er(L,Object.values(L)),pe=Ir("DndDescribedBy",f),Pe=k.useMemo(()=>se.getEnabled(),[se]),Se=Yh(R),{droppableRects:Ae,measureDroppableContainers:Be,measuringScheduled:Ke}=Nh(Pe,{dragging:J,dependencies:[fe.x,fe.y],config:Se.droppable}),Me=Sh(oe,Z),Ft=k.useMemo(()=>ze?Os(ze):null,[ze]),Ge=sr(),ee=_h(Me,Se.draggable.measure);Vh({activeNode:Z!=null?oe.get(Z):null,config:Ge.layoutShiftCompensation,initialRect:ee,measure:Se.draggable.measure});const me=la(Me,Se.draggable.measure,ee),zt=la(Me?Me.parentElement:null),ue=k.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:Ae,draggableNodes:oe,draggingNode:null,draggingNodeRect:null,droppableContainers:se,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),kt=se.getNodeFor((r=ue.current.over)==null?void 0:r.id),At=Th({measure:Se.dragOverlay.measure}),ft=(o=At.nodeRef.current)!=null?o:Me,rn=J?(a=At.rect)!=null?a:me:null,Lr=!!(At.nodeRef.current&&At.rect),Fr=Eh(Lr?null:me),nr=yc(ft?yt(ft):null),Et=Dh(J?kt??Me:null),it=Ah(Et),bn=Wh(P,{transform:{x:fe.x-Fr.x,y:fe.y-Fr.y,scaleX:1,scaleY:1},activatorEvent:ze,active:je,activeNodeRect:me,containerNodeRect:zt,draggingNodeRect:rn,over:ue.current.over,overlayNodeRect:At.rect,scrollableAncestors:Et,scrollableAncestorRects:it,windowRect:nr}),on=Ft?Hn(Ft,fe):null,rr=Oh(Et),wn=da(rr),Gt=da(rr,[me]),ht=Hn(bn,wn),Bt=rn?Jf(rn,bn):null,Rt=je&&Bt?N({active:je,collisionRect:Bt,droppableRects:Ae,droppableContainers:Pe,pointerCoordinates:on}):null,Rn=cc(Rt,"id"),[bt,Kt]=k.useState(null),Tn=Lr?bn:Hn(bn,Gt),or=Gf(Tn,(l=bt==null?void 0:bt.rect)!=null?l:null,me),Dt=k.useRef(null),re=k.useCallback((qe,Qe)=>{let{sensor:tt,options:Ot}=Qe;if(De.current==null)return;const pt=oe.get(De.current);if(!pt)return;const at=qe.nativeEvent,Je=new tt({active:De.current,activeNode:pt,event:at,options:Ot,context:ue,onAbort(Te){if(!oe.get(Te))return;const{onDragAbort:ge}=Oe.current,Ce={id:Te};ge==null||ge(Ce),U({type:"onDragAbort",event:Ce})},onPending(Te,xt,ge,Ce){if(!oe.get(Te))return;const{onDragPending:Wt}=Oe.current,St={id:Te,constraint:xt,initialCoordinates:ge,offset:Ce};Wt==null||Wt(St),U({type:"onDragPending",event:St})},onStart(Te){const xt=De.current;if(xt==null)return;const ge=oe.get(xt);if(!ge)return;const{onDragStart:Ce}=Oe.current,Sn={activatorEvent:at,active:{id:xt,data:ge.data,rect:ne}};Vn.unstable_batchedUpdates(()=>{Ce==null||Ce(Sn),V(gn.Initializing),Y({type:We.DragStart,initialCoordinates:Te,active:xt}),U({type:"onDragStart",event:Sn}),st(Dt.current),Ve(at)})},onMove(Te){Y({type:We.DragMove,coordinates:Te})},onEnd:wt(We.DragEnd),onCancel:wt(We.DragCancel)});Dt.current=Je;function wt(Te){return async function(){const{active:ge,collisions:Ce,over:Sn,scrollAdjustedTranslate:Wt}=ue.current;let St=null;if(ge&&Wt){const{cancelDrop:Yt}=Oe.current;St={activatorEvent:at,active:ge,collisions:Ce,delta:Wt,over:Sn},Te===We.DragEnd&&typeof Yt=="function"&&await Promise.resolve(Yt(St))&&(Te=We.DragCancel)}De.current=null,Vn.unstable_batchedUpdates(()=>{Y({type:Te}),V(gn.Uninitialized),Kt(null),st(null),Ve(null),Dt.current=null;const Yt=Te===We.DragEnd?"onDragEnd":"onDragCancel";if(St){const ir=Oe.current[Yt];ir==null||ir(St),U({type:Yt,event:St})}})}}},[oe]),xn=k.useCallback((qe,Qe)=>(tt,Ot)=>{const pt=tt.nativeEvent,at=oe.get(Ot);if(De.current!==null||!at||pt.dndKit||pt.defaultPrevented)return;const Je={active:at};qe(tt,Qe.options,Je)===!0&&(pt.dndKit={capturedBy:Qe.sensor},De.current=Ot,re(tt,Qe))},[oe,re]),qt=jh(w,xn);Mh(w),Ut(()=>{me&&te===gn.Initializing&&V(gn.Initialized)},[me,te]),k.useEffect(()=>{const{onDragMove:qe}=Oe.current,{active:Qe,activatorEvent:tt,collisions:Ot,over:pt}=ue.current;if(!Qe||!tt)return;const at={active:Qe,activatorEvent:tt,collisions:Ot,delta:{x:ht.x,y:ht.y},over:pt};Vn.unstable_batchedUpdates(()=>{qe==null||qe(at),U({type:"onDragMove",event:at})})},[ht.x,ht.y]),k.useEffect(()=>{const{active:qe,activatorEvent:Qe,collisions:tt,droppableContainers:Ot,scrollAdjustedTranslate:pt}=ue.current;if(!qe||De.current==null||!Qe||!pt)return;const{onDragOver:at}=Oe.current,Je=Ot.get(Rn),wt=Je&&Je.rect.current?{id:Je.id,rect:Je.rect.current,data:Je.data,disabled:Je.disabled}:null,Te={active:qe,activatorEvent:Qe,collisions:tt,delta:{x:pt.x,y:pt.y},over:wt};Vn.unstable_batchedUpdates(()=>{Kt(wt),at==null||at(Te),U({type:"onDragOver",event:Te})})},[Rn]),Ut(()=>{ue.current={activatorEvent:ze,active:je,activeNode:Me,collisionRect:Bt,collisions:Rt,droppableRects:Ae,draggableNodes:oe,draggingNode:ft,draggingNodeRect:rn,droppableContainers:se,over:bt,scrollableAncestors:Et,scrollAdjustedTranslate:ht},ne.current={initial:rn,translated:Bt}},[je,Me,Rt,Bt,oe,ft,rn,Ae,se,bt,Et,ht]),bh({...Ge,delta:fe,draggingRect:Bt,pointerCoordinates:on,scrollableAncestors:Et,scrollableAncestorRects:it});const In=k.useMemo(()=>({active:je,activeNode:Me,activeNodeRect:me,activatorEvent:ze,collisions:Rt,containerNodeRect:zt,dragOverlay:At,draggableNodes:oe,droppableContainers:se,droppableRects:Ae,over:bt,measureDroppableContainers:Be,scrollableAncestors:Et,scrollableAncestorRects:it,measuringConfiguration:Se,measuringScheduled:Ke,windowRect:nr}),[je,Me,me,ze,Rt,zt,At,oe,se,Ae,bt,Be,Et,it,Se,Ke,nr]),X=k.useMemo(()=>({activatorEvent:ze,activators:qt,active:je,activeNodeRect:me,ariaDescribedById:{draggable:pe},dispatch:Y,draggableNodes:oe,over:bt,measureDroppableContainers:Be}),[ze,qt,je,me,Y,pe,oe,bt,Be]);return Ye.createElement(sc.Provider,{value:B},Ye.createElement(Mo.Provider,{value:X},Ye.createElement(bc.Provider,{value:In},Ye.createElement(wc.Provider,{value:or},v)),Ye.createElement(qh,{disabled:(p==null?void 0:p.restoreFocus)===!1})),Ye.createElement(Wf,{...p,hiddenTextDescribedById:pe}));function sr(){const qe=(dt==null?void 0:dt.autoScrollEnabled)===!1,Qe=typeof g=="object"?g.enabled===!1:g===!1,tt=J&&!qe&&!Qe;return typeof g=="object"?{...g,enabled:tt}:{enabled:tt}}}),Hh=k.createContext(null),ha="button",Uh="Draggable";function Xh(e){let{id:t,data:r,disabled:o=!1,attributes:a}=e;const l=Ir(Uh),{activators:f,activatorEvent:p,active:g,activeNodeRect:v,ariaDescribedById:w,draggableNodes:N,over:R}=k.useContext(Mo),{role:P=ha,roleDescription:L="draggable",tabIndex:F=0}=a??{},z=(g==null?void 0:g.id)===t,Y=k.useContext(z?wc:Hh),[U,B]=So(),[te,V]=So(),J=Ph(f,t),Z=Er(r);Ut(()=>(N.set(t,{id:t,key:l,node:U,activatorNode:te,data:Z}),()=>{const fe=N.get(t);fe&&fe.key===l&&N.delete(t)}),[N,t]);const oe=k.useMemo(()=>({role:P,tabIndex:F,"aria-disabled":o,"aria-pressed":z&&P===ha?!0:void 0,"aria-roledescription":L,"aria-describedby":w.draggable}),[o,P,F,z,L,w.draggable]);return{active:g,activatorEvent:p,activeNodeRect:v,attributes:oe,isDragging:z,listeners:o?void 0:J,node:U,over:R,setNodeRef:B,setActivatorNodeRef:V,transform:Y}}function Gh(){return k.useContext(bc)}const Qh="Droppable",Jh={timeout:25};function Zh(e){let{data:t,disabled:r=!1,id:o,resizeObserverConfig:a}=e;const l=Ir(Qh),{active:f,dispatch:p,over:g,measureDroppableContainers:v}=k.useContext(Mo),w=k.useRef({disabled:r}),N=k.useRef(!1),R=k.useRef(null),P=k.useRef(null),{disabled:L,updateMeasurementsFor:F,timeout:z}={...Jh,...a},Y=Er(F??o),U=k.useCallback(()=>{if(!N.current){N.current=!0;return}P.current!=null&&clearTimeout(P.current),P.current=setTimeout(()=>{v(Array.isArray(Y.current)?Y.current:[Y.current]),P.current=null},z)},[z]),B=Oo({callback:U,disabled:L||!f}),te=k.useCallback((oe,fe)=>{B&&(fe&&(B.unobserve(fe),N.current=!1),oe&&B.observe(oe))},[B]),[V,J]=So(te),Z=Er(t);return k.useEffect(()=>{!B||!V.current||(B.disconnect(),N.current=!1,B.observe(V.current))},[V,B]),k.useEffect(()=>(p({type:We.RegisterDroppable,element:{id:o,key:l,disabled:r,node:V,rect:R,data:Z}}),()=>p({type:We.UnregisterDroppable,key:l,id:o})),[o]),k.useEffect(()=>{r!==w.current.disabled&&(p({type:We.SetDroppableDisabled,id:o,key:l,disabled:r}),w.current.disabled=r)},[o,l,r,p]),{active:f,rect:R,isOver:(g==null?void 0:g.id)===o,node:V,over:g,setNodeRef:J}}function xc(e,t,r){const o=e.slice();return o.splice(r<0?o.length+r:r,0,o.splice(t,1)[0]),o}function ep(e,t){return e.reduce((r,o,a)=>{const l=t.get(o);return l&&(r[a]=l),r},Array(e.length))}function ao(e){return e!==null&&e>=0}function tp(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function np(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Sc=e=>{let{rects:t,activeIndex:r,overIndex:o,index:a}=e;const l=xc(t,o,r),f=t[a],p=l[a];return!p||!f?null:{x:p.left-f.left,y:p.top-f.top,scaleX:p.width/f.width,scaleY:p.height/f.height}},co={scaleX:1,scaleY:1},rp=e=>{var t;let{activeIndex:r,activeNodeRect:o,index:a,rects:l,overIndex:f}=e;const p=(t=l[r])!=null?t:o;if(!p)return null;if(a===r){const v=l[f];return v?{x:0,y:r<f?v.top+v.height-(p.top+p.height):v.top-p.top,...co}:null}const g=op(l,a,r);return a>r&&a<=f?{x:0,y:-p.height-g,...co}:a<r&&a>=f?{x:0,y:p.height+g,...co}:{x:0,y:0,...co}};function op(e,t,r){const o=e[t],a=e[t-1],l=e[t+1];return o?r<t?a?o.top-(a.top+a.height):l?l.top-(o.top+o.height):0:l?l.top-(o.top+o.height):a?o.top-(a.top+a.height):0:0}const jc="Sortable",Nc=Ye.createContext({activeIndex:-1,containerId:jc,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Sc,disabled:{draggable:!1,droppable:!1}});function sp(e){let{children:t,id:r,items:o,strategy:a=Sc,disabled:l=!1}=e;const{active:f,dragOverlay:p,droppableRects:g,over:v,measureDroppableContainers:w}=Gh(),N=Ir(jc,r),R=p.rect!==null,P=k.useMemo(()=>o.map(J=>typeof J=="object"&&"id"in J?J.id:J),[o]),L=f!=null,F=f?P.indexOf(f.id):-1,z=v?P.indexOf(v.id):-1,Y=k.useRef(P),U=!tp(P,Y.current),B=z!==-1&&F===-1||U,te=np(l);Ut(()=>{U&&L&&w(P)},[U,P,L,w]),k.useEffect(()=>{Y.current=P},[P]);const V=k.useMemo(()=>({activeIndex:F,containerId:N,disabled:te,disableTransforms:B,items:P,overIndex:z,useDragOverlay:R,sortedRects:ep(P,g),strategy:a}),[F,N,te.draggable,te.droppable,B,P,z,g,R,a]);return Ye.createElement(Nc.Provider,{value:V},t)}const ip=e=>{let{id:t,items:r,activeIndex:o,overIndex:a}=e;return xc(r,o,a).indexOf(t)},ap=e=>{let{containerId:t,isSorting:r,wasDragging:o,index:a,items:l,newIndex:f,previousItems:p,previousContainerId:g,transition:v}=e;return!v||!o||p!==l&&a===f?!1:r?!0:f!==a&&t===g},cp={duration:200,easing:"ease"},_c="transform",lp=Or.Transition.toString({property:_c,duration:0,easing:"linear"}),up={roleDescription:"sortable"};function dp(e){let{disabled:t,index:r,node:o,rect:a}=e;const[l,f]=k.useState(null),p=k.useRef(r);return Ut(()=>{if(!t&&r!==p.current&&o.current){const g=a.current;if(g){const v=tr(o.current,{ignoreTransform:!0}),w={x:g.left-v.left,y:g.top-v.top,scaleX:g.width/v.width,scaleY:g.height/v.height};(w.x||w.y)&&f(w)}}r!==p.current&&(p.current=r)},[t,r,o,a]),k.useEffect(()=>{l&&f(null)},[l]),l}function fp(e){let{animateLayoutChanges:t=ap,attributes:r,disabled:o,data:a,getNewIndex:l=ip,id:f,strategy:p,resizeObserverConfig:g,transition:v=cp}=e;const{items:w,containerId:N,activeIndex:R,disabled:P,disableTransforms:L,sortedRects:F,overIndex:z,useDragOverlay:Y,strategy:U}=k.useContext(Nc),B=hp(o,P),te=w.indexOf(f),V=k.useMemo(()=>({sortable:{containerId:N,index:te,items:w},...a}),[N,a,te,w]),J=k.useMemo(()=>w.slice(w.indexOf(f)),[w,f]),{rect:Z,node:oe,isOver:fe,setNodeRef:se}=Zh({id:f,data:V,disabled:B.droppable,resizeObserverConfig:{updateMeasurementsFor:J,...g}}),{active:he,activatorEvent:ne,activeNodeRect:je,attributes:De,setNodeRef:dt,listeners:st,isDragging:ze,over:Ve,setActivatorNodeRef:Oe,transform:pe}=Xh({id:f,data:V,attributes:{...up,...r},disabled:B.draggable}),Pe=Of(se,dt),Se=!!he,Ae=Se&&!L&&ao(R)&&ao(z),Be=!Y&&ze,Ke=Be&&Ae?pe:null,Ft=Ae?Ke??(p??U)({rects:F,activeNodeRect:je,activeIndex:R,overIndex:z,index:te}):null,Ge=ao(R)&&ao(z)?l({id:f,items:w,activeIndex:R,overIndex:z}):te,ee=he==null?void 0:he.id,me=k.useRef({activeId:ee,items:w,newIndex:Ge,containerId:N}),zt=w!==me.current.items,ue=t({active:he,containerId:N,isDragging:ze,isSorting:Se,id:f,index:te,items:w,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:v,wasDragging:me.current.activeId!=null}),kt=dp({disabled:!ue,index:te,node:oe,rect:Z});return k.useEffect(()=>{Se&&me.current.newIndex!==Ge&&(me.current.newIndex=Ge),N!==me.current.containerId&&(me.current.containerId=N),w!==me.current.items&&(me.current.items=w)},[Se,Ge,N,w]),k.useEffect(()=>{if(ee===me.current.activeId)return;if(ee!=null&&me.current.activeId==null){me.current.activeId=ee;return}const ft=setTimeout(()=>{me.current.activeId=ee},50);return()=>clearTimeout(ft)},[ee]),{active:he,activeIndex:R,attributes:De,data:V,rect:Z,index:te,newIndex:Ge,items:w,isOver:fe,isSorting:Se,isDragging:ze,listeners:st,node:oe,overIndex:z,over:Ve,setNodeRef:Pe,setActivatorNodeRef:Oe,setDroppableNodeRef:se,setDraggableNodeRef:dt,transform:kt??Ft,transition:At()};function At(){if(kt||zt&&me.current.newIndex===te)return lp;if(!(Be&&!Hs(ne)||!v)&&(Se||ue))return Or.Transition.toString({...v,property:_c})}}function hp(e,t){var r,o;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(o=e==null?void 0:e.droppable)!=null?o:t.droppable}}function _o(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const pp=[be.Down,be.Right,be.Up,be.Left],mp=(e,t)=>{let{context:{active:r,collisionRect:o,droppableRects:a,droppableContainers:l,over:f,scrollableAncestors:p}}=t;if(pp.includes(e.code)){if(e.preventDefault(),!r||!o)return;const g=[];l.getEnabled().forEach(N=>{if(!N||N!=null&&N.disabled)return;const R=a.get(N.id);if(R)switch(e.code){case be.Down:o.top<R.top&&g.push(N);break;case be.Up:o.top>R.top&&g.push(N);break;case be.Left:o.left>R.left&&g.push(N);break;case be.Right:o.left<R.left&&g.push(N);break}});const v=Hf({active:r,collisionRect:o,droppableRects:a,droppableContainers:g,pointerCoordinates:null});let w=cc(v,"id");if(w===(f==null?void 0:f.id)&&v.length>1&&(w=v[1].id),w!=null){const N=l.get(r.id),R=l.get(w),P=R?a.get(R.id):null,L=R==null?void 0:R.node.current;if(L&&P&&N&&R){const z=Do(L).some((J,Z)=>p[Z]!==J),Y=Cc(N,R),U=gp(N,R),B=z||!Y?{x:0,y:0}:{x:U?o.width-P.width:0,y:U?o.height-P.height:0},te={x:P.left,y:P.top};return B.x&&B.y?te:Dr(te,B)}}}};function Cc(e,t){return!_o(e)||!_o(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function gp(e,t){return!_o(e)||!_o(t)||!Cc(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const vp=({open:e,onOpenChange:t})=>{const r=[{key:"cmd+k",description:"Create new note",icon:d.jsx(lo,{className:"w-4 h-4"})},{key:"cmd+d",description:"Delete current note",icon:d.jsx(_a,{className:"w-4 h-4"})},{key:"cmd+s",description:"Save current note",icon:d.jsx(bl,{className:"w-4 h-4"})},{key:"cmd+f",description:"Open search dialog",icon:d.jsx($n,{className:"w-4 h-4"})},{key:"alt+arrowup",description:"Select previous note",icon:d.jsx(wl,{className:"w-4 h-4"})},{key:"alt+arrowdown",description:"Select next note",icon:d.jsx(xl,{className:"w-4 h-4"})},{key:"escape",description:"Close dialogs",icon:d.jsx(Ca,{className:"w-4 h-4"})}],o=[{key:"cmd+b",description:"Bold text",icon:d.jsx(ba,{className:"w-4 h-4"})},{key:"cmd+shift+i",description:"Italic text",icon:d.jsx(wa,{className:"w-4 h-4"})},{key:"cmd+u",description:"Underline text",icon:d.jsx(Sl,{className:"w-4 h-4"})},{key:"cmd+shift+s",description:"Strikethrough text",icon:d.jsx(xa,{className:"w-4 h-4"})},{key:"cmd+1",description:"Heading 1",icon:d.jsx(jl,{className:"w-4 h-4"})},{key:"cmd+2",description:"Heading 2",icon:d.jsx(Nl,{className:"w-4 h-4"})},{key:"cmd+3",description:"Heading 3",icon:d.jsx(_l,{className:"w-4 h-4"})},{key:"cmd+shift+l",description:"Bullet list",icon:d.jsx(ja,{className:"w-4 h-4"})},{key:"cmd+shift+o",description:"Numbered list",icon:d.jsx(Na,{className:"w-4 h-4"})},{key:"cmd+shift+c",description:"Code block",icon:d.jsx(Sa,{className:"w-4 h-4"})}];return d.jsx(Cr,{open:e,onOpenChange:t,children:d.jsxs(Un,{className:"w-[95vw] max-w-4xl h-[80vh] max-h-[700px] sm:w-[80vw] md:w-[70vw] lg:w-[60vw] overflow-y-auto",children:[d.jsx(Xn,{children:d.jsxs(Gn,{className:"flex items-center gap-2",children:[d.jsx(yl,{className:"w-5 h-5"}),"Help & Keyboard Shortcuts"]})}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{children:[d.jsx("h3",{className:"font-semibold text-lg mb-3",children:"How to use 9Notes"}),d.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[d.jsxs("p",{children:["• Click the ",d.jsx("strong",{children:"+"})," button or use ",d.jsx("strong",{children:gt("cmd+k")})," to create a new note"]}),d.jsx("p",{children:"• Click on any note in the sidebar to select and edit it"}),d.jsx("p",{children:"• Use the rich text editor with formatting buttons for headings, bold, italic, and more"}),d.jsx("p",{children:"• Your notes are automatically saved as you type"}),d.jsx("p",{children:"• Drag and drop notes in the sidebar to reorder them"}),d.jsx("p",{children:"• Use the search bar to quickly find notes by title or content"})]})]}),d.jsxs("section",{children:[d.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Global Shortcuts"}),d.jsx("div",{className:"grid gap-2",children:r.map(a=>d.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-muted-foreground",children:a.icon}),d.jsx("span",{className:"text-sm",children:a.description})]}),d.jsx("div",{className:"flex items-center gap-1 text-xs font-mono bg-background px-2 py-1 rounded border",children:gt(a.key)})]},a.key))})]}),d.jsxs("section",{children:[d.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Text Formatting (while editing)"}),d.jsx("div",{className:"grid gap-2",children:o.map(a=>d.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-muted-foreground",children:a.icon}),d.jsx("span",{className:"text-sm",children:a.description})]}),d.jsx("div",{className:"flex items-center gap-1 text-xs font-mono bg-background px-2 py-1 rounded border",children:gt(a.key)})]},a.key))})]}),d.jsxs("section",{children:[d.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Tips"}),d.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[d.jsx("p",{children:"• Notes are automatically saved - no need to manually save"}),d.jsx("p",{children:"• Use headings (H1, H2, H3) to organize your content"}),d.jsx("p",{children:"• The word count is shown in the bottom status bar"}),d.jsx("p",{children:"• You can use all standard text formatting options"})]})]})]})]})})},yp=({note:e,index:t,isSelected:r,onSelect:o})=>{const{attributes:a,listeners:l,setNodeRef:f,transform:p,transition:g,isDragging:v}=fp({id:e.id,data:{type:"note",note:e}}),w={transform:Or.Transform.toString(p),transition:g,opacity:v?.5:1},N=L=>{v||o(e.id)},R=e.title||`Note ${t+1}`,P=e.content?(()=>{const L=document.createElement("div");L.innerHTML=e.content;const F=L.textContent||L.innerText||"";return F.slice(0,100)+(F.length>100?"...":"")})():"Empty note";return d.jsx("div",{ref:f,style:w,className:"relative group px-2",children:d.jsxs(Ze,{children:[d.jsx(et,{asChild:!0,children:d.jsxs(ye,{...a,...l,variant:"ghost",size:"sm",onClick:N,className:`
              relative w-full h-10 p-0 flex items-center justify-center transition-all duration-200 rounded-lg overflow-hidden cursor-pointer
              ${r?"bg-primary/15 text-primary border-2 border-primary/20 shadow-sm":"hover:bg-muted/50 border-2 border-transparent hover:border-border/30"}
            `,style:{cursor:v?"grabbing":"pointer"},children:[d.jsx(ka,{className:`h-4 w-4 transition-all duration-300 ${r?"text-primary group-hover:scale-75 group-hover:opacity-0":"group-hover:scale-75 group-hover:opacity-0"}`}),d.jsx(Il,{className:"absolute inset-0 m-auto h-4 w-4 text-muted-foreground opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all duration-300"})]})}),d.jsx(He,{side:"right",className:"max-w-xs",children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium text-white",children:R}),d.jsx("span",{className:"text-xs text-white mt-1",children:P})]})})]})})},bp=()=>{const e=Co(()=>_e.states),[t,r]=k.useState(!1),[o,a]=k.useState(!1),[l,f]=k.useState(!1),{isInstallable:p,isInstalled:g,installApp:v}=Df(),w=Yf(ta(Qs,{activationConstraint:{distance:8}}),ta(Xs,{coordinateGetter:mp})),N=B=>{const{active:te,over:V}=B;if(te.id!==(V==null?void 0:V.id)){const J=e.notes.findIndex(oe=>oe.id===te.id),Z=e.notes.findIndex(oe=>oe.id===(V==null?void 0:V.id));J!==-1&&Z!==-1&&_e.reorderNotes(J,Z)}},R=B=>{_e.selectNote(B)},P=()=>{const B=_e.createNote();_e.selectNote(B)},L=()=>{const B=new CustomEvent("triggerSearchDialog");window.dispatchEvent(B)},F=()=>{const B=JSON.stringify(e.notes,null,2),te=new Blob([B],{type:"application/json"}),V=URL.createObjectURL(te),J=document.createElement("a");J.href=V,J.download=`9notes-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(V),r(!1)},z=()=>{const B=document.createElement("input");B.type="file",B.accept=".json",B.onchange=async te=>{var J;const V=(J=te.target.files)==null?void 0:J[0];if(V){const Z=new FileReader;Z.onload=async oe=>{var fe;try{const se=JSON.parse((fe=oe.target)==null?void 0:fe.result);if(Array.isArray(se)){const he=[];se.forEach(ne=>{if(ne.title!==void 0&&ne.content!==void 0){const je=_e.createNote();_e.updateNote(je,{title:ne.title,content:ne.content,createdAt:ne.createdAt?new Date(ne.createdAt):void 0,updatedAt:ne.updatedAt?new Date(ne.updatedAt):void 0})}}),console.log(`Successfully imported ${se.length} notes`)}else console.error("Invalid file format: expected array of notes")}catch(se){console.error("Error importing notes:",se),alert("Failed to import notes. Please check the file format.")}},Z.readAsText(V)}},B.click(),r(!1)},Y=()=>{a(!0),r(!1)},U=()=>{_e.clearAllNotes(),a(!1)};return d.jsx(qs,{children:d.jsxs("div",{className:"w-14 bg-muted/30 border-r border-border/50 flex flex-col h-full backdrop-blur-sm",children:[d.jsx("div",{className:"p-2 space-y-2 border-b border-border/50",children:d.jsx(Es,{title:"New Note",shortcut:"cmd+k",side:"right",children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:P,className:"w-full h-11 sm:h-[52px] p-0 flex items-center justify-center hover:bg-primary/10 transition-all duration-200 group border border-dashed border-border/30 hover:border-primary/30",children:d.jsx(Cl,{className:"h-4 w-4 group-hover:text-primary transition-colors"})})})}),d.jsx("div",{className:"flex-1 overflow-y-auto py-2 space-y-1",children:d.jsx($h,{sensors:w,collisionDetection:$f,onDragEnd:N,children:d.jsx(sp,{items:e.notes.map(B=>B.id),strategy:rp,children:e.notes.map((B,te)=>d.jsx(yp,{note:B,index:te,isSelected:e.selectedNoteId===B.id,onSelect:R},B.id))})})}),d.jsxs("div",{className:"p-2 border-t border-border/50 relative space-y-2",children:[d.jsx(Es,{title:"Search Notes",shortcut:"cmd+f",side:"right",children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:L,className:"w-full h-8 p-0 flex items-center justify-center hover:bg-muted/50 transition-all duration-200",children:d.jsx($n,{className:"h-4 w-4"})})}),d.jsx(Zi,{title:"Help",side:"right",children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>f(!0),className:"w-full h-8 p-0 flex items-center justify-center hover:bg-muted/50 transition-all duration-200",children:d.jsx(kl,{className:"h-4 w-4"})})}),d.jsx(Zi,{title:"Settings",side:"right",children:d.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>r(!0),className:"w-full h-8 p-0 flex items-center justify-center hover:bg-muted/50 transition-all duration-200",children:d.jsx(El,{className:"h-4 w-4"})})})]}),d.jsx(Cr,{open:t,onOpenChange:r,children:d.jsxs(Un,{className:"w-[95vw] max-w-2xl h-[80vh] max-h-[600px] sm:w-[80vw] md:w-[70vw] lg:w-[60vw] overflow-y-auto",children:[d.jsxs(Xn,{children:[d.jsx(Gn,{children:"Theme Settings"}),d.jsxs(bo,{children:["Currently using ",e.theme||"system"," theme"]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium mb-4",children:"Theme Mode"}),d.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.jsxs(ye,{variant:e.theme==="system"?"default":"outline",size:"sm",onClick:()=>_e.updateSettings({theme:"system"}),className:"flex flex-col items-center gap-2 h-16",children:[d.jsx(Dl,{className:"h-5 w-5"}),d.jsx("span",{className:"text-xs",children:"System"})]}),d.jsxs(ye,{variant:e.theme==="light"?"default":"outline",size:"sm",onClick:()=>_e.updateSettings({theme:"light"}),className:"flex flex-col items-center gap-2 h-16",children:[d.jsx(Ol,{className:"h-5 w-5"}),d.jsx("span",{className:"text-xs",children:"Light"})]}),d.jsxs(ye,{variant:e.theme==="dark"?"default":"outline",size:"sm",onClick:()=>_e.updateSettings({theme:"dark"}),className:"flex flex-col items-center gap-2 h-16",children:[d.jsx(Ml,{className:"h-5 w-5"}),d.jsx("span",{className:"text-xs",children:"Dark"})]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium mb-4",children:"Theme Color"}),d.jsx("div",{className:"flex gap-2 justify-center",children:[{name:"green",color:"bg-green-500",value:"green"},{name:"blue",color:"bg-blue-500",value:"blue"},{name:"red",color:"bg-red-500",value:"red"},{name:"purple",color:"bg-purple-500",value:"purple"},{name:"orange",color:"bg-orange-500",value:"orange"},{name:"teal",color:"bg-teal-500",value:"teal"},{name:"indigo",color:"bg-indigo-500",value:"indigo"},{name:"pink",color:"bg-pink-500",value:"pink"}].map(B=>d.jsx("button",{onClick:()=>_e.updateSettings({color:B.value}),className:`w-9 h-9 rounded-full ${B.color} relative hover:scale-110 transition-transform flex-shrink-0`,children:e.color===B.value&&d.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white flex items-center justify-center",children:d.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})},B.name))})]}),d.jsxs("div",{className:"pt-4 border-t border-border",children:[d.jsx("h3",{className:"text-sm font-medium mb-3",children:"Data Management"}),d.jsxs("div",{className:"space-y-2",children:[p&&d.jsxs(ye,{onClick:v,className:"w-full justify-start gap-2",children:[d.jsx(Oi,{className:"h-4 w-4"}),"Install App"]}),g&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground p-2",children:[d.jsx(Pl,{className:"h-4 w-4 text-green-500"}),"App installed"]}),d.jsxs(ye,{variant:"outline",onClick:z,className:"w-full justify-start gap-2",children:[d.jsx(Al,{className:"h-4 w-4"}),"Import Notes"]}),d.jsxs(ye,{variant:"outline",onClick:F,className:"w-full justify-start gap-2",children:[d.jsx(Oi,{className:"h-4 w-4"}),"Export Notes"]}),d.jsxs(ye,{variant:"outline",onClick:Y,className:"w-full justify-start gap-2 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-950/20",children:[d.jsx(_a,{className:"h-4 w-4"}),"Clear All Notes"]})]})]}),d.jsxs("div",{className:"pt-4 border-t border-border",children:[d.jsx("h3",{className:"text-sm font-medium mb-3",children:"About"}),d.jsxs(ye,{variant:"outline",onClick:()=>window.open("https://github.com/p32929/notes","_blank"),className:"w-full justify-start gap-2",children:[d.jsx(Rl,{className:"h-4 w-4"}),"View on GitHub",d.jsx(Tl,{className:"h-3 w-3 ml-auto"})]})]})]})]})}),d.jsx(Cr,{open:o,onOpenChange:a,children:d.jsxs(Un,{className:"w-[95vw] max-w-md sm:w-auto",children:[d.jsxs(Xn,{children:[d.jsx(Gn,{children:"Clear All Notes"}),d.jsxs(bo,{children:["Are you sure you want to delete all notes? This will permanently remove all ",e.notes.length," note",e.notes.length!==1?"s":""," and cannot be undone."]})]}),d.jsxs(Ws,{className:"flex flex-col sm:flex-row gap-2",children:[d.jsx("div",{className:"text-xs text-muted-foreground mb-2 sm:mb-0 sm:mr-auto",children:"This action cannot be undone"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ye,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),d.jsx(ye,{variant:"destructive",onClick:U,children:"Clear All Notes"})]})]})]})}),d.jsx(vp,{open:l,onOpenChange:f})]})})},wp=({open:e,onOpenChange:t})=>{const r=Co(()=>_e.states),[o,a]=k.useState(""),[l,f]=k.useState(0),p=k.useRef(null),g=P=>{const L=document.createElement("div");return L.innerHTML=P,L.textContent||L.innerText||""},v=Ye.useMemo(()=>{if(!o.trim())return[];const P=o.toLowerCase();return r.notes.filter(L=>{const F=L.title.toLowerCase().includes(P),Y=g(L.content).toLowerCase().includes(P);return F||Y}).map(L=>{const F=L.title.toLowerCase().includes(P),Y=g(L.content).toLowerCase().includes(P);return{...L,relevanceScore:(F?10:0)+(Y?5:0),titleMatch:F,contentMatch:Y}}).sort((L,F)=>F.relevanceScore-L.relevanceScore)},[o,r.notes]);k.useEffect(()=>{e&&(a(""),f(0),setTimeout(()=>{var P;(P=p.current)==null||P.focus()},100))},[e]),k.useEffect(()=>{const P=L=>{e&&(L.key==="ArrowDown"?(L.preventDefault(),f(F=>Math.min(F+1,v.length-1))):L.key==="ArrowUp"?(L.preventDefault(),f(F=>Math.max(F-1,0))):L.key==="Enter"&&v.length>0&&(L.preventDefault(),w(v[l])))};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[e,v,l]),k.useEffect(()=>{f(0)},[v.length]);const w=P=>{_e.selectNote(P.id),t(!1)},N=(P,L)=>L.trim()?P.split(new RegExp(`(${L})`,"gi")).map((z,Y)=>z.toLowerCase()===L.toLowerCase()?d.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-800",children:z},Y):z):P,R=(P,L)=>{const F=g(P);if(!L.trim())return F.slice(0,100)+"...";const z=F.toLowerCase(),Y=L.toLowerCase(),U=z.indexOf(Y);if(U===-1)return F.slice(0,100)+"...";const B=Math.max(0,U-50),te=Math.min(F.length,U+L.length+50),V=F.slice(B,te);return(B>0?"...":"")+V+(te<F.length?"...":"")};return d.jsx(Cr,{open:e,onOpenChange:t,children:d.jsxs(Un,{className:"w-[95vw] max-w-2xl h-[80vh] max-h-[600px] sm:w-[80vw] md:w-[70vw] lg:w-[60vw] overflow-hidden flex flex-col",children:[d.jsx(Xn,{className:"flex-shrink-0",children:d.jsxs(Gn,{className:"flex items-center gap-2",children:[d.jsx($n,{className:"w-5 h-5"}),"Search Notes"]})}),d.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[d.jsxs("div",{className:"flex-shrink-0 mb-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx($n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),d.jsx(Ks,{ref:p,value:o,onChange:P=>a(P.target.value),placeholder:"Search in note titles and content...",className:"pl-10 pr-10"}),o&&d.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>a(""),className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",children:d.jsx(Ca,{className:"w-4 h-4"})})]}),o&&d.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Found ",v.length," note",v.length!==1?"s":"",v.length>0&&d.jsx("span",{className:"ml-2",children:"• Use ↑↓ to navigate • Enter to select"})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:o.trim()?v.length===0?d.jsxs("div",{className:"text-center text-muted-foreground mt-8",children:[d.jsx($n,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),d.jsxs("p",{children:['No notes found for "',o,'"']}),d.jsx("p",{className:"text-sm mt-2",children:"Try different keywords"})]}):d.jsx("div",{className:"space-y-2",children:v.map((P,L)=>d.jsx("div",{onClick:()=>w(P),className:`p-4 rounded-lg border cursor-pointer transition-all duration-200 ${L===l?"bg-primary/10 border-primary/30 ring-2 ring-primary/20":"hover:bg-muted/50 border-border/50"}`,children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(ka,{className:"w-5 h-5 text-muted-foreground flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"font-medium text-sm mb-1 truncate",children:N(P.title||"Untitled",o)}),d.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Updated ",new Date(P.updatedAt).toLocaleDateString()]}),P.contentMatch&&d.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:N(R(P.content,o),o)}),d.jsxs("div",{className:"flex gap-2 mt-2",children:[P.titleMatch&&d.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full",children:"Title match"}),P.contentMatch&&d.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded-full",children:"Content match"})]})]}),L===l&&d.jsxs("div",{className:"flex flex-col gap-1 text-muted-foreground",children:[d.jsx(Ll,{className:"w-3 h-3"}),d.jsx(Fl,{className:"w-3 h-3"})]})]})},P.id))}):d.jsxs("div",{className:"text-center text-muted-foreground mt-8",children:[d.jsx($n,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Start typing to search through your notes..."}),d.jsx("p",{className:"text-sm mt-2",children:"Search in both titles and content"})]})})]})]})})};function xp(e,t){let r;return function(...o){clearTimeout(r),r=setTimeout(()=>{e(...o)},t)}}function Sp(){const e=Co(()=>_e.states),t=k.useCallback(()=>xp(()=>{Ki().catch(l=>console.error("Auto-save failed:",l))},1e3)(),[]),[r,o]=k.useState(!1);return k.useEffect(()=>{t()},[e,t]),k.useEffect(()=>{Ku().catch(l=>console.error("Failed to load data:",l))},[]),k.useEffect(()=>{const l=()=>{o(!0)};return window.addEventListener("triggerSearchDialog",l),()=>window.removeEventListener("triggerSearchDialog",l)},[]),cd({"cmd+k":()=>{const l=_e.createNote();_e.selectNote(l)},"cmd+d":()=>{if(e.selectedNoteId){const l=new CustomEvent("triggerDeleteDialog");window.dispatchEvent(l)}},"cmd+s":()=>{Ki().catch(l=>console.error("Manual save failed:",l))},"cmd+f":()=>{o(!0)},escape:()=>{r?o(!1):document.activeElement instanceof HTMLElement&&document.activeElement.blur()},"alt+arrowup":()=>{const l=e.notes.findIndex(f=>f.id===e.selectedNoteId);l>0&&_e.selectNote(e.notes[l-1].id)},"alt+arrowdown":()=>{const l=e.notes.findIndex(f=>f.id===e.selectedNoteId);l<e.notes.length-1&&_e.selectNote(e.notes[l+1].id)},"cmd+b":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleBold"}}))},"cmd+shift+i":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleItalic"}}))},"cmd+shift+s":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleStrike"}}))},"cmd+1":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleHeading",level:1}}))},"cmd+2":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleHeading",level:2}}))},"cmd+3":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleHeading",level:3}}))},"cmd+shift+l":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleBulletList"}}))},"cmd+shift+o":()=>{window.dispatchEvent(new CustomEvent("editorCommand",{detail:{command:"toggleOrderedList"}}))},"cmd+shift+c":()=>{document.execCommand("formatBlock",!1,"pre")}}),d.jsxs("div",{className:"flex h-screen bg-background text-foreground overflow-hidden",children:[d.jsx(bp,{}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsx(Ef,{})}),d.jsx(wp,{open:r,onOpenChange:o})]})}const jp={theme:"system",setTheme:()=>null},Np=k.createContext(jp);function _p({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...o}){const[a,l]=k.useState(()=>localStorage.getItem(r)||t);k.useEffect(()=>{const p=window.document.documentElement;if(p.classList.remove("light","dark"),a==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";p.classList.add(g);return}p.classList.add(a)},[a]);const f={theme:a,setTheme:p=>{localStorage.setItem(r,p),l(p)}};return d.jsx(Np.Provider,{...o,value:f,children:e})}const Cp=()=>d.jsx(_p,{defaultTheme:"system",storageKey:"vite-ui-theme",children:d.jsx(ol,{store:ou,children:d.jsx(Sp,{})})});fs.createRoot(document.getElementById("root")).render(d.jsx(Ye.StrictMode,{children:d.jsx(Cp,{})}));
